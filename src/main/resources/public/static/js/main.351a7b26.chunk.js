(this.webpackJsonpsterling=this.webpackJsonpsterling||[]).push([[0],{253:function(e,t,n){e.exports=n(705)},704:function(e,t,n){},705:function(e,t,n){"use strict";n.r(t);var a=n(43),l=n(0),i=n.n(l),r=n(30),o=n.n(r),c=n(16),s=n(3),u=n(7),d=n(6),p=n(8),m=n(4),h=n(28),g=function(){function e(){Object(s.a)(this,e),this._listeners=void 0}return Object(m.a)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t),this}},{key:"dispatchEvent",value:function(e){var t=this;if(void 0===this._listeners)return this;var n=this._listeners[e.type];void 0!==n&&(e.target=this,n.slice().forEach((function(n){n.call(t,e)})));return this}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0===this._listeners)return this;var n=this._listeners[e];if(void 0!==n){var a=n.indexOf(t);-1!==a&&n.splice(a,1)}return this}}]),e}(),f=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this)))._url=void 0,n._ws=void 0,n._auto_reconnect=void 0,n._auto_reconnect_interval=void 0,n._connected=void 0,n._heartbeat_count=void 0,n._heartbeat_id=void 0,n._heartbeat_interval=void 0,n._heartbeat_latency=void 0,n._heartbeat_timestamp=void 0,n._url=e,n._ws=null,n._auto_reconnect=!1,n._auto_reconnect_interval=5e3,n._connected=!1,n._heartbeat_count=0,n._heartbeat_id=0,n._heartbeat_interval=15e3,n._heartbeat_latency=0,n._heartbeat_timestamp=0,n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"connect",value:function(){this._ws&&(this._ws.onclose=null,this._ws.close()),this._initializeConnection()}},{key:"requestCurrentInstance",value:function(){return this._request("current")}},{key:"requestEvaluateExpression",value:function(e,t){return this._request("EVL:".concat(e,":").concat(t))}},{key:"requestNextInstance",value:function(){return this._request("next")}},{key:"_handleEval",value:function(e){this.dispatchEvent({type:"eval",data:e})}},{key:"_handlePong",value:function(){this._heartbeat_latency+=performance.now()-this._heartbeat_timestamp,this._heartbeat_count+=1}},{key:"_handleXML",value:function(e){if(e.length)try{this.dispatchEvent({type:"instance",instance:new h.a(e)})}catch(t){this.dispatchEvent({type:"error",message:"Invalid instance data"})}}},{key:"_initializeConnection",value:function(){this._ws=new WebSocket(this._url),this._ws.onopen=this._onOpen.bind(this),this._ws.onclose=this._onClose.bind(this),this._ws.onerror=this._onError.bind(this),this._ws.onmessage=this._onMessage.bind(this)}},{key:"_onClose",value:function(e){this._connected=!1,this._ws=null,this._auto_reconnect&&this._reconnect(),this.dispatchEvent({type:"disconnect"})}},{key:"_onError",value:function(e){this.dispatchEvent({type:"error"})}},{key:"_onMessage",value:function(e){this._resetHeartbeat();var t=e.data.slice(0,4),n=e.data.slice(4);switch(t){case"pong":this._handlePong();break;case"EVL:":this._handleEval(n);break;case"XML:":this._handleXML(n);break;default:this.dispatchEvent({type:"error",message:"Unknown response header: ".concat(t)})}}},{key:"_onOpen",value:function(e){this._connected=!0,this._resetHeartbeat(),this.dispatchEvent({type:"connect"})}},{key:"_ping",value:function(){this._ws&&(this._heartbeat_timestamp=performance.now(),this._ws.send("ping"))}},{key:"_reconnect",value:function(){window.setTimeout(this._initializeConnection.bind(this),this._auto_reconnect_interval)}},{key:"_request",value:function(e){return!(!this._connected||!this._ws)&&(this._ws.send(e),!0)}},{key:"_resetHeartbeat",value:function(){clearTimeout(this._heartbeat_id),this._heartbeat_id=window.setTimeout(this._ping.bind(this),this._heartbeat_interval)}}]),t}(g),b=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).call(this,"ws://"+window.location.hostname+":"+window.location.port+"/alloy"))}return Object(p.a)(t,e),t}(f),v=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).call(this,"ws://localhost:"+window.location.search.slice(1)))}return Object(p.a)(t,e),t}(f),S=n(17),y=n(26),E=n(18),k=n(14),j=Object(y.a)({name:"sterling",initialState:{instance:null,mainView:"graph",tableView:"settings",graphView:"node",sourceView:"files",welcomeDescription:"Use Alloy to generate an instance.",welcomeTitle:"Welcome to Sterling"},reducers:{setGraphView:function(e,t){e.graphView=t.payload===e.graphView?null:t.payload},setInstance:function(e,t){e.instance=t.payload},setMainView:function(e,t){e.mainView=t.payload},setSourceView:function(e,t){e.sourceView=t.payload===e.sourceView?null:t.payload},setTableView:function(e,t){e.tableView=t.payload===e.tableView?null:t.payload}}}),C=j.actions,_=C.setGraphView,O=C.setInstance,w=C.setMainView,T=C.setSourceView,x=C.setTableView,N=j.reducer,L={asAttribute:Object(k.b)(),atoms:Object(k.b)(),collapseProjections:!1,projections:Object(k.b)(),unprojected:Object(k.a)()},F=Object(y.a)({name:"graphdata",initialState:L,reducers:{addProjection:function(e,t){var n=t.payload,a=e.atoms.get(n);if(a&&a.length){var l=a[0];e.projections=e.projections.set(n,l);var i=e.unprojected.indexOf(n);-1!==i&&(e.unprojected=e.unprojected.delete(i))}},nextAtom:function(e,t){var n=t.payload,a=e.projections.get(n),l=e.atoms.get(n);if(a&&l){var i=l.indexOf(a),r=i+1;-1!==i&&r<l.length&&(e.projections=e.projections.set(n,l[r]))}},previousAtom:function(e,t){var n=t.payload,a=e.projections.get(n),l=e.atoms.get(n);if(a&&l){var i=l.indexOf(a),r=i-1;-1!==i&&r>=0&&(e.projections=e.projections.set(n,l[r]))}},removeProjection:function(e,t){var n=t.payload;e.projections=e.projections.delete(n),e.unprojected=e.unprojected.push(n).sort(D)},setProjection:function(e,t){var n=t.payload,a=n.sig,l=n.atom;e.projections.has(a)&&e.projections.get(a)!==l&&(e.projections=e.projections.set(a,l))},toggleAsAttribute:function(e,t){var n=t.payload;if(n){var a=e.asAttribute.get(n);e.asAttribute=e.asAttribute.set(n,!a)}},toggleCollapseProjections:function(e){e.collapseProjections=!e.collapseProjections}},extraReducers:function(e){return e.addCase(O,(function(e,t){var n=t.payload;if(n){var a=n.signatures().find((function(e){return"univ"===e.id()}));if(a){var l=a.subTypes(),i=n.fields(),r=n.skolems().filter((function(e){return e.arity()>1})),o=[].concat(Object(E.a)(i),Object(E.a)(r));e.projections=Object(k.b)().withMutations((function(t){l.forEach((function(n){var a=e.projections.get(n.id());a&&n.findAtom(a)&&t.set(n.id(),a)}))})),e.asAttribute=Object(k.b)(o.map((function(t){var n=t.id();return e.asAttribute.has(n)?[n,e.asAttribute.get(n)]:[n,!1]}))),e.unprojected=Object(k.a)().withMutations((function(t){l.forEach((function(n){var a=n.id();n.atoms(!0).length&&!e.projections.has(a)&&t.push(a)}))})).sort(D),e.atoms=Object(k.b)(l.map((function(e){return[e.id(),e.atoms(!0).map((function(e){return e.name()}))]})))}else e.asAttribute=Object(k.b)(),e.atoms=Object(k.b)(),e.projections=Object(k.b)(),e.unprojected=Object(k.a)()}else e.atoms=Object(k.b)(),e.projections=Object(k.b)(),e.unprojected=Object(k.a)()}))}});function D(e,t){return e.localeCompare(t)}var R=F.actions,A=R.addProjection,V=R.nextAtom,I=R.previousAtom,P=R.removeProjection,M=R.setProjection,z=R.toggleAsAttribute,B=R.toggleCollapseProjections,H=F.reducer,G=n(718),W=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,n="string"===typeof e.signature?e.signature:e.nameFunction?e.nameFunction(e.signature):e.signature.name();return l.createElement(G.z,{className:t.className,fill:e.fill},n)}}]),t}(l.Component);W.className="sig-tag";var q=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=("string"===typeof this.props.field?this.props.field:this.props.nameFunction?this.props.nameFunction(this.props.field):this.props.field.name()).split("<:");return l.createElement(G.z,{className:t.className,fill:!0},t.FieldTagEls(e))}}],[{key:"FieldTagEls",value:function(e){return 2!==e.length?l.createElement(l.Fragment,null,e.join("")):l.createElement(l.Fragment,null,e[0],l.createElement(G.k,{icon:"symbol-triangle-down",iconSize:14,style:{padding:"1px",transform:"rotate(90deg)"}}),e[1])}}]),t}(l.Component);q.className="field-tag";var U=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,n="string"===typeof e.skolem?e.skolem:e.nameFunction?e.nameFunction(e.skolem):e.skolem.name();return l.createElement(G.z,{className:t.className,fill:!0},n)}}]),t}(l.Component);function $(e,t){return{id:"Fields",children:(t?e.filter((function(e){return e.tuples().length})):e).map((function(e){return{id:e.id(),label:q.FieldTagEls(e.id().split("<:")),icon:"flows",children:[]}}))}}U.className="skolem-tag";var J={collapsed:Object(k.b)({Fields:!1,Skolems:!1}),collapseEdgeStyle:!1,collapseScheme:!1,fields:[],hideEmptyFields:!0,labelStyles:Object(k.b)(),linkStyles:Object(k.b)(),selected:null,skolems:[],treeField:null,treeSkolem:null},K=Object(y.a)({name:"edgestyles",initialState:J,reducers:{clearAll:function(e){e.labelStyles=e.labelStyles.map((function(){return{}})),e.linkStyles=e.linkStyles.map((function(){return{}}))},clearCurrent:function(e){e.selected&&(e.labelStyles=e.labelStyles.set(e.selected,{}),e.linkStyles=e.linkStyles.set(e.selected,{}))},collapseTreeNode:function(e,t){var n=t.payload;e.collapsed=e.collapsed.set(n,!0)},expandTreeNode:function(e,t){var n=t.payload;e.collapsed=e.collapsed.set(n,!1)},selectTreeNode:function(e,t){var n=t.payload;(e.linkStyles.has(n)||"Fields"===n||"Skolems"===n)&&(e.selected=n)},setColorScheme:function(e,t){var n=t.payload;n.length&&(e.linkStyles=e.linkStyles.withMutations((function(t){[].concat(Object(E.a)(e.fields),Object(E.a)(e.skolems)).forEach((function(a,l){var i=a.id(),r=n[l%n.length],o=e.linkStyles.get(i);if(o){var c=Object(S.g)(o);c.stroke=r,t.set(i,c)}}))})),e.labelStyles=e.labelStyles.withMutations((function(t){[].concat(Object(E.a)(e.fields),Object(E.a)(e.skolems)).forEach((function(a,l){var i=a.id(),r=n[l%n.length],o=e.labelStyles.get(i);if(o){var c=Object(S.f)(o);c.color=r,t.set(i,c)}}))})))},setLabelColor:function(e,t){if(e.selected){var n=e.labelStyles.get(e.selected);if(n){var a=t.payload,l=n?Object(S.f)(n):{};null===a?delete l.color:l.color=a,e.labelStyles=e.labelStyles.set(e.selected,l)}}},setLabelSize:function(e,t){if(e.selected){var n=e.labelStyles.get(e.selected);if(n){var a=parseInt(t.payload),l=n?Object(S.f)(n):{};isNaN(a)||0===a?delete l.font:l.font="".concat(a,"px sans-serif"),e.labelStyles=e.labelStyles.set(e.selected,l)}}},setStroke:function(e,t){if(e.selected){var n=e.linkStyles.get(e.selected);if(n){var a=t.payload,l=Object(S.g)(n);null===a?delete l.stroke:l.stroke=a,e.linkStyles=e.linkStyles.set(e.selected,l)}}},setStrokeWidth:function(e,t){if(e.selected){var n=e.linkStyles.get(e.selected);if(n){var a=parseInt(t.payload),l=Object(S.g)(n);isNaN(a)||0===a?delete l.strokeWidth:l.strokeWidth=a,e.linkStyles=e.linkStyles.set(e.selected,l)}}},toggleCollapseEdgeStyle:function(e){e.collapseEdgeStyle=!e.collapseEdgeStyle},toggleCollapseScheme:function(e){e.collapseScheme=!e.collapseScheme},toggleHideEmptyFields:function(e){e.hideEmptyFields=!e.hideEmptyFields,e.treeField=$(e.fields,e.hideEmptyFields)}},extraReducers:function(e){return e.addCase(O,(function(e,t){var n=t.payload;if(n){var a=n.fields(),l=n.skolems().filter((function(e){return e.arity()>1})),i=[].concat(Object(E.a)(a),Object(E.a)(l));e.fields=a,e.skolems=l,e.treeField=$(a,e.hideEmptyFields),e.treeSkolem=function(e){return{id:"Skolems",children:e.map((function(e){return{id:e.id(),icon:"flows",children:[]}}))}}(l),e.labelStyles=Object(k.b)(i.map((function(t){var n=t.id();return e.labelStyles.has(n)?[n,Object(S.f)(e.labelStyles.get(n))]:[n,{}]}))),e.linkStyles=Object(k.b)(i.map((function(t){var n=t.id();return e.linkStyles.has(n)?[n,Object(S.g)(e.linkStyles.get(n))]:[n,{}]}))),e.labelStyles.has("Fields")||(e.labelStyles=e.labelStyles.set("Fields",{})),e.labelStyles.has("Skolems")||(e.labelStyles=e.labelStyles.set("Skolems",{})),e.linkStyles.has("Fields")||(e.linkStyles=e.linkStyles.set("Fields",{})),e.linkStyles.has("Skolems")||(e.linkStyles=e.linkStyles.set("Skolems",{}))}else e.fields=[],e.labelStyles=Object(k.b)(),e.linkStyles=Object(k.b)(),e.selected=null,e.skolems=[],e.treeField=null,e.treeSkolem=null}))}}),X=K.actions,Q=X.clearAll,Y=X.clearCurrent,Z=X.collapseTreeNode,ee=X.expandTreeNode,te=X.selectTreeNode,ne=X.setColorScheme,ae=X.setLabelColor,le=X.setLabelSize,ie=X.setStroke,re=X.setStrokeWidth,oe=X.toggleCollapseEdgeStyle,ce=X.toggleCollapseScheme,se=X.toggleHideEmptyFields,ue=K.reducer,de=Object(y.a)({name:"graphsettings",initialState:{axesVisible:!0,bundleFactor:.15,collapseEdgeSettings:!1,collapseGraphSettings:!1,gridVisible:!0,edgeLabelPlacement:"spread"},reducers:{setBundleFactor:function(e,t){var n=t.payload;n>=0&&(e.bundleFactor=n)},setLabelPlacement:function(e,t){e.edgeLabelPlacement=t.payload},toggleAxesVisible:function(e){e.axesVisible=!e.axesVisible},toggleCollapseEdgeSettings:function(e){e.collapseEdgeSettings=!e.collapseEdgeSettings},toggleCollapseGraphSettings:function(e){e.collapseGraphSettings=!e.collapseGraphSettings},toggleGridVisible:function(e){e.gridVisible=!e.gridVisible}}}),pe=de.actions,me=pe.setBundleFactor,he=pe.setLabelPlacement,ge=pe.toggleAxesVisible,fe=pe.toggleCollapseEdgeSettings,be=pe.toggleCollapseGraphSettings,ve=pe.toggleGridVisible,Se=de.reducer,ye={align:void 0,nodesep:100,rankdir:"BT",ranker:"network-simplex",ranksep:200},Ee=Object(y.a)({name:"layout",initialState:ye,reducers:{setAlign:function(e,t){e.align=t.payload},setNodeSep:function(e,t){e.nodesep=t.payload},setRankDir:function(e,t){e.rankdir=t.payload},setRanker:function(e,t){e.ranker=t.payload},setRankSep:function(e,t){e.ranksep=t.payload}}}),ke=Ee.actions,je=ke.setAlign,Ce=ke.setNodeSep,_e=ke.setRankDir,Oe=ke.setRanker,we=ke.setRankSep,Te=Ee.reducer;function xe(e,t){if(!e)return null;return function e(n){var a=(t?n.subTypes().filter((function(e){return e.atoms().length||e.subTypes().length})):n.subTypes()).map(e);return{id:n.id(),icon:"group-objects",children:a}}(e)}var Ne,Le,Fe,De,Re,Ae={collapsed:Object(k.b)(),collapseNodeStyle:!1,hideDisconnected:Object(k.b)(),hideEmptySets:!0,labels:Object(k.b)(),nodeTree:null,selected:null,shapes:Object(k.b)(),univ:null},Ve=Object(y.a)({name:"nodestyles",initialState:Ae,reducers:{clearAll:function(e){e.labels=e.labels.map((function(){return{}})),e.shapes=e.shapes.map((function(){return{}}))},clearCurrent:function(e){e.selected&&(e.labels=e.labels.set(e.selected,{}),e.shapes=e.shapes.set(e.selected,{}))},collapseTreeNode:function(e,t){var n=t.payload;e.collapsed=e.collapsed.set(n,!0)},expandTreeNode:function(e,t){var n=t.payload;e.collapsed=e.collapsed.set(n,!1)},selectTreeNode:function(e,t){var n=t.payload;e.shapes.has(n)&&(e.selected=n)},setFill:function(e,t){if(e.selected){var n=e.shapes.get(e.selected);if(n){var a=t.payload,l=n?Object(S.h)(n):{};null===a?delete l.fill:l.fill=a,e.shapes=e.shapes.set(e.selected,l)}}},setHeight:function(e,t){if(e.selected){var n=e.shapes.get(e.selected);if(n&&"rectangle"===n.type){var a=parseInt(t.payload),l=Object(S.h)(n);isNaN(a)||0===a?delete l.height:l.height=a,e.shapes=e.shapes.set(e.selected,l)}}},setLabelColor:function(e,t){if(e.selected){var n=e.labels.get(e.selected);if(n){var a=t.payload,l=n?Object(S.f)(n):{};null===a?delete l.color:l.color=a,e.labels=e.labels.set(e.selected,l)}}},setLabelSize:function(e,t){if(e.selected){var n=e.labels.get(e.selected);if(n){var a=n?Object(S.f)(n):{},l=parseInt(t.payload);isNaN(l)||0===l?delete a.font:a.font="".concat(l,"px sans-serif"),e.labels=e.labels.set(e.selected,a)}}},setRadius:function(e,t){if(e.selected){var n=e.shapes.get(e.selected);if(n&&"circle"===n.type){var a=parseInt(t.payload),l=Object(S.h)(n);isNaN(a)||0===a?delete l.radius:l.radius=a,e.shapes=e.shapes.set(e.selected,l)}}},setShape:function(e,t){if(e.selected){var n=e.shapes.get(e.selected),a=t.payload;if(void 0===n)return;if(n&&n.type!==a||n!==a){var l=Object(S.i)(n,a);e.shapes=e.shapes.set(e.selected,l)}}},setStroke:function(e,t){if(e.selected){var n=e.shapes.get(e.selected);if(n){var a=t.payload,l=Object(S.h)(n);null===a?delete l.stroke:l.stroke=a,e.shapes=e.shapes.set(e.selected,l)}}},setStrokeWidth:function(e,t){if(e.selected){var n=e.shapes.get(e.selected);if(n){var a=parseInt(t.payload),l=Object(S.h)(n);isNaN(a)||-1===a?delete l.strokeWidth:l.strokeWidth=a,e.shapes=e.shapes.set(e.selected,l)}}},setWidth:function(e,t){if(e.selected){var n=e.shapes.get(e.selected);if(n&&"rectangle"===n.type){var a=parseInt(t.payload),l=Object(S.h)(n);isNaN(a)||0===a?delete l.width:l.width=a,e.shapes=e.shapes.set(e.selected,l)}}},toggleCollapseNodeStyle:function(e){e.collapseNodeStyle=!e.collapseNodeStyle},toggleHideDisconnected:function(e){var t=e.selected;if(t){var n=!e.hideDisconnected.get(t);e.hideDisconnected=e.hideDisconnected.set(t,n)}},toggleHideEmptySets:function(e){e.hideEmptySets=!e.hideEmptySets,e.nodeTree=xe(e.univ,e.hideEmptySets)}},extraReducers:function(e){return e.addCase(O,(function(e,t){var n=t.payload;if(null!==n){var a=n.signatures(),l=a.find((function(e){return"univ"===e.id()}))||null;e.univ=l,e.nodeTree=xe(l,e.hideEmptySets),e.collapsed=Object(k.b)(a.map((function(t){var n=t.id();return e.collapsed.has(n)?[n,!!e.collapsed.get(n)]:[n,!1]}))),e.hideDisconnected=Object(k.b)(a.map((function(t){var n=t.id();return e.hideDisconnected.has(n)?[n,!!e.hideDisconnected.get(n)]:[n,!0]}))),e.labels=Object(k.b)(a.map((function(t){var n=t.id();return e.labels.has(n)?[n,Object(S.f)(e.labels.get(n))]:[n,{}]}))),e.shapes=Object(k.b)(a.map((function(t){var n=t.id();return e.shapes.has(n)?[n,Object(S.h)(e.shapes.get(n))]:[n,{}]}))),e.selected&&!e.shapes.has(e.selected)&&(e.selected=null)}else e.collapsed=Object(k.b)(),e.hideDisconnected=Object(k.b)(),e.labels=Object(k.b)(),e.nodeTree=null,e.shapes=Object(k.b)(),e.selected=null,e.univ=null}))}}),Ie=Ve.actions,Pe=Ie.clearAll,Me=Ie.clearCurrent,ze=Ie.collapseTreeNode,Be=Ie.expandTreeNode,He=Ie.selectTreeNode,Ge=Ie.setFill,We=Ie.setHeight,qe=Ie.setLabelColor,Ue=Ie.setLabelSize,$e=Ie.setRadius,Je=Ie.setShape,Ke=Ie.setStroke,Xe=Ie.setStrokeWidth,Qe=Ie.setWidth,Ye=Ie.toggleCollapseNodeStyle,Ze=Ie.toggleHideDisconnected,et=Ie.toggleHideEmptySets,tt=Ve.reducer,nt={graph:new S.c},at=Object(y.a)({name:"graph",initialState:nt,reducers:{}}),lt=Object(a.combineReducers)({dataSlice:H,edgeStylingSlice:ue,graphSlice:at.reducer,graphSettingsSlice:Se,layoutSlice:Te,nodeStylingSlice:tt}),it=Object(y.a)({name:"source",initialState:{selected:null},reducers:{setSelected:function(e,t){e.selected=t.payload}}}),rt=it.actions.setSelected,ot=it.reducer;!function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(Ne||(Ne={})),function(e){e[e.Row=0]="Row",e[e.Column=1]="Column"}(Le||(Le={})),function(e){e[e.Ascending=0]="Ascending",e[e.Descending=1]="Descending"}(Fe||(Fe={})),function(e){e[e.Alphabetical=0]="Alphabetical",e[e.Builtin=1]="Builtin",e[e.Group=2]="Group",e[e.Size=3]="Size"}(De||(De={})),function(e){e[e.All=0]="All",e[e.Signatures=1]="Signatures",e[e.Fields=2]="Fields",e[e.Skolems=3]="Skolems",e[e.Select=4]="Select"}(Re||(Re={}));var ct=["#2965CC","#29A634","#D99E0B","#D13913","#8F398F","#00B3A4","#DB2C6F","#9BBF30","#96622D","#7157D9"];function st(e){return function(t){return e?t.id().replace(/^this\//,""):t.id()}}function ut(e,t){return e.method===De.Size?h.d.sizeSort(e.direction===Fe.Ascending):e.method===De.Alphabetical?h.d.alphabeticalSort(t,e.direction===Fe.Ascending):e.method===De.Group?h.d.groupSort():function(){return 0}}var dt={alignment:Ne.Left,collapseData:!1,collapseLayout:!1,collapseTables:!1,data:[],dataSelected:[],highlightSkolems:!0,layoutDirection:Le.Row,removeBuiltin:!0,removeEmpty:!0,removeThis:!0,primarySort:{method:De.Group,direction:Fe.Descending},secondarySort:{method:De.Size,direction:Fe.Descending},skolemColors:new Map,tablesType:Re.All},pt=Object(y.a)({name:"table",initialState:dt,reducers:{clearSelectedData:function(e){e.dataSelected=[]},deselectData:function(e,t){var n=e.dataSelected.indexOf(t.payload);-1!==n&&e.dataSelected.splice(n,1),e.tablesType=Re.Select},selectData:function(e,t){e.dataSelected.includes(t.payload)||e.dataSelected.push(t.payload),e.tablesType=Re.Select},setAlignment:function(e,t){e.alignment=t.payload},setLayoutDirection:function(e,t){e.layoutDirection=t.payload},setSort:function(e,t){e.primarySort.method!==t.payload.method&&(e.secondarySort=e.primarySort),e.primarySort=t.payload},setTableTypes:function(e,t){e.tablesType=t.payload},toggleCollapseData:function(e){e.collapseData=!e.collapseData},toggleCollapseLayout:function(e){e.collapseLayout=!e.collapseLayout},toggleCollapseTables:function(e){e.collapseTables=!e.collapseTables},toggleHighlightSkolems:function(e){e.highlightSkolems=!e.highlightSkolems,e.highlightSkolems&&e.tablesType===Re.Skolems&&(e.tablesType=Re.All)},toggleRemoveBuiltin:function(e){e.removeBuiltin=!e.removeBuiltin},toggleRemoveEmpty:function(e){e.removeEmpty=!e.removeEmpty},toggleRemoveThis:function(e){e.removeThis=!e.removeThis}},extraReducers:function(e){return e.addCase(O,(function(e,t){var n=t.payload;if(n){var a=n.skolems();e.data=[].concat(Object(E.a)(n.signatures()),Object(E.a)(n.fields()),Object(E.a)(a)),e.skolemColors=new Map(a.map((function(e,t){return[e,ct[t%a.length]]}))),e.dataSelected=e.dataSelected.filter((function(t){return void 0!==e.data.find((function(e){return e.id()===t.id()}))}))}}))}}),mt=pt.actions,ht=mt.clearSelectedData,gt=mt.deselectData,ft=mt.selectData,bt=mt.setAlignment,vt=mt.setLayoutDirection,St=mt.setSort,yt=mt.setTableTypes,Et=mt.toggleCollapseData,kt=mt.toggleCollapseLayout,jt=mt.toggleCollapseTables,Ct=mt.toggleHighlightSkolems,_t=mt.toggleRemoveBuiltin,Ot=mt.toggleRemoveEmpty,wt=mt.toggleRemoveThis,Tt=pt.reducer,xt=Object(a.combineReducers)({graphSlice:lt,sourceSlice:ot,sterlingSlice:N,tableSlice:Tt}),Nt=n(27),Lt=n(721),Ft=n(215),Dt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this)))._connection=void 0,n._expressions=void 0,n._pending=void 0,n._connection=e,n._expressions=[],n._pending=null,e.addEventListener("eval",(function(e){n._parse(e.data)})),n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"evaluate",value:function(e){this._request({id:t._nextid++,error:!1,expression:e,result:null})}},{key:"expressions",value:function(){return this._expressions}},{key:"_parse",value:function(e){var t=this._pending,n=e.match(/(-?\d+):(.*)/);if(null!==n){var a=parseInt(n[1]);if(t&&t.id===a){var l=n[2].trim();"ERR:"===l.slice(0,4)?(t.result=l.slice(4),t.error=!0):(t.result=l,t.error=!1),this._expressions.push(t),this._setPending(null)}}}},{key:"_request",value:function(e){this._setPending(e),this._connection.requestEvaluateExpression(e.id,e.expression)||this._parse("".concat(e.id,":ERR:Error: Not Connected"))}},{key:"_setPending",value:function(e){this._pending=e,null!==e?this.dispatchEvent({type:"pending"}):this.dispatchEvent({type:"ready"})}}]),t}(g);Dt._nextid=0;var Rt=n(51),At=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e)))._botRef=void 0,n._textRef=void 0,n._onDown=function(){var e=n._textRef.current;if(e&&e.selectionStart===e.value.length){var t=n.state.history<n.state.count?n.state.history+1:n.state.count;n.setState({history:t})}},n._onEnter=function(){var e=n._textRef.current;if(e){var t=e.value;e.value="",t.length&&n.props.evaluator.evaluate(t)}},n._onKeyDown=function(e){switch(e.key){case"Enter":e.preventDefault(),n._onEnter();break;case"ArrowUp":n._onUp();break;case"ArrowDown":n._onDown()}},n._onPending=function(){n._setActive(!1)},n._onReady=function(){n._setActive(!0);var e=n.props.evaluator.expressions();n.setState({count:e.length,expressions:e,history:e.length})},n._onUp=function(){var e=n._textRef.current;if(e&&0===e.selectionStart){var t=n.state.history>0?n.state.history-1:0;n.setState({history:t})}},n._scrollDown=function(){var e=n._botRef.current;e&&e.scrollIntoView()},n._setActive=function(e){var t=n._textRef.current;t&&(t.readOnly=!e)},n._setText=function(e){var t=n._textRef.current;t&&(t.value=e)};var a=e.evaluator;a.addEventListener("pending",n._onPending),a.addEventListener("ready",n._onReady),n._botRef=i.a.createRef(),n._textRef=i.a.createRef();var l=e.evaluator.expressions();return n.state={count:l.length,expressions:l,history:l.length},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this._scrollDown()}},{key:"componentDidUpdate",value:function(e,t){t.count!==this.state.count&&this._scrollDown()}},{key:"componentWillUnmount",value:function(){var e=this.props.evaluator;e.removeEventListener("pending",this._onPending),e.removeEventListener("ready",this._onReady)}},{key:"render",value:function(){var e=this.state,t=i.a.createElement(G.k,{icon:"circle",iconSize:12}),n=i.a.createElement(G.k,{icon:"cross",iconSize:12});return e.history<e.count?this._setText(e.expressions[e.history].expression):this._setText(""),i.a.createElement("div",{className:"evaluator"},i.a.createElement("div",{className:"evaluator-output"},this.state.expressions.map((function(e){return i.a.createElement(G.c,{key:e.id,icon:e.error?n:t,title:e.expression,intent:e.error?Rt.a.DANGER:Rt.a.NONE},e.result)})),i.a.createElement("div",{ref:this._botRef})),i.a.createElement("div",{className:"evaluator-input"},i.a.createElement("textarea",{autoComplete:"off",placeholder:"Enter an expression...",spellCheck:"false",onKeyDown:this._onKeyDown,ref:this._textRef})))}}]),t}(i.a.Component),Vt=n(68),It=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"drawer"},this.props.children)}}]),t}(i.a.Component);It.Section=function(e){var t=e.collapsed?"expand-all":"collapse-all";return i.a.createElement("div",{className:"section ".concat(e.collapsed?"collapsed":""),style:e.style},!!e.title&&i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"title"},e.title.toUpperCase()),e.onToggle&&i.a.createElement(G.a,{icon:t,minimal:!0,onClick:e.onToggle})),i.a.createElement(G.e,{isOpen:!e.collapsed,keepChildrenMounted:!0},i.a.createElement("div",{className:"body"},e.children)))};var Pt=It,Mt=n(722),zt=n(712),Bt=n(713),Ht=n(714),Gt=n(715),Wt=n(716),qt={preventOverflow:{enabled:!1},hide:{enabled:!1}},Ut=[["Tableu",function(e){var t=e.length/6|0,n=new Array(t),a=0;for(;a<t;)n[a]="#"+e.slice(6*a,6*++a);return n}("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab")],["Turbo",[0,1,2,4,5,6,7].map((function(e){return t=e/8,t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")";var t})).map((function(e){return Mt.b(e).hex()}))],["Categorical",zt.a.slice()],["Accent",Bt.a.slice()],["Dark",Ht.a.slice()],["Pastel",Gt.a.slice()],["Paired",Wt.a.slice()]],$t=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffc107","#ff9800","#ff5722","#795548","#607d8b","#333333","#777777","#bbbbbb","#ffffff"];function Jt(e){if(e){var t=Mt.a(e);return t?t.hex():void 0}}function Kt(e){if(!e.length)return"";var t=100/e.length,n=e.map((function(e,n){return"".concat(e," ").concat(n*t,"% ").concat((n+1)*t,"%")}));return"linear-gradient(to right, ".concat(n.join(","),")")}function Xt(e){if(e){var t=Mt.a(e);if(t){var n=t.rgb();return(299*n.r+587*n.g+114*n.b)/1e3>125?"#000000":"#ffffff"}}}var Qt={setColorScheme:ne,toggleCollapseScheme:ce},Yt=Object(c.b)((function(e){return{collapse:e.graphSlice.edgeStylingSlice.collapseScheme,labelStyles:e.graphSlice.edgeStylingSlice.labelStyles,linkStyles:e.graphSlice.edgeStylingSlice.linkStyles}}),Qt)((function(e){return i.a.createElement(Pt.Section,{collapsed:e.collapse,onToggle:e.toggleCollapseScheme,title:"Quick Color Scheme"},i.a.createElement(G.b,{minimal:!0,style:{flexWrap:"wrap",maxHeight:"15px",overflow:"hidden"}},Ut.map((function(t){var n=Object(Vt.a)(t,2),a=n[0],l=n[1];return i.a.createElement(G.C,{content:a,key:a},i.a.createElement(G.a,{minimal:!0,style:{background:Kt(l.slice(0,6)),margin:"0 5px",minWidth:"40px",minHeight:"15px"},onClick:function(){return e.setColorScheme(l)}}))}))))})),Zt=[{value:"center",label:"Center"},{value:"join",label:"Join"},{value:"spread",label:"Spread"}],en={setBundleFactor:me,setLabelPlacement:he,toggleCollapseEdgeSettings:fe},tn=Object(c.b)((function(e){return Object(Nt.a)({},e.graphSlice.graphSettingsSlice)}),en)((function(e){return i.a.createElement(Pt.Section,{collapsed:e.collapseEdgeSettings,onToggle:e.toggleCollapseEdgeSettings,title:"Edge Settings"},i.a.createElement(G.h,{inline:!0,label:"Bundle Factor"},i.a.createElement(G.s,{allowNumericCharactersOnly:!0,fill:!1,value:e.bundleFactor,min:0,minorStepSize:.001,stepSize:.01,majorStepSize:.1,onValueChange:function(t){return e.setBundleFactor(t)}})),i.a.createElement(G.h,{inline:!0,label:"Label Placement"},i.a.createElement(G.i,{minimal:!0,options:Zt,value:e.edgeLabelPlacement,onChange:function(t){e.setLabelPlacement(t.target.value)}})))})),nn=[{value:"undefined",label:"---"},{value:"UL",label:"Bottom Left"},{value:"UR",label:"Bottom Right"},{value:"DL",label:"Top Left"},{value:"DR",label:"Top Right"}],an=[{value:"TB",label:"Bottom to Top"},{value:"BT",label:"Top to Bottom"},{value:"LR",label:"Left to Right"},{value:"RL",label:"Right to Left"}],ln=[{value:"network-simplex",label:"Network Simplex"},{value:"tight-tree",label:"Tight Tree"},{value:"longest-path",label:"Longest Path"}],rn={setAlign:je,setNodeSep:Ce,setRankDir:_e,setRanker:Oe,setRankSep:we},on=Object(c.b)((function(e){return{graph:e.graphSlice.graphSlice.graph,options:e.graphSlice.layoutSlice}}),rn)((function(e){var t=Object.assign({},e.options);return i.a.createElement(Pt.Section,{title:"Layout"},i.a.createElement(G.h,{inline:!0,label:"Align"},i.a.createElement(G.i,{minimal:!0,options:nn,value:void 0===t.align?"undefined":t.align,onChange:function(t){var n="undefined"===t.target.value?void 0:t.target.value;e.setAlign(n)}})),i.a.createElement(G.h,{inline:!0,label:"Node Separation"},i.a.createElement(G.s,{allowNumericCharactersOnly:!0,fill:!1,value:t.nodesep,onValueChange:function(t){return e.setNodeSep(t)}})),i.a.createElement(G.h,{inline:!0,label:"Ranking Method"},i.a.createElement(G.i,{minimal:!0,options:ln,value:t.ranker,onChange:function(t){return e.setRanker(t.target.value)}})),i.a.createElement(G.h,{inline:!0,label:"Rank Direction"},i.a.createElement(G.i,{minimal:!0,options:an,value:t.rankdir,onChange:function(t){return e.setRankDir(t.target.value)}})),i.a.createElement(G.h,{inline:!0,label:"Rank Separation"},i.a.createElement(G.s,{allowNumericCharactersOnly:!0,fill:!1,value:t.ranksep,onValueChange:function(t){return e.setRankSep(t)}})),i.a.createElement(G.a,{minimal:!0,text:"Apply Layout",onClick:function(){e.graph&&((new S.b).apply(e.graph,t),e.graph.update())}}))})),cn=n(24),sn={addProjection:A,nextAtom:V,previousAtom:I,removeProjection:P,setProjection:M,toggleCollapseProjections:B},un=Object(c.b)((function(e){return Object(Nt.a)({},e.graphSlice.dataSlice)}),sn)((function(e){var t=e.projections.toArray();return i.a.createElement(Pt.Section,{collapsed:e.collapseProjections,onToggle:e.toggleCollapseProjections,title:"Projections"},i.a.createElement("div",{className:"projections"},t.map((function(t){var n=t[0],a=t[1],l=e.atoms.get(n)||[];return i.a.createElement(i.a.Fragment,{key:n},i.a.createElement(G.B,{ellipsize:!0},n),i.a.createElement(G.i,{minimal:!0,onChange:function(t){e.setProjection({sig:n,atom:t.target.value})},options:l,value:a}),i.a.createElement("div",{className:"buttons"},i.a.createElement(G.a,{icon:"chevron-left",minimal:!0,onClick:function(){return e.previousAtom(n)}}),i.a.createElement(G.a,{icon:"cross",minimal:!0,onClick:function(){return e.removeProjection(n)}}),i.a.createElement(G.a,{icon:"chevron-right",minimal:!0,onClick:function(){return e.nextAtom(n)}})))}))),e.unprojected.size>0&&i.a.createElement(G.t,{className:"centered",hasBackdrop:!0,modifiers:qt,position:cn.a.BOTTOM,usePortal:!0,wrapperTagName:"div"},i.a.createElement(G.a,{icon:"add",minimal:!0,text:"Add Projection"}),i.a.createElement(G.f,{vertical:!0},e.unprojected.map((function(t){return i.a.createElement(G.a,{key:t,minimal:!0,onClick:function(){return e.addProjection(t)},text:t})})))))})),dn=n(75),pn=n(58),mn=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(G.h,{inline:!0,label:"Label Size (px)"},i.a.createElement(G.s,{allowNumericCharactersOnly:!0,fill:!1,min:0,minorStepSize:null,onValueChange:function(t,n){return e.onChangeSize(n)},placeholder:"Inheret",value:e.size})),i.a.createElement(G.h,{inline:!0,label:"Label Color"},e.color&&i.a.createElement(G.a,{icon:"small-cross",onClick:function(){return e.onChangeColor(null)},minimal:!0}),i.a.createElement(G.t,{hasBackdrop:!0,usePortal:!0,modifiers:qt,position:cn.a.LEFT},i.a.createElement(G.a,{style:{backgroundColor:Jt(e.color),color:Xt(e.color)},text:e.color||"Inheret",minimal:!0}),i.a.createElement(pn.TwitterPicker,{color:Jt(e.color),colors:$t,onChange:function(t){return e.onChangeColor(t.hex)},triangle:"hide"}))))};function hn(e,t,n){if(null===e)return{id:"error",label:"No Instance",icon:"error"};return function e(a){var l=a.children.map(e);return{id:a.id,label:a.label?a.label:a.id,icon:a.icon,isExpanded:!t.get(a.id),isSelected:a.id===n,hasCaret:!!l.length,childNodes:l}}(e)}var gn=function(e){var t=e.stroke;return i.a.createElement(i.a.Fragment,null,i.a.createElement(G.h,{inline:!0,label:"Stroke"},e.stroke&&i.a.createElement(G.a,{icon:"small-cross",onClick:function(){return e.onChangeStroke(null)},minimal:!0}),i.a.createElement(G.t,{hasBackdrop:!0,usePortal:!0,modifiers:qt,position:cn.a.LEFT},i.a.createElement(G.a,{style:{backgroundColor:Jt(t),color:Xt(t)},text:t||"Inheret",minimal:!0}),i.a.createElement(pn.TwitterPicker,{color:Jt(t),colors:$t,onChange:function(t){return e.onChangeStroke(t.hex)},triangle:"hide"}))),i.a.createElement(G.h,{inline:!0,label:"Stroke Width"},i.a.createElement(G.s,{allowNumericCharactersOnly:!0,fill:!1,min:0,onValueChange:function(t,n){return e.onChangeStrokeWidth(n)},placeholder:"Inheret",value:e.strokeWidth})))},fn={clearAll:Q,clearCurrent:Y,collapseTreeNode:Z,expandTreeNode:ee,selectTreeNode:te,setLabelColor:ae,setLabelSize:le,setStroke:ie,setStrokeWidth:re,toggleAsAttribute:z,toggleCollapseEdgeStyle:oe,toggleHideEmptyFields:se},bn=Object(c.b)((function(e){return Object(Nt.a)({},e.graphSlice.edgeStylingSlice,{asAttribute:e.graphSlice.dataSlice.asAttribute})}),fn)((function(e){var t=e.selected,n=t&&e.linkStyles.get(t)||{},a=!!t&&e.asAttribute.get(t),l=n?n.stroke:void 0,r=n?n.strokeWidth:void 0,o=t&&e.labelStyles.get(t)||{},c=o?o.color:void 0,s=o?o.font:void 0,u=s?s.match(/(\d*)px/):[],d=u&&u.length>1?parseInt(u[1]):void 0,p=hn(e.treeField,e.collapsed,t),m=hn(e.treeSkolem,e.collapsed,t),h="error"===p.id&&"error"===m.id,g=m.childNodes&&m.childNodes.length,f=h||!g?[p]:[p,m],b=e.hideEmptyFields;return p.secondaryLabel=i.a.createElement(G.C,{content:b?"Show Empty Fields":"Hide Empty Fields"},i.a.createElement(G.a,{icon:b?"eye-off":"eye-open",minimal:!0,onClick:e.toggleHideEmptyFields})),i.a.createElement(i.a.Fragment,null,i.a.createElement(Pt.Section,{collapsed:e.collapseEdgeStyle,onToggle:e.toggleCollapseEdgeStyle,title:"Edge Styling"},i.a.createElement(G.D,{contents:f,onNodeClick:function(t){return e.selectTreeNode(t.id.toString())},onNodeCollapse:function(t){return e.collapseTreeNode(t.id.toString())},onNodeExpand:function(t){return e.expandTreeNode(t.id.toString())}}),i.a.createElement(G.g,null),t?i.a.createElement(i.a.Fragment,null,i.a.createElement(G.h,null,i.a.createElement(G.y,{alignIndicator:dn.a.RIGHT,checked:a,label:"Show as Attribute",onChange:function(){return e.toggleAsAttribute(t)}})),i.a.createElement(gn,{stroke:l,strokeWidth:r,onChangeStroke:e.setStroke,onChangeStrokeWidth:e.setStrokeWidth}),i.a.createElement(mn,{color:c,size:d,onChangeColor:e.setLabelColor,onChangeSize:e.setLabelSize}),i.a.createElement(G.b,{fill:!0,minimal:!0},i.a.createElement(G.a,{icon:"clean",onClick:e.clearCurrent,text:"Clear Selected"}),i.a.createElement(G.a,{icon:"clean",onClick:e.clearAll,text:"Clear All"}))):i.a.createElement(G.r,{title:"Edge Styling",description:"Select a field or skolem from the tree",icon:"style"})))})),vn={toggleAxesVisible:ge,toggleCollapseGraphSettings:be,toggleGridVisible:ve},Sn=Object(c.b)((function(e){return Object(Nt.a)({},e.graphSlice.graphSettingsSlice)}),vn)((function(e){return i.a.createElement(Pt.Section,{collapsed:e.collapseGraphSettings,onToggle:e.toggleCollapseGraphSettings,title:"Graph Settings"},i.a.createElement(G.y,{alignIndicator:dn.a.RIGHT,checked:e.axesVisible,label:"Display Axes",onChange:e.toggleAxesVisible}),i.a.createElement(G.y,{alignIndicator:dn.a.RIGHT,checked:e.gridVisible,label:"Display Grid",onChange:e.toggleGridVisible}))})),yn=Object(c.b)((function(e){return{graph:e.graphSlice.graphSlice.graph,instance:e.sterlingSlice.instance}}))((function(e){return i.a.createElement(Pt.Section,{title:"Quick Layout"},i.a.createElement(G.b,{minimal:!0},i.a.createElement(G.C,{content:"Circle Layout"},i.a.createElement(G.a,{icon:"layout-circle",onClick:function(){e.graph&&((new S.a).apply(e.graph),e.graph.update())}})),i.a.createElement(G.C,{content:"Grid Layout"},i.a.createElement(G.a,{icon:"layout-grid",onClick:function(){e.graph&&((new S.d).apply(e.graph),e.graph.update())}})),i.a.createElement(G.C,{content:"Grouped Row Layout"},i.a.createElement(G.a,{icon:"layout-linear",onClick:function(){if(e.graph&&e.instance){var t=new S.e,n=e.instance.signatures().find((function(e){return"univ"===e.id()}));n&&t.groups(n.subTypes().map((function(e){return e.atoms(!0).map((function(e){return e.name()}))}))),t.apply(e.graph),e.graph.update()}}})),i.a.createElement(G.C,{content:"Layered Layout"},i.a.createElement(G.a,{icon:"layout-hierarchy",onClick:function(){e.graph&&((new S.b).apply(e.graph),e.graph.update())}}))))})),En=function(e){var t=e.style.radius;return i.a.createElement(G.h,{inline:!0,label:"Radius"},i.a.createElement(G.s,{allowNumericCharactersOnly:!0,fill:!1,min:0,onValueChange:function(t,n){return e.onSetRadius(n)},placeholder:"Inheret",value:t||void 0}))},kn=function(e){var t=e.style.width,n=e.style.height;return i.a.createElement(i.a.Fragment,null,i.a.createElement(G.h,{inline:!0,label:"Width"},i.a.createElement(G.s,{allowNumericCharactersOnly:!0,fill:!1,min:0,onValueChange:function(t,n){return e.onSetWidth(n)},placeholder:"Inheret",value:t||void 0})),i.a.createElement(G.h,{inline:!0,label:"Height"},i.a.createElement(G.s,{allowNumericCharactersOnly:!0,min:0,onValueChange:function(t,n){return e.onSetHeight(n)},placeholder:"Inheret",value:n||void 0})))};var jn=function(e){var t=e.shape,n=t&&t.type||"inheret";return i.a.createElement(i.a.Fragment,null,i.a.createElement(G.h,{inline:!0,label:"Shape"},i.a.createElement(G.i,{minimal:!0,options:[{value:"inheret",label:"Inheret"},{value:"circle",label:"Circle"},{value:"rectangle",label:"Rectangle"}],value:n,onChange:function(t){var n=t.target.value;e.onSetShape(function(e){return"circle"===e||"rectangle"===e?e:null}(n))}})),"circle"===n?i.a.createElement(En,{style:t,onSetRadius:e.onSetRadius}):"rectangle"===n?i.a.createElement(kn,{style:t,onSetWidth:e.onSetWidth,onSetHeight:e.onSetHeight}):null)},Cn=function(e){var t=e.fill,n=e.stroke;return i.a.createElement(i.a.Fragment,null,i.a.createElement(G.h,{inline:!0,label:"Fill"},t&&i.a.createElement(G.a,{icon:"small-cross",onClick:function(){return e.onChangeFill(null)},minimal:!0}),i.a.createElement(G.t,{hasBackdrop:!0,usePortal:!0,modifiers:qt,position:cn.a.LEFT},i.a.createElement(G.a,{style:{backgroundColor:Jt(t),color:Xt(t)},text:t||"Inheret",minimal:!0}),i.a.createElement(pn.TwitterPicker,{color:Jt(t),colors:$t,onChange:function(t){return e.onChangeFill(t.hex)},triangle:"hide"}))),i.a.createElement(G.h,{inline:!0,label:"Stroke"},n&&i.a.createElement(G.a,{icon:"small-cross",onClick:function(){return e.onChangeStroke(null)},minimal:!0}),i.a.createElement(G.t,{hasBackdrop:!0,usePortal:!0,modifiers:qt,position:cn.a.LEFT},i.a.createElement(G.a,{style:{backgroundColor:Jt(n),color:Xt(n)},text:n||"Inheret",minimal:!0}),i.a.createElement(pn.TwitterPicker,{color:Jt(n),colors:$t,onChange:function(t){return e.onChangeStroke(t.hex)},triangle:"hide"}))),i.a.createElement(G.h,{inline:!0,label:"Stroke Width"},i.a.createElement(G.s,{allowNumericCharactersOnly:!0,fill:!1,min:-1,onValueChange:function(t,n){return e.onChangeStrokeWidth(n)},placeholder:"Inheret",value:e.strokeWidth})))},_n={clearAll:Pe,clearCurrent:Me,collapseTreeNode:ze,expandTreeNode:Be,selectTreeNode:He,setFill:Ge,setHeight:We,setLabelColor:qe,setLabelSize:Ue,setRadius:$e,setShape:Je,setStroke:Ke,setStrokeWidth:Xe,setWidth:Qe,toggleCollapseNodeStyle:Ye,toggleHideDisconnected:Ze,toggleHideEmptySets:et},On=Object(c.b)((function(e){return Object(Nt.a)({},e.graphSlice.nodeStylingSlice)}),_n)((function(e){var t=e.selected,n=!!e.selected&&e.hideDisconnected.get(e.selected),a=t&&e.shapes.get(t)||{},l=a?a.fill:void 0,r=a?a.stroke:void 0,o=a?a.strokeWidth:void 0,c=t&&e.labels.get(t)||{},s=c?c.color:void 0,u=c?c.font:void 0,d=u?u.match(/(\d*)px/):[],p=d&&d.length>1?parseInt(d[1]):void 0,m=hn(e.nodeTree,e.collapsed,t),h=e.hideEmptySets;return m.secondaryLabel=i.a.createElement(G.C,{content:h?"Show Empty Sets":"Hide Empty Sets"},i.a.createElement(G.a,{icon:h?"eye-off":"eye-open",minimal:!0,onClick:e.toggleHideEmptySets})),i.a.createElement(Pt.Section,{collapsed:e.collapseNodeStyle,onToggle:e.toggleCollapseNodeStyle,title:"Node Styling"},i.a.createElement(G.D,{contents:[m],onNodeClick:function(t){return e.selectTreeNode(t.id.toString())},onNodeCollapse:function(t){return e.collapseTreeNode(t.id.toString())},onNodeExpand:function(t){return e.expandTreeNode(t.id.toString())}}),i.a.createElement(G.g,null),t?i.a.createElement(i.a.Fragment,null,i.a.createElement(G.h,{contentClassName:"fill",inline:!0},i.a.createElement(G.y,{alignIndicator:dn.a.RIGHT,checked:n,onChange:e.toggleHideDisconnected,label:"Hide Disconnected Nodes"})),i.a.createElement(jn,{shape:a,onSetHeight:e.setHeight,onSetRadius:e.setRadius,onSetShape:e.setShape,onSetWidth:e.setWidth}),i.a.createElement(Cn,{fill:l,stroke:r,strokeWidth:o,onChangeFill:e.setFill,onChangeStroke:e.setStroke,onChangeStrokeWidth:e.setStrokeWidth}),i.a.createElement(mn,{color:s,size:p,onChangeColor:e.setLabelColor,onChangeSize:e.setLabelSize}),i.a.createElement(G.b,{fill:!0,minimal:!0},i.a.createElement(G.a,{icon:"clean",onClick:e.clearCurrent,text:"Clear Selected"}),i.a.createElement(G.a,{icon:"clean",onClick:e.clearAll,text:"Clear All"}))):i.a.createElement(G.r,{title:"Node Styling",description:"Select a type or set from the tree",icon:"style"}))})),wn=Object(c.b)((function(e){return{view:e.sterlingSlice.graphView}}))((function(e){return"node"===e.view?i.a.createElement(i.a.Fragment,null,i.a.createElement(un,null),i.a.createElement(On,null)):"edge"===e.view?i.a.createElement(i.a.Fragment,null,i.a.createElement(Yt,null),i.a.createElement(bn,null)):"layout"===e.view?i.a.createElement(i.a.Fragment,null,i.a.createElement(yn,null),i.a.createElement(on,null)):"settings"===e.view?i.a.createElement(i.a.Fragment,null,i.a.createElement(Sn,null),i.a.createElement(tn,null)):null})),Tn=n(35);var xn=[],Nn=[{nodes:[],shape:{type:"circle"}}];var Ln=Object(c.b)((function(e){return{asAttribute:e.graphSlice.dataSlice.asAttribute,bundleFactor:e.graphSlice.graphSettingsSlice.bundleFactor,description:e.sterlingSlice.welcomeDescription,edgeLabelPlacement:e.graphSlice.graphSettingsSlice.edgeLabelPlacement,edgeLabels:e.graphSlice.edgeStylingSlice.labelStyles,graph:e.graphSlice.graphSlice.graph,hideDisconnected:e.graphSlice.nodeStylingSlice.hideDisconnected,instance:e.sterlingSlice.instance,links:e.graphSlice.edgeStylingSlice.linkStyles,nodeLabels:e.graphSlice.nodeStylingSlice.labels,projections:e.graphSlice.dataSlice.projections,shapes:e.graphSlice.nodeStylingSlice.shapes,settings:e.graphSlice.graphSettingsSlice,title:e.sterlingSlice.welcomeTitle}}))(function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e)))._ref=void 0,n._ref=i.a.createRef(),n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this._ref.current,t=this.props,n=t.graph,a=t.instance;a&&this._update(n,a),e&&this.props.graph.canvas(e),n.update()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.graph,a=t.instance;(a&&this._update(n,a),!e.instance||a&&!function(e,t){var n=new Set;e.atoms().forEach((function(e){e.type().isBuiltin()||n.add(e.id())}));for(var a=t.atoms(),l=0;l<a.length;++l){var i=a[l];if(!i.type().isBuiltin()&&n.has(i.id()))return!0}return!1}(e.instance,a))&&(new S.b).apply(n,{nodesep:100,rankdir:"BT",ranksep:150});n.update()}},{key:"render",value:function(){var e=this.props;return this.props.instance?i.a.createElement("canvas",{className:"graph",ref:this._ref}):i.a.createElement(G.r,{title:e.title,description:e.description,icon:"graph"})}},{key:"_buildEdgeStyles",value:function(){var e=this.props.instance,t=this.props.links,n=this.props.edgeLabels;if(!e)return xn;var a=e.fields(),l=e.skolems().filter((function(e){return e.arity()>1})),i=function(e){var a=e.id();return{groups:[a],link:t.get(a),label:n.get(a)}};return[{groups:[],link:t.get("Fields"),label:n.get("Fields"),children:a.map(i)},{groups:[],link:t.get("Skolems"),label:n.get("Skolems"),children:l.map(i)}]}},{key:"_buildNodeStyles",value:function(){var e=this.props.instance,t=this.props.shapes,n=this.props.nodeLabels;if(!e)return Nn;var a=e.signatures().find((function(e){return"univ"===e.id()}));if(!a)return Nn;var l=function e(a){var l=a.subTypes().map(e),i=t.get(a.id()),r=n.get(a.id());return{nodes:a.atoms().map((function(e){return e.name()})),shape:i?Object(S.h)(i):void 0,label:r?Object(S.f)(r):void 0,children:l}}(a);return l.shape||(l.shape={}),l.shape.type||(l.shape.type="rectangle"),[l]}},{key:"_update",value:function(e,t){var n=this.props,a=n.settings;if(t){var l=function(e,t,n,a,l){var i=Object(k.b)(e.signatures().map((function(t){var a,l=t.id();return n.has(l)?[t,(a=n.get(l),e.atoms().find((function(e){return e.name()===a})))]:[t,void 0]}))),r=Object(k.b)(e.fields().map((function(e){return[e,e.tuples().map(v).filter(Tn.isDefined).filter(f)]}))).filter((function(e){return e.length>0})),o=Object(k.b)(e.skolems().map((function(e){return[e,e.tuples().map(v).filter(Tn.isDefined).filter(f)]}))).filter((function(e){return e.length>0})),c=r.filter((function(e,t){return!b(t)&&e[0].arity()>1})),s=r.filter((function(e,t){return b(t)||1===e[0].arity()})),u=o.filter((function(e){return e[0].arity()>1})),d=o.filter((function(e){return 1===e[0].arity()})),p=[],m=Object(k.c)().withMutations((function(e){function t(t,n){var a=n.atoms(),l=a[0],i=a[a.length-1],r=a.slice(1,a.length-1),o=t.name()+(r.length?" [".concat(r.join(", "),"]"):"");e.add(l),e.add(i),p.push({source:l.name(),target:i.name(),group:t.id(),label:o})}c.forEach((function(e,n){e.forEach((function(e){return t(n,e)}))})),u.forEach((function(e,n){e.forEach((function(e){return t(n,e)}))}))})),g=Object(k.b)().withMutations((function(e){function t(t,n){Object(k.b)().withMutations((function(e){t.forEach((function(t){var n=t.atoms(),a=n[0],l=n.slice(1).map((function(e){return e.name()})).join("->");e.has(a)||e.set(a,[]),l.length&&e.get(a).push(l)}))})).forEach((function(t,a){var l="field"===n.expressionType()&&!b(n),i=t.length?": ".concat(t.join(", ")):"",r="".concat(n.name()).concat(i);e.has(a)||e.set(a,[]),e.get(a).push(l?"(".concat(r,")"):r)}))}s.forEach(t),d.forEach(t)}));return[e.atoms().map((function(e){var n=e.type();if(m.has(e)||!l.get(n.id())){var a=t.find((function(t){return t.id===e.name()}))||{id:e.name(),x:0,y:0};return a.labels=g.get(e),a}})).filter(Tn.isDefined),p];function f(e){return e.arity()>0}function b(e){return!!a.get(e.id())}function v(e){var t=e.types().map(S).map((function(e){return i.get(e)}));if(!t.some(Tn.isDefined))return e;var n=e.atoms();return n.every((function(e,n){return void 0===t[n]||t[n]===e}))?new h.b(e.id(),n.filter((function(e,n){return void 0===t[n]}))):void 0}function S(e){return e.typeHierarchy()[1]}}(t,e.nodes(),n.projections,n.asAttribute,n.hideDisconnected),i=Object(Vt.a)(l,2),r=i[0],o=i[1];e.nodes(r),e.edges(o),e.bundleFactor(n.bundleFactor),e.edgeLabelPlacement(n.edgeLabelPlacement),e.nodeStyles(this._buildNodeStyles()),e.edgeStyles(this._buildEdgeStyles())}else e.nodes([]),e.edges([]);e.axesVisible(a.axesVisible),e.gridVisible(a.gridVisible);var c=this._ref.current;c&&this.props.graph.canvas(c)}}]),t}(i.a.Component)),Fn={setSelected:rt},Dn=Object(c.b)((function(e){return{instance:e.sterlingSlice.instance,selected:e.sourceSlice.selected}}),Fn),Rn=function(e){return i.a.createElement(G.r,{title:"No Files",icon:"document"})},An=Dn((function(e){var t=e.instance;return i.a.createElement(Pt.Section,{title:"Model Sources"},t?i.a.createElement(G.b,{alignText:dn.a.LEFT,minimal:!0,vertical:!0}," ",t.sources().map((function(t){return i.a.createElement(G.a,{active:e.selected===t,icon:"document",key:t.filename(),onClick:function(){return e.setSelected(t)},text:t.filename().split(/(\\|\/)/g).pop()})}))):i.a.createElement(Rn,e))})),Vn=n(720),In=n(717),Pn=n(100),Mn=In.a;Vn.a.registerLanguage("alloy",(function(){return{case_insensitive:!1,keywords:"abstract all and as assert but check disj else exactly extends fact for fun iden iff implies in Int let lone module no none not one open or pred run set sig some sum univ",contains:[Object(Pn.COMMENT)("//","$",{}),Object(Pn.COMMENT)("--","$",{}),Object(Pn.COMMENT)("/\\*","\\*/",{}),{className:"number",begin:"\\b\\d+",relevance:0}]}}));var zn=Object(c.b)((function(e){return{instance:e.sterlingSlice.instance,selected:e.sourceSlice.selected,welcome:e.sterlingSlice.welcomeTitle,welcomeDescription:e.sterlingSlice.welcomeDescription}}))((function(e){return e.instance?e.selected?i.a.createElement(Vn.a,{className:"source",language:"alloy",showLineNumbers:!0,style:Mn},e.selected.source()):i.a.createElement(G.r,{description:"Choose a File",icon:"document",title:e.welcome}):i.a.createElement(G.r,{description:e.welcomeDescription,icon:"document",title:e.welcome})})),Bn=n(719).a.ofType();function Hn(e,t){var n=0,a=t.split(/\s+/).filter((function(e){return e.length>0})).map(Gn);if(0===a.length)return[e];for(var i=new RegExp(a.join("|"),"gi"),r=[];;){var o=i.exec(e);if(!o)break;var c=o[0].length,s=e.slice(n,i.lastIndex-c);s.length>0&&r.push(s),n=i.lastIndex,r.push(l.createElement("strong",{key:n},o[0]))}var u=e.slice(n);return u.length>0&&r.push(u),r}function Gn(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}var Wn=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i))))._filterItem=function(e,t){return("field"===t.expressionType()?n.props.nameFunction(t).split("<:")[1]:n.props.nameFunction(t)).toLowerCase().indexOf(e.toLowerCase())>=0},n._isItemSelected=function(e){return n.props.itemsSelected.includes(e)},n._onRemoveTag=function(e,t){n.props.onDeselectItem(n.props.itemsSelected[t])},n._onSelectItem=function(e){n._isItemSelected(e)?n.props.onDeselectItem(e):n.props.onSelectItem(e)},n._renderItem=function(e,t){if(!t.modifiers.matchesPredicate)return null;switch(e.expressionType()){case"signature":return n._renderSignature(e,t);case"field":return n._renderField(e,t);case"skolem":return n._renderSkolem(e,t);default:return null}},n._renderList=function(e){var t=e.items.filter((function(e){return"signature"===e.expressionType()})),a=e.items.filter((function(e){return"field"===e.expressionType()})),i=e.items.filter((function(e){return"skolem"===e.expressionType()})),r=h.d.alphabeticalSort(n.props.nameFunction);t.sort(r).sort(h.d.builtinSort()),a.sort(r),i.sort(r);var o=t.map(e.renderItem).filter((function(e){return null!=e})),c=a.map(e.renderItem).filter((function(e){return null!=e})),s=i.map(e.renderItem).filter((function(e){return null!=e}));return l.createElement(G.l,{ulRef:e.itemsParentRef},l.createElement(G.m,{title:"Signatures"}),o.length?o:l.createElement(G.n,{disabled:!0,text:"None"}),l.createElement(G.m,{title:"Fields"}),c.length?c:l.createElement(G.n,{disabled:!0,text:"None"}),l.createElement(G.m,{title:"Skolems"}),s.length?s:l.createElement(G.n,{disabled:!0,text:"None"}))},n._renderSignature=function(e,t){var a=n._isItemSelected(e);return l.createElement(G.n,{active:t.modifiers.active,disabled:t.modifiers.disabled,key:e.id(),labelElement:Hn(n.props.nameFunction(e),t.query),icon:a?"tick":"blank",onClick:t.handleClick})},n._renderField=function(e,t){var a=n.props.nameFunction(e).split("<:"),i=n._isItemSelected(e);return l.createElement(G.n,{active:t.modifiers.active,disabled:t.modifiers.disabled,key:e.id(),icon:l.createElement(l.Fragment,null,i&&l.createElement(G.k,{icon:"tick"}),l.createElement(W,{signature:a[0]})),labelElement:Hn(a[1],t.query),onClick:t.handleClick})},n._renderSkolem=function(e,t){var a=n._isItemSelected(e);return l.createElement(G.n,{active:t.modifiers.active,disabled:t.modifiers.disabled,icon:a?"tick":"blank",key:e.id(),labelElement:Hn(e.name(),t.query),onClick:t.handleClick})},n._renderTag=function(e){var t=n.props.nameFunction(e);return"field"===e.expressionType()?q.FieldTagEls(t.split("<:")):t},n._tagProps=function(e,t){var a=n.props.itemsSelected[t].expressionType();return{className:"signature"===a?"sig-tag":"field"===a?"field-tag":"skolem"===a?"skolem-tag":""}},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=this.props.itemsSelected.length?l.createElement(G.a,{icon:"cross",minimal:!0,onClick:this.props.onClearSelectedItems}):void 0;return l.createElement(Bn,{fill:!0,items:function(t){var n=t.filter((function(e){return"signature"===e.expressionType()})),a=t.filter((function(e){return"field"===e.expressionType()})),l=t.filter((function(e){return"skolem"===e.expressionType()})),i=h.d.alphabeticalSort(e.props.nameFunction);return n.sort(i).sort(h.d.builtinSort()),a.sort(i),l.sort(i),[].concat(Object(E.a)(n),Object(E.a)(a),Object(E.a)(l))}(t.items),itemPredicate:this._filterItem,itemRenderer:this._renderItem,itemListRenderer:this._renderList,onItemSelect:this._onSelectItem,popoverProps:{usePortal:!1},placeholder:"Choose Tables...",resetOnSelect:!0,scrollToActiveItem:!0,selectedItems:this.props.itemsSelected,tagInputProps:{onRemove:this._onRemoveTag,rightElement:n,tagProps:this._tagProps},tagRenderer:this._renderTag})}}]),t}(l.Component),qn={clearSelectedData:ht,deselectData:gt,selectData:ft,setAlignment:bt,setLayoutDirection:vt,setSort:St,setTableTypes:yt,toggleCollapseData:Et,toggleCollapseLayout:kt,toggleCollapseTables:jt,toggleHighlightSkolems:Ct,toggleRemoveBuiltin:_t,toggleRemoveEmpty:Ot,toggleRemoveThis:wt},Un=Object(c.b)((function(e){return Object(Nt.a)({},e.tableSlice)}),qn)((function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Pt.Section,{collapsed:e.collapseTables,onToggle:e.toggleCollapseTables,style:{zIndex:1},title:"Tables"},i.a.createElement(G.w,{onChange:function(t){return e.setTableTypes(parseInt(t.currentTarget.value))},selectedValue:e.tablesType},i.a.createElement(G.v,{label:"All Tables",value:Re.All}),i.a.createElement(G.v,{label:"Signatures",value:Re.Signatures}),i.a.createElement(G.v,{label:"Fields",value:Re.Fields}),i.a.createElement(G.v,{label:"Skolems",disabled:e.highlightSkolems,value:Re.Skolems}),i.a.createElement(G.v,{label:"Choose Tables",value:Re.Select}),i.a.createElement(Wn,{items:e.data,itemsSelected:e.dataSelected,onClearSelectedItems:e.clearSelectedData,onDeselectItem:e.deselectData,onSelectItem:e.selectData,nameFunction:st(e.removeThis)}))),i.a.createElement(Pt.Section,{collapsed:e.collapseData,onToggle:e.toggleCollapseData,title:"Data Options"},i.a.createElement(G.y,{alignIndicator:dn.a.LEFT,checked:e.removeBuiltin,disabled:e.tablesType===Re.Select,label:"Hide Built-in Signatures",onChange:e.toggleRemoveBuiltin}),i.a.createElement(G.y,{alignIndicator:dn.a.LEFT,checked:e.removeEmpty,disabled:e.tablesType===Re.Select,label:"Hide Empty Tables",onChange:e.toggleRemoveEmpty}),i.a.createElement(G.y,{alignIndicator:dn.a.LEFT,checked:e.removeThis,label:'Remove "this" from Signature names',onChange:e.toggleRemoveThis}),i.a.createElement(G.y,{alignIndicator:dn.a.LEFT,checked:e.highlightSkolems,label:"Display Skolems as highlighted rows",onChange:e.toggleHighlightSkolems})),i.a.createElement(Pt.Section,{collapsed:e.collapseLayout,onToggle:e.toggleCollapseLayout,title:"Layout Options"},i.a.createElement(G.h,{inline:!0,label:"Layout Direction"},i.a.createElement(G.b,null,i.a.createElement(G.a,{active:e.layoutDirection===Le.Row,icon:"vertical-distribution",onClick:function(){return e.setLayoutDirection(Le.Row)}}),i.a.createElement(G.a,{active:e.layoutDirection===Le.Column,icon:"horizontal-distribution",onClick:function(){return e.setLayoutDirection(Le.Column)}}))),i.a.createElement(G.h,{inline:!0,label:"Align"},i.a.createElement(G.b,null,i.a.createElement(G.a,{active:e.alignment===Ne.Left,icon:"align-left",onClick:function(){return e.setAlignment(Ne.Left)}}),i.a.createElement(G.a,{active:e.alignment===Ne.Center,icon:"align-center",onClick:function(){return e.setAlignment(Ne.Center)}}),i.a.createElement(G.a,{active:e.alignment===Ne.Right,icon:"align-right",onClick:function(){return e.setAlignment(Ne.Right)}}))),i.a.createElement(G.h,{inline:!0,label:"Sort"},i.a.createElement(G.b,null,i.a.createElement(G.a,{icon:"group-objects",onClick:function(){e.setSort({method:De.Group,direction:Fe.Ascending})}}),i.a.createElement(G.a,{icon:"sort-alphabetical",onClick:function(){e.setSort({method:De.Alphabetical,direction:Fe.Ascending})}}),i.a.createElement(G.a,{icon:"sort-alphabetical-desc",onClick:function(){e.setSort({method:De.Alphabetical,direction:Fe.Descending})}}),i.a.createElement(G.a,{icon:"sort-numerical",onClick:function(){e.setSort({method:De.Size,direction:Fe.Ascending})}}),i.a.createElement(G.a,{icon:"sort-numerical-desc",onClick:function(){e.setSort({method:De.Size,direction:Fe.Descending})}})))))})),$n=n(98),Jn=n(710),Kn=n(711),Xn=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={enabled:!1},n._buildShadowStyle=function(e,t){return e.map((function(e,n){return"0 0 0 ".concat((n+1)*t,"px ").concat(e)})).join(",")},n._onMouseEnter=function(){n.setState({enabled:!0})},n._onMouseLeave=function(){n.setState({enabled:!1})},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.colors,n=this.state.enabled?4:2;return i.a.createElement($n.c,null,i.a.createElement(Jn.a,null,(function(a){var l=a.ref;return i.a.createElement("tr",{onMouseEnter:e._onMouseEnter,onMouseLeave:e._onMouseLeave,ref:l,style:{boxShadow:e._buildShadowStyle(t,n)}},e.props.children)})),i.a.createElement(G.u,null,i.a.createElement(Kn.a,{modifiers:{},placement:"right"},(function(a){var l=a.ref,r=a.style,o=a.placement;return e.state.enabled&&i.a.createElement("div",{ref:l,style:Object(Nt.a)({},r,{padding:n*(t.length-1)+"px"}),"data-placement":o},i.a.createElement("div",{className:"table-rowpop"},e.props.content))}))))}}]),t}(i.a.Component);function Qn(e,t){return i.a.createElement(i.a.Fragment,null,e.map((function(e,n){return i.a.createElement("div",{key:e.id(),style:{backgroundColor:t[n]}},e.name())})))}var Yn=Object(c.b)((function(e){return Object(Nt.a)({},e.tableSlice,{description:e.sterlingSlice.welcomeDescription,instance:e.sterlingSlice.instance,title:e.sterlingSlice.welcomeTitle})}))((function(e){if(!e.instance)return i.a.createElement(G.r,{title:e.title,description:e.description,icon:"th"});var t=function(e){return e===Ne.Left?"left":e===Ne.Center?"center":e===Ne.Right?"right":""}(e.alignment),n=function(e){return e===Le.Row?"row":e===Le.Column?"column":""}(e.layoutDirection),a=st(e.removeThis),l=ut(e.primarySort,a),r=ut(e.secondarySort,a),o=e.tablesType,c=o===Re.All?e.data:o===Re.Signatures?e.data.filter(h.c.keepSignatures):o===Re.Fields?e.data.filter(h.c.keepFields):o===Re.Skolems?e.data.filter(h.c.keepSkolems):o===Re.Select?e.dataSelected.slice():[],s=function(){return!0};return c=(c=o===Re.Select?c:c.filter(e.removeBuiltin?h.c.removeBuiltins:s).filter(e.removeEmpty?h.c.removeEmptys:s).filter(e.highlightSkolems?h.c.removeSkolems:s)).sort(r).sort(l),i.a.createElement("div",{className:"tables ".concat(t," ").concat(n)},c.map((function(t){return i.a.createElement(G.d,{key:t.id(),elevation:1},function(e,t){if("signature"===e.expressionType())return i.a.createElement(W,{fill:!0,signature:e,nameFunction:t});if("field"===e.expressionType())return i.a.createElement(q,{fill:!0,field:e,nameFunction:t});if("skolem"===e.expressionType())return i.a.createElement(U,{fill:!0,skolem:e,nameFunction:t});return null}(t,a),"signature"===t.expressionType()?function(e){var t=e.signature.atoms();return i.a.createElement(G.j,{bordered:!0,condensed:!0,striped:!0},i.a.createElement("tbody",null,t.map((function(t){var n=t.skolems();if(e.highlightSkolems&&n.length){var a=n.map((function(t){return e.skolemColors.get(t)||""}));return i.a.createElement(Xn,{key:t.id(),content:Qn(n,a),colors:a},i.a.createElement("td",null,t.name()))}return i.a.createElement("tr",{key:t.id()},i.a.createElement("td",null,t.name()))}))))}({highlightSkolems:e.highlightSkolems,signature:t,skolemColors:e.skolemColors}):"field"===t.expressionType()?function(e){var t=e.field.types(),n=e.field.tuples();return i.a.createElement(G.j,{bordered:!0,condensed:!0,striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,t.map((function(t,n){return i.a.createElement("th",{key:t.id()+n},e.nameFunction(t))})))),i.a.createElement("tbody",null,n.map((function(t){var n=t.skolems();if(e.highlightSkolems&&n.length){var a=n.map((function(t){return e.skolemColors.get(t)||""}));return i.a.createElement(Xn,{key:t.id(),content:Qn(n,a),colors:a},t.atoms().map((function(e,n){return i.a.createElement("td",{key:t.id()+"["+n+"]"},e.name())})))}return i.a.createElement("tr",{key:t.id()},t.atoms().map((function(e,n){return i.a.createElement("td",{key:t.id()+"["+n+"]"},e.name())})))}))))}({field:t,highlightSkolems:e.highlightSkolems,nameFunction:a,skolemColors:e.skolemColors}):"skolem"===t.expressionType()?function(e){var t=e.skolem.types(),n=e.skolem.tuples();return i.a.createElement(G.j,{bordered:!0,condensed:!0,striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,t.map((function(t,n){return i.a.createElement("th",{key:t.id()+n},e.nameFunction(t))})))),i.a.createElement("tbody",null,n.map((function(e){return i.a.createElement("tr",{key:e.id()},e.atoms().map((function(t,n){return i.a.createElement("td",{key:e.id()+"["+n+"]"},t.name())})))}))))}({nameFunction:a,skolem:t}):null)})))})),Zn=n(1),ea={setMainView:w},ta=Object(c.b)((function(e){return{view:e.sterlingSlice.mainView}}),ea)(function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e)))._requestNext=function(){n.props.connection.requestNextInstance()},n.state={command:"",connected:!1,ready:!1},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.connection.addEventListener("connect",(function(){e.setState({connected:!0})})).addEventListener("disconnect",(function(){e.setState({connected:!1,ready:!1})})).addEventListener("instance",(function(t){console.log("instance"),e.setState({command:t.instance.command(),ready:e.state.connected})}))}},{key:"render",value:function(){var e=this.props,t=this.state;return i.a.createElement(G.o,{fixedToTop:!0,className:"nav bp3-dark"},i.a.createElement(G.o.Group,null,i.a.createElement(G.q,{className:"nav-heading"},"Sterling"),i.a.createElement(G.p,null),i.a.createElement(G.a,{active:"graph"===e.view,className:Zn.a.MINIMAL,icon:"graph",large:!0,text:"Graph",onClick:function(){return e.setMainView("graph")}}),i.a.createElement(G.a,{active:"table"===e.view,className:Zn.a.MINIMAL,icon:"th",large:!0,text:"Table",onClick:function(){return e.setMainView("table")}}),i.a.createElement(G.a,{active:"source"===e.view,className:Zn.a.MINIMAL,icon:"document",large:!0,text:"Source",onClick:function(){return e.setMainView("source")}}),i.a.createElement(G.p,null)),i.a.createElement(G.o.Group,null,t.command.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement(G.z,{minimal:!0},t.command),i.a.createElement(G.p,null)),i.a.createElement(G.a,{disabled:!t.ready,intent:t.connected?"success":"danger",large:!0,onClick:this._requestNext,rightIcon:"circle-arrow-right",text:"Next"})))}}]),t}(i.a.Component)),na={setGraphView:_,setMainView:w,setSourceView:T,setTableView:x},aa=Object(c.b)((function(e){return Object(Nt.a)({},e.sterlingSlice)}),na),la=function(e){return i.a.createElement(G.C,{content:i.a.createElement("span",null,e.text),hoverOpenDelay:500,intent:Rt.a.PRIMARY,position:cn.a.RIGHT},i.a.createElement(G.a,{icon:e.icon,minimal:!0,large:!0,active:e.active,onClick:e.click}))},ia=function(e){var t=e.graphView;return i.a.createElement(i.a.Fragment,null,i.a.createElement(la,{active:"node"===t,click:function(){return e.setGraphView("node")},icon:"group-objects",text:"Projections and Node Styling"}),i.a.createElement(la,{active:"edge"===t,click:function(){return e.setGraphView("edge")},icon:"flows",text:"Edge Styling"}),i.a.createElement(la,{active:"layout"===t,click:function(){return e.setGraphView("layout")},icon:"layout-auto",text:"Layout"}),i.a.createElement(la,{active:"settings"===t,click:function(){return e.setGraphView("settings")},icon:"settings",text:"Graph Settings"}))},ra=function(e){return i.a.createElement(la,{active:"settings"===e.tableView,click:function(){return e.setTableView("settings")},icon:"settings",text:"Table Settings"})},oa=function(e){return i.a.createElement(la,{active:"files"===e.sourceView,click:function(){return e.setSourceView("files")},icon:"document",text:"Model Sources"})},ca=aa((function(e){var t=e.mainView,n="graph"===t&&"evaluator"===e.graphView||"table"===t&&"evaluator"===e.tableView||"source"===t&&"evaluator"===e.sourceView;return i.a.createElement("div",{className:"sidebar nav bp3-dark"},"graph"===t?i.a.createElement(ia,e):"table"===t?i.a.createElement(ra,e):"source"===t?i.a.createElement(oa,e):null,i.a.createElement("div",{className:"divider"}),i.a.createElement(la,{active:n,click:function(){"graph"===t&&e.setGraphView("evaluator"),"table"===t&&e.setTableView("evaluator"),"source"===t&&e.setSourceView("evaluator")},icon:"console",text:"Evaluator"}))})),sa=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"stage"},this.props.children)}}]),t}(i.a.Component);Lt.a.onlyShowFocusOnTabs();var ua={setInstance:O},da=Object(c.b)((function(e){return Object(Nt.a)({graph:e.graphSlice.graphSlice.graph},e.sterlingSlice)}),ua)(function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e)))._evaluator=void 0,n._evaluatorView=void 0,n._getDrawer=function(){var e=n.props,t=n._evaluatorView,a="graph"===e.mainView&&"evaluator"===e.graphView||"table"===e.mainView&&"evaluator"===e.tableView||"source"===e.mainView&&"evaluator"===e.sourceView;return i.a.createElement(Pt,null,a?i.a.createElement(t,{evaluator:n._evaluator}):"graph"===e.mainView?i.a.createElement(wn,null):"table"===e.mainView?i.a.createElement(Un,null):"source"===e.mainView?i.a.createElement(An,null):null)},n._getStage=function(){var e=n.props.mainView;return i.a.createElement(sa,null,"table"===e?i.a.createElement(Yn,null):"graph"===e?i.a.createElement(Ln,null):"source"===e?i.a.createElement(zn,null):null)},n._initializeConnection=function(){var e=n.props.connection;e.addEventListener("connect",(function(){e.requestCurrentInstance()})),e.addEventListener("instance",(function(e){n.props.setInstance(e.instance)})),e.connect()},n._resize=function(){n.props.graph.resize()},n._evaluator=new Dt(e.connection),n._evaluatorView=At,n.state={instance:null},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this._initializeConnection()}},{key:"render",value:function(){var e=this.props,t="graph"===e.mainView&&null!==e.graphView||"table"===e.mainView&&null!==e.tableView||"source"===e.mainView&&null!==e.sourceView;return i.a.createElement(G.x,{onResize:this._resize},i.a.createElement("div",{className:"sterling"},i.a.createElement(ta,{connection:e.connection}),i.a.createElement(ca,null),t?i.a.createElement(Ft.a,{split:"vertical",defaultSize:350,minSize:150,maxSize:-150,onChange:this._resize},this._getDrawer(),this._getStage()):this._getStage()))}}]),t}(i.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(704);var pa=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_FORGE_BUILD?new v:new b,ma=Object(a.createStore)(xt);o.a.render(i.a.createElement(c.a,{store:ma},i.a.createElement(da,{connection:pa})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[253,1,2]]]);
//# sourceMappingURL=main.351a7b26.chunk.js.map