(this.webpackJsonpsterling=this.webpackJsonpsterling||[]).push([[0],{121:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var o,a,i,l,r=n(0),s=n.n(r),c=n(19),u=n.n(c),m=n(6),p=n(7),h=n(9),g=n(8),d=n(10),b=n(13),f=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this)))._ws=void 0,e._cb=void 0,e._rq=void 0,e._heartbeat_count=void 0,e._heartbeat_id=void 0,e._heartbeat_interval=void 0,e._heartbeat_latency=void 0,e._heartbeat_timestamp=void 0,e._auto_reconnect=void 0,e._auto_reconnect_interval=void 0,e._ws=null,e._cb=new Map,e._rq=new Map,e._heartbeat_count=0,e._heartbeat_id=0,e._heartbeat_interval=15e3,e._heartbeat_latency=0,e._heartbeat_timestamp=0,e._auto_reconnect=!1,e._auto_reconnect_interval=5e3,e._rq.set("current",(function(){return e._request("current")})),e._rq.set("next",(function(){return e._request("next")})),e}return Object(d.a)(t,e),Object(p.a)(t,[{key:"average_latency",value:function(){return this._heartbeat_count>0?this._heartbeat_latency/this._heartbeat_count:0}},{key:"connect",value:function(){this._ws&&(this._ws.onclose=null,this._ws.close());try{this._ws=new WebSocket("ws://"+window.location.hostname+":"+window.location.port+"/alloy"),this._ws.onopen=this._on_open.bind(this),this._ws.onclose=this._on_close.bind(this),this._ws.onerror=this._on_error.bind(this),this._ws.onmessage=this._on_message.bind(this)}catch(e){this._cb.has("error")&&this._cb.get("error").forEach(e)}}},{key:"on",value:function(e,t){return this._cb.has(e)||this._cb.set(e,[]),this._cb.get(e).push(t),this}},{key:"request",value:function(e){this._rq.has(e)&&this._rq.get(e)()}},{key:"_on_open",value:function(e){this._reset_heartbeat(),this._cb.has("connect")&&this._cb.get("connect").forEach((function(e){return e()}))}},{key:"_on_close",value:function(e){this._ws=null,this._auto_reconnect&&this._reconnect(),this._cb.has("disconnect")&&this._cb.get("disconnect").forEach((function(e){return e()}))}},{key:"_on_error",value:function(e){this._auto_reconnect&&this._reconnect(),this._cb.has("error")&&this._cb.get("error").forEach((function(t){return t(e)}))}},{key:"_on_message",value:function(e){this._reset_heartbeat();var t=e.data.slice(0,4),n=e.data.slice(4);switch(t){case"pong":this._heartbeat_latency+=performance.now()-this._heartbeat_timestamp,this._heartbeat_count+=1;break;case"XML:":if(n.length&&this._cb.has("instance")){var o=new b.a(n);this._cb.get("instance").forEach((function(e){return e(o)}))}}}},{key:"_reconnect",value:function(){window.setTimeout(this.connect.bind(this),this._auto_reconnect_interval)}},{key:"_request",value:function(e){this._ws&&this._ws.send(e)}},{key:"_reset_heartbeat",value:function(){clearTimeout(this._heartbeat_id),this._heartbeat_id=window.setTimeout(this._ping.bind(this),this._heartbeat_interval)}},{key:"_ping",value:function(){this._ws&&(this._heartbeat_timestamp=performance.now(),this._ws.send("ping"))}}]),t}((function e(){Object(m.a)(this,e)})),v=n(127),_=n(1),S=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props;return s.a.createElement(v.k,{fixedToTop:!0,className:"nav bp3-dark"},s.a.createElement(v.k.Group,null,s.a.createElement(v.m,{className:"nav-heading"},"Sterling"),s.a.createElement(v.l,null),e.views.map((function(t){return s.a.createElement(v.a,{key:t.name,className:_.a.MINIMAL,active:t===e.view,large:!0,icon:t.icon,text:t.name,onClick:function(){return e.onRequestView(t)}})})),s.a.createElement(v.l,null)),e.children)}}]),t}(s.a.Component),k=function(e){function t(){var e,n;Object(m.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).state={command:"",connected:!1,ready:!1},n._requestNext=function(){n.props.connection.request("next")},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.connection.on("connect",(function(){e.setState({connected:!0})})).on("disconnect",(function(){e.setState({connected:!1,ready:!1})})).on("instance",(function(t){e.setState({command:t.command(),ready:e.state.connected})}))}},{key:"render",value:function(){var e=this.props,t=this.state;return s.a.createElement(S,e,s.a.createElement(v.k.Group,null,t.command.length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement(v.t,{minimal:!0},t.command),s.a.createElement(v.k.Divider,null)),s.a.createElement(v.a,{disabled:!t.ready,intent:t.connected?"success":"danger",large:!0,onClick:this._requestNext,rightIcon:"circle-arrow-right",text:"Next"})))}}]),t}(s.a.Component),y=n(20);function E(e){return function(t){return e?t.id().replace(/^this\//,""):t.id()}}!function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(o||(o={})),function(e){e[e.Row=0]="Row",e[e.Column=1]="Column"}(a||(a={})),function(e){e[e.Ascending=0]="Ascending",e[e.Descending=1]="Descending"}(i||(i={})),function(e){e[e.All=0]="All",e[e.Signatures=1]="Signatures",e[e.Fields=2]="Fields",e[e.Skolems=3]="Skolems",e[e.Select=4]="Select"}(l||(l={}));var C=n(51),T=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.collapsed?"expand-all":"collapse-all";return r.createElement("div",{className:"section ".concat(this.props.collapsed?"collapsed":"")},!!this.props.title&&r.createElement("div",{className:"section-header"},r.createElement("div",{className:"title"},this.props.title.toUpperCase()),r.createElement(v.a,{icon:e,minimal:!0,onClick:this.props.onToggleCollapse})),r.createElement(v.d,{isOpen:!this.props.collapsed,keepChildrenMounted:!0},r.createElement("div",{className:"section-body"},this.props.children)))}}]),t}(r.Component),j=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.props.collapsed?r.createElement("div",{className:"sterling-sidebar left collapsed"},r.createElement("div",{className:"header"},r.createElement(v.a,{icon:"menu-open",minimal:!0,onClick:this.props.onToggleCollapse}))):r.createElement("div",{className:"sterling-sidebar left bp3-dark"},r.createElement("div",{className:"header"},r.createElement("div",{className:"title"},this.props.title),r.createElement(v.a,{icon:"menu-closed",minimal:!0,onClick:this.props.onToggleCollapse})),this.props.children)}}]),t}(r.Component);j.Section=T;var O=j,w=n(27),F=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props;return r.createElement(O.Section,{collapsed:e.collapseData,onToggleCollapse:e.onToggleCollapse,title:"Data Options"},r.createElement(v.e,null,r.createElement(v.s,{alignIndicator:w.a.LEFT,checked:e.removeBuiltin,disabled:e.tables===l.Select,label:"Hide Built-in Signatures",onChange:e.onToggleBuiltin}),r.createElement(v.s,{alignIndicator:w.a.LEFT,checked:e.removeEmpty,disabled:e.tables===l.Select,label:"Hide Empty Tables",onChange:e.onToggleEmpty}),r.createElement(v.s,{alignIndicator:w.a.LEFT,checked:e.removeThis,label:'Remove "this" from Signature names',onChange:e.onToggleRemoveThis}),r.createElement(v.s,{alignIndicator:w.a.LEFT,checked:e.highlightSkolems,label:"Display Skolems as highlighted rows",onChange:e.onToggleHighlightSkolems})))}}]),t}(r.Component),I=function(e){function t(){var e,n;Object(m.a)(this,t);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a))))._chooseAlphaSort=function(e){var t=n.props.sortPrimary,o=e===i.Ascending?b.c.alphabeticalSort(n.props.nameFunction,!0):b.c.alphabeticalSort(n.props.nameFunction,!1);n.props.onChooseSortingFunctions(o,t)},n._chooseGroupSort=function(){n.props.onChooseSortingFunctions(b.c.groupSort(),n.props.sortPrimary)},n._chooseNumSort=function(e){var t=n.props.sortPrimary,o=e===i.Ascending?b.c.sizeSort():b.c.sizeSort(!1);n.props.onChooseSortingFunctions(o,t)},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props;return r.createElement(O.Section,{collapsed:t.collapseLayout,onToggleCollapse:t.onToggleCollapse,title:"Layout Options"},r.createElement(v.e,null,r.createElement(v.e,{inline:!0,label:"Layout Direction"},r.createElement(v.b,null,r.createElement(v.a,{active:t.layoutDirection===a.Row,icon:"vertical-distribution",onClick:function(){return t.onChooseLayoutDirection(a.Row)}}),r.createElement(v.a,{active:t.layoutDirection===a.Column,icon:"horizontal-distribution",onClick:function(){return t.onChooseLayoutDirection(a.Column)}}))),r.createElement(v.e,{inline:!0,label:"Align"},r.createElement(v.b,null,r.createElement(v.a,{active:t.tableAlignment===o.Left,icon:"align-left",onClick:function(){return t.onChooseTableAlignment(o.Left)}}),r.createElement(v.a,{active:t.tableAlignment===o.Center,icon:"align-center",onClick:function(){return t.onChooseTableAlignment(o.Center)}}),r.createElement(v.a,{active:t.tableAlignment===o.Right,icon:"align-right",onClick:function(){return t.onChooseTableAlignment(o.Right)}}))),r.createElement(v.e,{inline:!0,label:"Sort"},r.createElement(v.b,null,r.createElement(v.a,{icon:"group-objects",onClick:function(){return e._chooseGroupSort()}}),r.createElement(v.a,{icon:"sort-alphabetical",onClick:function(){return e._chooseAlphaSort(i.Ascending)}}),r.createElement(v.a,{icon:"sort-alphabetical-desc",onClick:function(){return e._chooseAlphaSort(i.Descending)}}),r.createElement(v.a,{icon:"sort-numerical",onClick:function(){return e._chooseNumSort(i.Ascending)}}),r.createElement(v.a,{icon:"sort-numerical-desc",onClick:function(){return e._chooseNumSort(i.Descending)}})))))}}]),t}(r.Component),A=n(128),D=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,n="string"===typeof e.signature?e.signature:e.nameFunction?e.nameFunction(e.signature):e.signature.name();return r.createElement(v.t,{className:t.className,fill:e.fill},n)}}]),t}(r.Component);D.className="sig-tag";var L=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=("string"===typeof this.props.field?this.props.field:this.props.nameFunction?this.props.nameFunction(this.props.field):this.props.field.name()).split("<:");return r.createElement(v.t,{className:t.className,fill:this.props.fill},t.FieldTagEls(e))}}],[{key:"FieldTagEls",value:function(e){return 2!==e.length?r.createElement(r.Fragment,null,e.join("")):r.createElement(r.Fragment,null,e[0],r.createElement(v.g,{icon:"symbol-triangle-down",iconSize:14,style:{padding:"0 1px 0 1px",transform:"rotate(90deg)"}}),e[1])}}]),t}(r.Component);L.className="field-tag";var N=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,n="string"===typeof e.skolem?e.skolem:e.nameFunction?e.nameFunction(e.skolem):e.skolem.name();return r.createElement(v.t,{className:t.className,fill:e.fill},n)}}]),t}(r.Component);N.className="skolem-tag";var x=A.a.ofType();function R(e,t){var n=0,o=t.split(/\s+/).filter((function(e){return e.length>0})).map(q);if(0===o.length)return[e];for(var a=new RegExp(o.join("|"),"gi"),i=[];;){var l=a.exec(e);if(!l)break;var s=l[0].length,c=e.slice(n,a.lastIndex-s);c.length>0&&i.push(c),n=a.lastIndex,i.push(r.createElement("strong",{key:n},l[0]))}var u=e.slice(n);return u.length>0&&i.push(u),i}function q(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}var B=function(e){function t(){var e,n;Object(m.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a))))._filterItem=function(e,t){return("field"===t.expressionType()?n.props.nameFunction(t).split("<:")[1]:n.props.nameFunction(t)).toLowerCase().indexOf(e.toLowerCase())>=0},n._isItemSelected=function(e){return n.props.itemsSelected.includes(e)},n._onRemoveTag=function(e,t){n.props.onDeselectItem(n.props.itemsSelected[t])},n._onSelectItem=function(e){n._isItemSelected(e)?n.props.onDeselectItem(e):n.props.onSelectItem(e)},n._renderItem=function(e,t){if(!t.modifiers.matchesPredicate)return null;switch(e.expressionType()){case"signature":return n._renderSignature(e,t);case"field":return n._renderField(e,t);case"skolem":return n._renderSkolem(e,t);default:return null}},n._renderList=function(e){var t=e.items.filter((function(e){return"signature"===e.expressionType()})),o=e.items.filter((function(e){return"field"===e.expressionType()})),a=e.items.filter((function(e){return"skolem"===e.expressionType()})),i=b.c.alphabeticalSort(n.props.nameFunction);t.sort(i).sort(b.c.builtinSort()),o.sort(i),a.sort(i);var l=t.map(e.renderItem).filter((function(e){return null!=e})),s=o.map(e.renderItem).filter((function(e){return null!=e})),c=a.map(e.renderItem).filter((function(e){return null!=e}));return r.createElement(v.h,{ulRef:e.itemsParentRef},r.createElement(v.i,{title:"Signatures"}),l.length?l:r.createElement(v.j,{disabled:!0,text:"None"}),r.createElement(v.i,{title:"Fields"}),s.length?s:r.createElement(v.j,{disabled:!0,text:"None"}),r.createElement(v.i,{title:"Skolems"}),c.length?c:r.createElement(v.j,{disabled:!0,text:"None"}))},n._renderSignature=function(e,t){var o=n._isItemSelected(e);return r.createElement(v.j,{active:t.modifiers.active,disabled:t.modifiers.disabled,key:e.id(),labelElement:R(n.props.nameFunction(e),t.query),icon:o?"tick":"blank",onClick:t.handleClick})},n._renderField=function(e,t){var o=n.props.nameFunction(e).split("<:"),a=n._isItemSelected(e);return r.createElement(v.j,{active:t.modifiers.active,disabled:t.modifiers.disabled,key:e.id(),icon:r.createElement(r.Fragment,null,a&&r.createElement(v.g,{icon:"tick"}),r.createElement(D,{signature:o[0]})),labelElement:R(o[1],t.query),onClick:t.handleClick})},n._renderSkolem=function(e,t){var o=n._isItemSelected(e);return r.createElement(v.j,{active:t.modifiers.active,disabled:t.modifiers.disabled,icon:o?"tick":"blank",key:e.id(),labelElement:R(e.name(),t.query),onClick:t.handleClick})},n._renderTag=function(e){var t=n.props.nameFunction(e);return"field"===e.expressionType()?L.FieldTagEls(t.split("<:")):t},n._tagProps=function(e,t){var o=n.props.itemsSelected[t].expressionType();return{className:"signature"===o?"sig-tag":"field"===o?"field-tag":"skolem"===o?"skolem-tag":""}},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=this.props.itemsSelected.length?r.createElement(v.a,{icon:"cross",minimal:!0,onClick:this.props.onClearSelectedItems}):void 0;return r.createElement(x,{fill:!0,items:function(t){var n=t.filter((function(e){return"signature"===e.expressionType()})),o=t.filter((function(e){return"field"===e.expressionType()})),a=t.filter((function(e){return"skolem"===e.expressionType()})),i=b.c.alphabeticalSort(e.props.nameFunction);return n.sort(i).sort(b.c.builtinSort()),o.sort(i),a.sort(i),[].concat(Object(y.a)(n),Object(y.a)(o),Object(y.a)(a))}(t.items),itemPredicate:this._filterItem,itemRenderer:this._renderItem,itemListRenderer:this._renderList,onItemSelect:this._onSelectItem,placeholder:"Choose Tables...",resetOnSelect:!0,scrollToActiveItem:!0,selectedItems:this.props.itemsSelected,tagInputProps:{onRemove:this._onRemoveTag,rightElement:n,tagProps:this._tagProps},tagRenderer:this._renderTag})}}]),t}(r.Component),M=function(e){function t(){var e,n;Object(m.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a))))._addItem=function(e){var t=n.props.itemsSelected;n.props.onItemsSelected([].concat(Object(y.a)(t),[e]))},n._clearItems=function(){n.props.onItemsSelected([])},n._removeItem=function(e){var t=Object(y.a)(n.props.itemsSelected),o=t.indexOf(e);o>=0&&(t.splice(o,1),n.props.onItemsSelected(t))},n._handleRadioChange=function(e){n.props.onChooseTablesType(parseInt(e.currentTarget.value))},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props;return r.createElement(O.Section,{collapsed:e.collapseTables,onToggleCollapse:e.onToggleCollapse,title:"Tables"},r.createElement(v.e,null,r.createElement(v.r,{onChange:this._handleRadioChange,selectedValue:e.tables},r.createElement(v.q,{label:"All Tables",value:l.All}),r.createElement(v.q,{label:"Signatures",value:l.Signatures}),r.createElement(v.q,{label:"Fields",value:l.Fields}),r.createElement(v.q,{label:"Skolems",disabled:e.highlightSkolems,value:l.Skolems}),r.createElement(v.q,{label:"Choose Tables",value:l.Select}),r.createElement(B,{items:e.items,onClearSelectedItems:this._clearItems,onDeselectItem:this._removeItem,onSelectItem:this._addItem,nameFunction:e.nameFunction,itemsSelected:e.itemsSelected}))))}}]),t}(r.Component),P=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChooseLayoutDirection,n=e.onChooseSortingFunctions,o=e.onChooseTableAlignment,a=e.onChooseTablesType,i=e.onItemsSelected,l=e.onToggleBuiltin,r=e.onToggleCollapseData,c=e.onToggleCollapseLayout,u=e.onToggleCollapseSidebar,m=(e.onToggleCollapseSkolem,e.onToggleCollapseTables),p=e.onToggleEmpty,h=e.onToggleHighlightSkolems,g=e.onToggleRemoveThis,d=Object(C.a)(e,["onChooseLayoutDirection","onChooseSortingFunctions","onChooseTableAlignment","onChooseTablesType","onItemsSelected","onToggleBuiltin","onToggleCollapseData","onToggleCollapseLayout","onToggleCollapseSidebar","onToggleCollapseSkolem","onToggleCollapseTables","onToggleEmpty","onToggleHighlightSkolems","onToggleRemoveThis"]);return s.a.createElement(O,{collapsed:d.collapseSidebar,onToggleCollapse:u,title:"Table View Settings"},s.a.createElement(M,Object.assign({},d,{onChooseTablesType:a,onItemsSelected:i,onToggleCollapse:m})),s.a.createElement(F,Object.assign({},d,{onToggleBuiltin:l,onToggleCollapse:r,onToggleEmpty:p,onToggleHighlightSkolems:h,onToggleRemoveThis:g})),s.a.createElement(I,Object.assign({},d,{onChooseLayoutDirection:t,onChooseSortingFunctions:n,onChooseTableAlignment:o,onToggleCollapse:c})))}}]),t}(s.a.Component),V=n(52),H=n(29),z=n(125),G=n(126),W=function(e){function t(){var e,n;Object(m.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).state={enabled:!1},n._buildShadowStyle=function(e,t){return e.map((function(e,n){return"0 0 0 ".concat((n+1)*t,"px ").concat(e)})).join(",")},n._onMouseEnter=function(){n.setState({enabled:!0})},n._onMouseLeave=function(){n.setState({enabled:!1})},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.colors,n=this.state.enabled?4:2;return s.a.createElement(H.c,null,s.a.createElement(z.a,null,(function(o){var a=o.ref;return s.a.createElement("tr",{onMouseEnter:e._onMouseEnter,onMouseLeave:e._onMouseLeave,ref:a,style:{boxShadow:e._buildShadowStyle(t,n)}},e.props.children)})),s.a.createElement(v.p,null,s.a.createElement(G.a,{modifiers:{},placement:"right"},(function(o){var a=o.ref,i=o.style,l=o.placement;return e.state.enabled&&s.a.createElement("div",{ref:a,style:Object(V.a)({},i,{padding:n*(t.length-1)+"px"}),"data-placement":l},s.a.createElement("div",{className:"table-rowpop"},e.props.content))}))))}}]),t}(s.a.Component);function U(e,t){return s.a.createElement(s.a.Fragment,null,e.map((function(e,n){return s.a.createElement("div",{key:e.id(),style:{backgroundColor:t[n]}},e.name())})))}var $=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.tableAlignment,t=this.props.layoutDirection,n=e===o.Left?"left":e===o.Center?"center":e===o.Right?"right":"",i=t===a.Row?"row":t===a.Column?"column":"";return s.a.createElement("div",{className:"stage table-stage ".concat(n," ").concat(i),id:"stage"},this._getElements())}},{key:"_getElements",value:function(){var e=this;return this.props.itemsVisible.map((function(t){var n=t.expressionType();if("signature"===n){var o={highlightSkolems:e.props.highlightSkolems,signature:t,skolemColors:e.props.skolemColors};return s.a.createElement(v.c,{key:t.id(),elevation:2},s.a.createElement(D,{fill:!0,signature:t,nameFunction:e.props.nameFunction}),function(e){var t=e.signature.atoms();return s.a.createElement(v.f,{bordered:!0,condensed:!0,striped:!0},s.a.createElement("tbody",null,t.map((function(t){var n=t.skolems();if(e.highlightSkolems&&n.length){var o=n.map((function(t){return e.skolemColors.get(t)||""}));return s.a.createElement(W,{key:t.id(),content:U(n,o),colors:o},s.a.createElement("td",null,t.name()))}return s.a.createElement("tr",{key:t.id()},s.a.createElement("td",null,t.name()))}))))}(o))}if("field"===n){var a={field:t,highlightSkolems:e.props.highlightSkolems,nameFunction:e.props.nameFunction,skolemColors:e.props.skolemColors};return s.a.createElement(v.c,{key:t.id(),elevation:2},s.a.createElement(L,{fill:!0,field:t,nameFunction:e.props.nameFunction}),function(e){var t=e.field.types(),n=e.field.tuples();return s.a.createElement(v.f,{bordered:!0,condensed:!0,striped:!0},s.a.createElement("thead",null,s.a.createElement("tr",null,t.map((function(t,n){return s.a.createElement("th",{key:t.id()+n},e.nameFunction(t))})))),s.a.createElement("tbody",null,n.map((function(t){var n=t.skolems();if(e.highlightSkolems&&n.length){var o=n.map((function(t){return e.skolemColors.get(t)||""}));return s.a.createElement(W,{key:t.id(),content:U(n,o),colors:o},t.atoms().map((function(e,n){return s.a.createElement("td",{key:t.id()+"["+n+"]"},e.name())})))}return s.a.createElement("tr",{key:t.id()},t.atoms().map((function(e,n){return s.a.createElement("td",{key:t.id()+"["+n+"]"},e.name())})))}))))}(a))}if("skolem"===n){var i={color:"red",skolem:t,nameFunction:e.props.nameFunction};return s.a.createElement(v.c,{key:t.id(),elevation:2},s.a.createElement(N,{fill:!0,skolem:t,nameFunction:e.props.nameFunction}),function(e){var t=e.skolem.types(),n=e.skolem.tuples();return s.a.createElement(v.f,{bordered:!0,condensed:!0,striped:!0},s.a.createElement("thead",null,s.a.createElement("tr",null,t.map((function(t,n){return s.a.createElement("th",{key:t.id()+n},e.nameFunction(t))})))),s.a.createElement("tbody",{style:{borderColor:e.color}},n.map((function(e){return s.a.createElement("tr",{key:e.id()},e.atoms().map((function(t,n){return s.a.createElement("td",{key:e.id()+"["+n+"]"},t.name())})))}))))}(i))}return null}))}}]),t}(s.a.Component),J=function(e){function t(e){var n;Object(m.a)(this,t),(n=Object(h.a)(this,Object(g.a)(t).call(this,e)))._assignSkolemColors=function(e){var t=["#2965CC","#29A634","#D99E0B","#D13913","#8F398F","#00B3A4","#DB2C6F","#9BBF30","#96622D","#7157D9"],n=new Map;return e.forEach((function(o,a){n.set(o,t[a%e.length])})),n},n._getVisibleItems=function(){var e=n.state.tables,t=Object(y.a)(n.state.items),o=e===l.All?t:e===l.Signatures?t.filter(b.b.keepSignatures):e===l.Fields?t.filter(b.b.keepFields):e===l.Skolems?t.filter(b.b.keepSkolems):e===l.Select?Object(y.a)(n.state.itemsSelected):[],a=function(){return!0};return(e===l.Select?o:o.filter(n.state.removeBuiltin?b.b.removeBuiltins:a).filter(n.state.removeEmpty?b.b.removeEmptys:a).filter(n.state.highlightSkolems?b.b.removeSkolems:a)).sort(n.state.sortSecondary).sort(n.state.sortPrimary)},n._onChooseLayoutDirection=function(e){n.setState({layoutDirection:e})},n._onChooseSortingFunctions=function(e,t){n.setState({sortPrimary:e,sortSecondary:t})},n._onChooseTableAlignment=function(e){n.setState({tableAlignment:e})},n._onChooseTablesType=function(e){n.setState({tables:e})},n._onItemsSelected=function(e){n.setState({itemsSelected:e,tables:l.Select})},n._onToggleBuiltin=function(){n.setState({removeBuiltin:!n.state.removeBuiltin})},n._onToggleCollapseSidebar=function(){var e=n.state.collapseSidebar;n.setState({collapseSidebar:!e})},n._onToggleCollapseData=function(){n.setState({collapseData:!n.state.collapseData})},n._onToggleCollapseLayout=function(){n.setState({collapseLayout:!n.state.collapseLayout})},n._onToggleCollapseSkolem=function(){n.setState({collapseSkolem:!n.state.collapseSkolem})},n._onToggleCollapseTables=function(){n.setState({collapseTables:!n.state.collapseTables})},n._onToggleEmpty=function(){n.setState({removeEmpty:!n.state.removeEmpty})},n._onToggleHighlightSkolems=function(){var e=n.state.tables===l.Skolems?l.All:n.state.tables;n.setState({highlightSkolems:!n.state.highlightSkolems,tables:e})},n._onToggleRemoveThis=function(){var e=!n.state.removeThis,t=E(e);n.setState({removeThis:e,nameFunction:t})};var i=E(!0),r=e.data?n._assignSkolemColors(e.data.skolems()):new Map;return n.state={collapseData:!1,collapseLayout:!1,collapseSidebar:!1,collapseSkolem:!1,collapseTables:!1,highlightSkolems:!0,items:[],itemsSelected:[],layoutDirection:a.Row,nameFunction:i,removeBuiltin:!0,removeEmpty:!0,removeThis:!0,skolemColors:r,sortPrimary:b.c.groupSort(),sortSecondary:b.c.sizeSort(),tableAlignment:o.Left,tables:l.All},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){if(null!==this.props.data){var e=this.props.data,t=b.c.alphabeticalSort(E(!0)),n=b.c.builtinSort(),o=[].concat(Object(y.a)(e.signatures().sort(n).sort(t)),Object(y.a)(e.fields().sort(t)),Object(y.a)(e.skolems().sort(t)));this.setState({items:o,itemsSelected:[],skolemColors:this._assignSkolemColors(e.skolems())})}}},{key:"componentDidUpdate",value:function(e,t){console.log("update");var n=this.props.data;if(n!==e.data)if(n){var o=b.c.alphabeticalSort(E(!0)),a=b.c.builtinSort(),i=[].concat(Object(y.a)(n.signatures().sort(a).sort(o)),Object(y.a)(n.fields().sort(o)),Object(y.a)(n.skolems().sort(o))),l=t.itemsSelected.map((function(e){return e.id()})),r=i.filter((function(e){return l.includes(e.id())}));this.setState({items:i,itemsSelected:r,skolemColors:this._assignSkolemColors(n.skolems())})}else this.setState({items:[],itemsSelected:[],skolemColors:new Map})}},{key:"render",value:function(){if(!this.props.visible)return null;var e=this.state,t=s.a.createElement($,Object.assign({},e,{itemsVisible:this._getVisibleItems()})),n=s.a.createElement(P,Object.assign({},e,{onChooseLayoutDirection:this._onChooseLayoutDirection,onChooseSortingFunctions:this._onChooseSortingFunctions,onChooseTableAlignment:this._onChooseTableAlignment,onChooseTablesType:this._onChooseTablesType,onItemsSelected:this._onItemsSelected,onToggleBuiltin:this._onToggleBuiltin,onToggleCollapseData:this._onToggleCollapseData,onToggleCollapseLayout:this._onToggleCollapseLayout,onToggleCollapseSidebar:this._onToggleCollapseSidebar,onToggleCollapseSkolem:this._onToggleCollapseSkolem,onToggleCollapseTables:this._onToggleCollapseTables,onToggleHighlightSkolems:this._onToggleHighlightSkolems,onToggleEmpty:this._onToggleEmpty,onToggleRemoveThis:this._onToggleRemoveThis}));return s.a.createElement(s.a.Fragment,null,n,t)}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(h.a)(this,Object(g.a)(t).call(this,e)))._initializeConnection=function(){var e=n.props.connection;e.on("connect",(function(){e.request("current")})).on("instance",(function(e){var t=n.props.views.map((function(e){return e.transform}));n.setState({data:t.map((function(t){return t?t(e):e}))})})),e.connect()},n._placeholder=function(){return s.a.createElement(v.n,{description:n.props.message||"Nothing to display",icon:n.state.view.icon,title:"Welcome to Sterling"})},n._setView=function(e){n.setState({view:e})},n._views=function(){var e=n.props,t=n.state;return s.a.createElement("div",{className:"sterling-view"},e.views.map((function(n,o){var a=n.view,i=t.data[o];return s.a.createElement(a,{connection:e.connection,data:i,key:n.name,visible:t.view===n})})))},n.state={data:[],view:e.views[0]},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._initializeConnection()}},{key:"render",value:function(){var e=this.props,t=this.state,n=e.navbar;return s.a.createElement("div",{className:"sterling"},s.a.createElement(n,{connection:e.connection,onRequestView:this._setView,view:t.view,views:e.views}),t.data.length?this._views():this._placeholder())}}]),t}(s.a.Component),K=(n(121),new f),Q={name:"Table",icon:"th",view:J},Y=s.a.createElement(X,{connection:K,message:"Use Alloy to generate an instance.",navbar:k,views:[Q]});u.a.render(Y,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},89:function(e,t,n){e.exports=n(122)}},[[89,1,2]]]);
//# sourceMappingURL=main.1f6ce53e.chunk.js.map