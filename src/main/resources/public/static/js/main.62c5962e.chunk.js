/*! For license information please see main.62c5962e.chunk.js.LICENSE.txt */
(this.webpackJsonpsterling=this.webpackJsonpsterling||[]).push([[0],{188:function(e,t,n){e.exports=n(419)},19:function(e,t,n){var r=n(73),i=n(198),o=n(107),a=n(202),u=n(206),s=n(207),c=n(209),l=n(210),f=n(212);window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=311)}([function(e,t,n){var r;try{r={cloneDeep:n(251),constant:n(62),defaults:n(252),each:n(93),filter:n(96),find:n(253),flatten:n(123),forEach:n(94),forIn:n(258),has:n(107),isUndefined:n(108),last:n(259),map:n(109),mapValues:n(260),max:n(261),merge:n(263),min:n(269),minBy:n(270),now:n(271),pick:n(272),range:n(277),reduce:n(111),sortBy:n(280),uniqueId:n(285),values:n(116),zipObject:n(286)}}catch(e){}r||(r=window._),e.exports=r},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";var r=n(0),i=n(6).Graph;function o(e,t,n,i){var o;do{o=r.uniqueId(i)}while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o}function a(e){return r.max(r.map(e.nodes(),(function(t){var n=e.node(t).rank;if(!r.isUndefined(n))return n})))}e.exports={addDummyNode:o,simplify:function(e){var t=(new i).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),t},asNonCompoundGraph:function(e){var t=new i({multigraph:e.isMultigraph()}).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){e.children(n).length||t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){t.setEdge(n,e.edge(n))})),t},successorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.outEdges(t),(function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.inEdges(t),(function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,r,i=e.x,o=e.y,a=t.x-i,u=t.y-o,s=e.width/2,c=e.height/2;if(!a&&!u)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(u)*s>Math.abs(a)*c?(u<0&&(c=-c),n=c*a/u,r=c):(a<0&&(s=-s),n=s,r=s*u/a),{x:i+n,y:o+r}},buildLayerMatrix:function(e){var t=r.map(r.range(a(e)+1),(function(){return[]}));return r.forEach(e.nodes(),(function(n){var i=e.node(n),o=i.rank;r.isUndefined(o)||(t[o][i.order]=n)})),t},normalizeRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank})));r.forEach(e.nodes(),(function(n){var i=e.node(n);r.has(i,"rank")&&(i.rank-=t)}))},removeEmptyRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank}))),n=[];r.forEach(e.nodes(),(function(r){var i=e.node(r).rank-t;n[i]||(n[i]=[]),n[i].push(r)}));var i=0,o=e.graph().nodeRankFactor;r.forEach(n,(function(t,n){r.isUndefined(t)&&n%o!=0?--i:i&&r.forEach(t,(function(t){e.node(t).rank+=i}))}))},addBorderNode:function(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),o(e,"border",i,t)},maxRank:a,partition:function(e,t){var n={lhs:[],rhs:[]};return r.forEach(e,(function(e){t(e)?n.lhs.push(e):n.rhs.push(e)})),n},time:function(e,t){var n=r.now();try{return t()}finally{console.log(e+" time: "+(r.now()-n)+"ms")}},notime:function(e,t){return t()}}},function(e,t,n){var r;try{r={clone:n(139),constant:n(62),each:n(93),filter:n(96),has:n(107),isArray:n(1),isEmpty:n(215),isFunction:n(24),isUndefined:n(108),keys:n(11),map:n(109),reduce:n(111),size:n(218),transform:n(224),union:n(225),values:n(116)}}catch(e){}r||(r=window._),e.exports=r},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){(function(e,r){var i;(function(){var o="Expected a function",a="__lodash_placeholder__",u=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],s="[object Arguments]",c="[object Array]",l="[object Boolean]",f="[object Date]",h="[object Error]",d="[object Function]",p="[object GeneratorFunction]",v="[object Map]",g="[object Number]",m="[object Object]",y="[object RegExp]",_="[object Set]",b="[object String]",w="[object Symbol]",x="[object WeakMap]",k="[object ArrayBuffer]",E="[object DataView]",S="[object Float32Array]",j="[object Float64Array]",M="[object Int8Array]",O="[object Int16Array]",A="[object Int32Array]",C="[object Uint8Array]",T="[object Uint16Array]",L="[object Uint32Array]",N=/\b__p \+= '';/g,I=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/&(?:amp|lt|gt|quot|#39);/g,F=/[&<>"']/g,P=RegExp(D.source),z=RegExp(F.source),V=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,q=/<%=([\s\S]+?)%>/g,B=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,H=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G=/[\\^$.*+?()[\]{}|]/g,$=RegExp(G.source),Y=/^\s+|\s+$/g,X=/^\s+/,Z=/\s+$/,K=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Q=/\{\n\/\* \[wrapped with (.+)\] \*/,J=/,? & /,ee=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,te=/\\(\\)?/g,ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,re=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,oe=/^0b[01]+$/i,ae=/^\[object .+?Constructor\]$/,ue=/^0o[0-7]+$/i,se=/^(?:0|[1-9]\d*)$/,ce=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,le=/($^)/,fe=/['\n\r\u2028\u2029\\]/g,he="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",de="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="["+de+"]",ve="["+he+"]",ge="\\d+",me="[a-z\\xdf-\\xf6\\xf8-\\xff]",ye="[^\\ud800-\\udfff"+de+ge+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",_e="\\ud83c[\\udffb-\\udfff]",be="[^\\ud800-\\udfff]",we="(?:\\ud83c[\\udde6-\\uddff]){2}",xe="[\\ud800-\\udbff][\\udc00-\\udfff]",ke="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ee="(?:"+me+"|"+ye+")",Se="(?:"+ke+"|"+ye+")",je="(?:"+ve+"|"+_e+")?",Me="[\\ufe0e\\ufe0f]?"+je+"(?:\\u200d(?:"+[be,we,xe].join("|")+")[\\ufe0e\\ufe0f]?"+je+")*",Oe="(?:"+["[\\u2700-\\u27bf]",we,xe].join("|")+")"+Me,Ae="(?:"+[be+ve+"?",ve,we,xe,"[\\ud800-\\udfff]"].join("|")+")",Ce=RegExp("['\u2019]","g"),Te=RegExp(ve,"g"),Le=RegExp(_e+"(?="+_e+")|"+Ae+Me,"g"),Ne=RegExp([ke+"?"+me+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[pe,ke,"$"].join("|")+")",Se+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[pe,ke+Ee,"$"].join("|")+")",ke+"?"+Ee+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ke+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ge,Oe].join("|"),"g"),Ie=RegExp("[\\u200d\\ud800-\\udfff"+he+"\\ufe0e\\ufe0f]"),Re=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,De=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fe=-1,Pe={};Pe[S]=Pe[j]=Pe[M]=Pe[O]=Pe[A]=Pe[C]=Pe["[object Uint8ClampedArray]"]=Pe[T]=Pe[L]=!0,Pe[s]=Pe[c]=Pe[k]=Pe[l]=Pe[E]=Pe[f]=Pe[h]=Pe[d]=Pe[v]=Pe[g]=Pe[m]=Pe[y]=Pe[_]=Pe[b]=Pe[x]=!1;var ze={};ze[s]=ze[c]=ze[k]=ze[E]=ze[l]=ze[f]=ze[S]=ze[j]=ze[M]=ze[O]=ze[A]=ze[v]=ze[g]=ze[m]=ze[y]=ze[_]=ze[b]=ze[w]=ze[C]=ze["[object Uint8ClampedArray]"]=ze[T]=ze[L]=!0,ze[h]=ze[d]=ze[x]=!1;var Ve={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ue=parseFloat,qe=parseInt,Be="object"==typeof e&&e&&e.Object===Object&&e,We="object"==typeof self&&self&&self.Object===Object&&self,He=Be||We||Function("return this")(),Ge=t&&!t.nodeType&&t,$e=Ge&&"object"==typeof r&&r&&!r.nodeType&&r,Ye=$e&&$e.exports===Ge,Xe=Ye&&Be.process,Ze=function(){try{return $e&&$e.require&&$e.require("util").types||Xe&&Xe.binding&&Xe.binding("util")}catch(e){}}(),Ke=Ze&&Ze.isArrayBuffer,Qe=Ze&&Ze.isDate,Je=Ze&&Ze.isMap,et=Ze&&Ze.isRegExp,tt=Ze&&Ze.isSet,nt=Ze&&Ze.isTypedArray;function rt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function it(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function ot(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function at(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function st(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function ct(e,t){return!(null==e||!e.length)&&_t(e,t,0)>-1}function lt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function ft(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function ht(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function dt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function pt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function vt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var gt=kt("length");function mt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function yt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function _t(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):yt(e,wt,n)}function bt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function wt(e){return e!=e}function xt(e,t){var n=null==e?0:e.length;return n?jt(e,t)/n:NaN}function kt(e){return function(t){return null==t?void 0:t[e]}}function Et(e){return function(t){return null==e?void 0:e[t]}}function St(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function jt(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Mt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Ot(e){return function(t){return e(t)}}function At(e,t){return ft(t,(function(t){return e[t]}))}function Ct(e,t){return e.has(t)}function Tt(e,t){for(var n=-1,r=e.length;++n<r&&_t(t,e[n],0)>-1;);return n}function Lt(e,t){for(var n=e.length;n--&&_t(t,e[n],0)>-1;);return n}function Nt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var It=Et({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Rt=Et({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Dt(e){return"\\"+Ve[e]}function Ft(e){return Ie.test(e)}function Pt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function zt(e,t){return function(n){return e(t(n))}}function Vt(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var u=e[n];u!==t&&u!==a||(e[n]=a,o[i++]=n)}return o}function Ut(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function qt(e){return Ft(e)?function(e){for(var t=Le.lastIndex=0;Le.test(e);)++t;return t}(e):gt(e)}function Bt(e){return Ft(e)?function(e){return e.match(Le)||[]}(e):function(e){return e.split("")}(e)}var Wt=Et({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ht=function e(t){var n,r=(t=null==t?He:Ht.defaults(He.Object(),t,Ht.pick(He,De))).Array,i=t.Date,he=t.Error,de=t.Function,pe=t.Math,ve=t.Object,ge=t.RegExp,me=t.String,ye=t.TypeError,_e=r.prototype,be=de.prototype,we=ve.prototype,xe=t["__core-js_shared__"],ke=be.toString,Ee=we.hasOwnProperty,Se=0,je=(n=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Me=we.toString,Oe=ke.call(ve),Ae=He._,Le=ge("^"+ke.call(Ee).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=Ye?t.Buffer:void 0,Ve=t.Symbol,Be=t.Uint8Array,We=Ie?Ie.allocUnsafe:void 0,Ge=zt(ve.getPrototypeOf,ve),$e=ve.create,Xe=we.propertyIsEnumerable,Ze=_e.splice,gt=Ve?Ve.isConcatSpreadable:void 0,Et=Ve?Ve.iterator:void 0,Gt=Ve?Ve.toStringTag:void 0,$t=function(){try{var e=Ki(ve,"defineProperty");return e({},"",{}),e}catch(e){}}(),Yt=t.clearTimeout!==He.clearTimeout&&t.clearTimeout,Xt=i&&i.now!==He.Date.now&&i.now,Zt=t.setTimeout!==He.setTimeout&&t.setTimeout,Kt=pe.ceil,Qt=pe.floor,Jt=ve.getOwnPropertySymbols,en=Ie?Ie.isBuffer:void 0,tn=t.isFinite,nn=_e.join,rn=zt(ve.keys,ve),on=pe.max,an=pe.min,un=i.now,sn=t.parseInt,cn=pe.random,ln=_e.reverse,fn=Ki(t,"DataView"),hn=Ki(t,"Map"),dn=Ki(t,"Promise"),pn=Ki(t,"Set"),vn=Ki(t,"WeakMap"),gn=Ki(ve,"create"),mn=vn&&new vn,yn={},_n=So(fn),bn=So(hn),wn=So(dn),xn=So(pn),kn=So(vn),En=Ve?Ve.prototype:void 0,Sn=En?En.valueOf:void 0,jn=En?En.toString:void 0;function Mn(e){if(qa(e)&&!Ta(e)&&!(e instanceof Tn)){if(e instanceof Cn)return e;if(Ee.call(e,"__wrapped__"))return jo(e)}return new Cn(e)}var On=function(){function e(){}return function(t){if(!Ua(t))return{};if($e)return $e(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function An(){}function Cn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Tn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Ln(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function In(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Rn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new In;++t<n;)this.add(e[t])}function Dn(e){var t=this.__data__=new Nn(e);this.size=t.size}function Fn(e,t){var n=Ta(e),r=!n&&Ca(e),i=!n&&!r&&Ra(e),o=!n&&!r&&!i&&Za(e),a=n||r||i||o,u=a?Mt(e.length,me):[],s=u.length;for(var c in e)!t&&!Ee.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||io(c,s))||u.push(c);return u}function Pn(e){var t=e.length;return t?e[Ir(0,t-1)]:void 0}function zn(e,t){return xo(vi(e),Yn(t,0,e.length))}function Vn(e){return xo(vi(e))}function Un(e,t,n){(void 0===n||Ma(e[t],n))&&(void 0!==n||t in e)||Gn(e,t,n)}function qn(e,t,n){var r=e[t];Ee.call(e,t)&&Ma(r,n)&&(void 0!==n||t in e)||Gn(e,t,n)}function Bn(e,t){for(var n=e.length;n--;)if(Ma(e[n][0],t))return n;return-1}function Wn(e,t,n,r){return Jn(e,(function(e,i,o){t(r,e,n(e),o)})),r}function Hn(e,t){return e&&gi(t,yu(t),e)}function Gn(e,t,n){"__proto__"==t&&$t?$t(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function $n(e,t){for(var n=-1,i=t.length,o=r(i),a=null==e;++n<i;)o[n]=a?void 0:du(e,t[n]);return o}function Yn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Xn(e,t,n,r,i,o){var a,u=1&t,c=2&t,h=4&t;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!Ua(e))return e;var x=Ta(e);if(x){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ee.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!u)return vi(e,a)}else{var N=eo(e),I=N==d||N==p;if(Ra(e))return ci(e,u);if(N==m||N==s||I&&!i){if(a=c||I?{}:no(e),!u)return c?function(e,t){return gi(e,Ji(e),t)}(e,function(e,t){return e&&gi(t,_u(t),e)}(a,e)):function(e,t){return gi(e,Qi(e),t)}(e,Hn(a,e))}else{if(!ze[N])return i?e:{};a=function(e,t,n){var r,i=e.constructor;switch(t){case k:return li(e);case l:case f:return new i(+e);case E:return function(e,t){var n=t?li(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case S:case j:case M:case O:case A:case C:case"[object Uint8ClampedArray]":case T:case L:return fi(e,n);case v:return new i;case g:case b:return new i(e);case y:return function(e){var t=new e.constructor(e.source,re.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return new i;case w:return r=e,Sn?ve(Sn.call(r)):{}}}(e,N,u)}}o||(o=new Dn);var R=o.get(e);if(R)return R;o.set(e,a),$a(e)?e.forEach((function(r){a.add(Xn(r,t,n,r,e,o))})):Ba(e)&&e.forEach((function(r,i){a.set(i,Xn(r,t,n,i,e,o))}));var D=x?void 0:(h?c?Wi:Bi:c?_u:yu)(e);return ot(D||e,(function(r,i){D&&(r=e[i=r]),qn(a,i,Xn(r,t,n,i,e,o))})),a}function Zn(e,t,n){var r=n.length;if(null==e)return!r;for(e=ve(e);r--;){var i=n[r],o=t[i],a=e[i];if(void 0===a&&!(i in e)||!o(a))return!1}return!0}function Kn(e,t,n){if("function"!=typeof e)throw new ye(o);return yo((function(){e.apply(void 0,n)}),t)}function Qn(e,t,n,r){var i=-1,o=ct,a=!0,u=e.length,s=[],c=t.length;if(!u)return s;n&&(t=ft(t,Ot(n))),r?(o=lt,a=!1):t.length>=200&&(o=Ct,a=!1,t=new Rn(t));e:for(;++i<u;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f==f){for(var h=c;h--;)if(t[h]===f)continue e;s.push(l)}else o(t,f,r)||s.push(l)}return s}Mn.templateSettings={escape:V,evaluate:U,interpolate:q,variable:"",imports:{_:Mn}},Mn.prototype=An.prototype,Mn.prototype.constructor=Mn,Cn.prototype=On(An.prototype),Cn.prototype.constructor=Cn,Tn.prototype=On(An.prototype),Tn.prototype.constructor=Tn,Ln.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},Ln.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ln.prototype.get=function(e){var t=this.__data__;if(gn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Ee.call(t,e)?t[e]:void 0},Ln.prototype.has=function(e){var t=this.__data__;return gn?void 0!==t[e]:Ee.call(t,e)},Ln.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=gn&&void 0===t?"__lodash_hash_undefined__":t,this},Nn.prototype.clear=function(){this.__data__=[],this.size=0},Nn.prototype.delete=function(e){var t=this.__data__,n=Bn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ze.call(t,n,1),--this.size,!0)},Nn.prototype.get=function(e){var t=this.__data__,n=Bn(t,e);return n<0?void 0:t[n][1]},Nn.prototype.has=function(e){return Bn(this.__data__,e)>-1},Nn.prototype.set=function(e,t){var n=this.__data__,r=Bn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},In.prototype.clear=function(){this.size=0,this.__data__={hash:new Ln,map:new(hn||Nn),string:new Ln}},In.prototype.delete=function(e){var t=Xi(this,e).delete(e);return this.size-=t?1:0,t},In.prototype.get=function(e){return Xi(this,e).get(e)},In.prototype.has=function(e){return Xi(this,e).has(e)},In.prototype.set=function(e,t){var n=Xi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Rn.prototype.add=Rn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Rn.prototype.has=function(e){return this.__data__.has(e)},Dn.prototype.clear=function(){this.__data__=new Nn,this.size=0},Dn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Dn.prototype.get=function(e){return this.__data__.get(e)},Dn.prototype.has=function(e){return this.__data__.has(e)},Dn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Nn){var r=n.__data__;if(!hn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new In(r)}return n.set(e,t),this.size=n.size,this};var Jn=_i(ur),er=_i(sr,!0);function tr(e,t){var n=!0;return Jn(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function nr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(void 0===u?a==a&&!Xa(a):n(a,u)))var u=a,s=o}return s}function rr(e,t){var n=[];return Jn(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function ir(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=ro),i||(i=[]);++o<a;){var u=e[o];t>0&&n(u)?t>1?ir(u,t-1,n,r,i):ht(i,u):r||(i[i.length]=u)}return i}var or=bi(),ar=bi(!0);function ur(e,t){return e&&or(e,t,yu)}function sr(e,t){return e&&ar(e,t,yu)}function cr(e,t){return st(t,(function(t){return Pa(e[t])}))}function lr(e,t){for(var n=0,r=(t=oi(t,e)).length;null!=e&&n<r;)e=e[Eo(t[n++])];return n&&n==r?e:void 0}function fr(e,t,n){var r=t(e);return Ta(e)?r:ht(r,n(e))}function hr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Gt&&Gt in ve(e)?function(e){var t=Ee.call(e,Gt),n=e[Gt];try{e[Gt]=void 0;var r=!0}catch(e){}var i=Me.call(e);return r&&(t?e[Gt]=n:delete e[Gt]),i}(e):function(e){return Me.call(e)}(e)}function dr(e,t){return e>t}function pr(e,t){return null!=e&&Ee.call(e,t)}function vr(e,t){return null!=e&&t in ve(e)}function gr(e,t,n){for(var i=n?lt:ct,o=e[0].length,a=e.length,u=a,s=r(a),c=1/0,l=[];u--;){var f=e[u];u&&t&&(f=ft(f,Ot(t))),c=an(f.length,c),s[u]=!n&&(t||o>=120&&f.length>=120)?new Rn(u&&f):void 0}f=e[0];var h=-1,d=s[0];e:for(;++h<o&&l.length<c;){var p=f[h],v=t?t(p):p;if(p=n||0!==p?p:0,!(d?Ct(d,v):i(l,v,n))){for(u=a;--u;){var g=s[u];if(!(g?Ct(g,v):i(e[u],v,n)))continue e}d&&d.push(v),l.push(p)}}return l}function mr(e,t,n){var r=null==(e=po(e,t=oi(t,e)))?e:e[Eo(Fo(t))];return null==r?void 0:rt(r,e,n)}function yr(e){return qa(e)&&hr(e)==s}function _r(e,t,n,r,i){return e===t||(null==e||null==t||!qa(e)&&!qa(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var a=Ta(e),u=Ta(t),d=a?c:eo(e),p=u?c:eo(t),x=(d=d==s?m:d)==m,S=(p=p==s?m:p)==m,j=d==p;if(j&&Ra(e)){if(!Ra(t))return!1;a=!0,x=!1}if(j&&!x)return o||(o=new Dn),a||Za(e)?Ui(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case k:return!(e.byteLength!=t.byteLength||!o(new Be(e),new Be(t)));case l:case f:case g:return Ma(+e,+t);case h:return e.name==t.name&&e.message==t.message;case y:case b:return e==t+"";case v:var u=Pt;case _:var s=1&r;if(u||(u=Ut),e.size!=t.size&&!s)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var d=Ui(u(e),u(t),r,i,o,a);return a.delete(e),d;case w:if(Sn)return Sn.call(e)==Sn.call(t)}return!1}(e,t,d,n,r,i,o);if(!(1&n)){var M=x&&Ee.call(e,"__wrapped__"),O=S&&Ee.call(t,"__wrapped__");if(M||O){var A=M?e.value():e,C=O?t.value():t;return o||(o=new Dn),i(A,C,n,r,o)}}return!!j&&(o||(o=new Dn),function(e,t,n,r,i,o){var a=1&n,u=Bi(e),s=u.length;if(s!=Bi(t).length&&!a)return!1;for(var c=s;c--;){var l=u[c];if(!(a?l in t:Ee.call(t,l)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var h=!0;o.set(e,t),o.set(t,e);for(var d=a;++c<s;){var p=e[l=u[c]],v=t[l];if(r)var g=a?r(v,p,l,t,e,o):r(p,v,l,e,t,o);if(!(void 0===g?p===v||i(p,v,n,r,o):g)){h=!1;break}d||(d="constructor"==l)}if(h&&!d){var m=e.constructor,y=t.constructor;m!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y)&&(h=!1)}return o.delete(e),o.delete(t),h}(e,t,n,r,i,o))}(e,t,n,r,_r,i))}function br(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=ve(e);i--;){var u=n[i];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<o;){var s=(u=n[i])[0],c=e[s],l=u[1];if(a&&u[2]){if(void 0===c&&!(s in e))return!1}else{var f=new Dn;if(r)var h=r(c,l,s,e,t,f);if(!(void 0===h?_r(l,c,3,r,f):h))return!1}}return!0}function wr(e){return!(!Ua(e)||(t=e,je&&je in t))&&(Pa(e)?Le:ae).test(So(e));var t}function xr(e){return"function"==typeof e?e:null==e?Wu:"object"==typeof e?Ta(e)?Mr(e[0],e[1]):jr(e):Ju(e)}function kr(e){if(!co(e))return rn(e);var t=[];for(var n in ve(e))Ee.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Er(e,t){return e<t}function Sr(e,t){var n=-1,i=Na(e)?r(e.length):[];return Jn(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function jr(e){var t=Zi(e);return 1==t.length&&t[0][2]?fo(t[0][0],t[0][1]):function(n){return n===e||br(n,e,t)}}function Mr(e,t){return ao(e)&&lo(t)?fo(Eo(e),t):function(n){var r=du(n,e);return void 0===r&&r===t?pu(n,e):_r(t,r,3)}}function Or(e,t,n,r,i){e!==t&&or(t,(function(o,a){if(i||(i=new Dn),Ua(o))!function(e,t,n,r,i,o,a){var u=go(e,n),s=go(t,n),c=a.get(s);if(c)Un(e,n,c);else{var l=o?o(u,s,n+"",e,t,a):void 0,f=void 0===l;if(f){var h=Ta(s),d=!h&&Ra(s),p=!h&&!d&&Za(s);l=s,h||d||p?Ta(u)?l=u:Ia(u)?l=vi(u):d?(f=!1,l=ci(s,!0)):p?(f=!1,l=fi(s,!0)):l=[]:Ha(s)||Ca(s)?(l=u,Ca(u)?l=iu(u):Ua(u)&&!Pa(u)||(l=no(s))):f=!1}f&&(a.set(s,l),i(l,s,r,o,a),a.delete(s)),Un(e,n,l)}}(e,t,a,n,Or,r,i);else{var u=r?r(go(e,a),o,a+"",e,t,i):void 0;void 0===u&&(u=o),Un(e,a,u)}}),_u)}function Ar(e,t){var n=e.length;if(n)return io(t+=t<0?n:0,n)?e[t]:void 0}function Cr(e,t,n){var r=-1;return t=ft(t.length?t:[Wu],Ot(Yi())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Sr(e,(function(e,n,i){return{criteria:ft(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,u=n.length;++r<a;){var s=hi(i[r],o[r]);if(s)return r>=u?s:s*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Tr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],u=lr(e,a);n(u,a)&&zr(o,oi(a,e),u)}return o}function Lr(e,t,n,r){var i=r?bt:_t,o=-1,a=t.length,u=e;for(e===t&&(t=vi(t)),n&&(u=ft(e,Ot(n)));++o<a;)for(var s=0,c=t[o],l=n?n(c):c;(s=i(u,l,s,r))>-1;)u!==e&&Ze.call(u,s,1),Ze.call(e,s,1);return e}function Nr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;io(i)?Ze.call(e,i,1):Kr(e,i)}}return e}function Ir(e,t){return e+Qt(cn()*(t-e+1))}function Rr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Qt(t/2))&&(e+=e)}while(t);return n}function Dr(e,t){return _o(ho(e,t,Wu),e+"")}function Fr(e){return Pn(Mu(e))}function Pr(e,t){var n=Mu(e);return xo(n,Yn(t,0,n.length))}function zr(e,t,n,r){if(!Ua(e))return e;for(var i=-1,o=(t=oi(t,e)).length,a=o-1,u=e;null!=u&&++i<o;){var s=Eo(t[i]),c=n;if(i!=a){var l=u[s];void 0===(c=r?r(l,s,u):void 0)&&(c=Ua(l)?l:io(t[i+1])?[]:{})}qn(u,s,c),u=u[s]}return e}var Vr=mn?function(e,t){return mn.set(e,t),e}:Wu,Ur=$t?function(e,t){return $t(e,"toString",{configurable:!0,enumerable:!1,value:Uu(t),writable:!0})}:Wu;function qr(e){return xo(Mu(e))}function Br(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function Wr(e,t){var n;return Jn(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function Hr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!Xa(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Gr(e,t,Wu,n)}function Gr(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,a=t!=t,u=null===t,s=Xa(t),c=void 0===t;i<o;){var l=Qt((i+o)/2),f=n(e[l]),h=void 0!==f,d=null===f,p=f==f,v=Xa(f);if(a)var g=r||p;else g=c?p&&(r||h):u?p&&h&&(r||!d):s?p&&h&&!d&&(r||!v):!d&&!v&&(r?f<=t:f<t);g?i=l+1:o=l}return an(o,4294967294)}function $r(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],u=t?t(a):a;if(!n||!Ma(u,s)){var s=u;o[i++]=0===a?0:a}}return o}function Yr(e){return"number"==typeof e?e:Xa(e)?NaN:+e}function Xr(e){if("string"==typeof e)return e;if(Ta(e))return ft(e,Xr)+"";if(Xa(e))return jn?jn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Zr(e,t,n){var r=-1,i=ct,o=e.length,a=!0,u=[],s=u;if(n)a=!1,i=lt;else if(o>=200){var c=t?null:Ri(e);if(c)return Ut(c);a=!1,i=Ct,s=new Rn}else s=t?[]:u;e:for(;++r<o;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var h=s.length;h--;)if(s[h]===f)continue e;t&&s.push(f),u.push(l)}else i(s,f,n)||(s!==u&&s.push(f),u.push(l))}return u}function Kr(e,t){return null==(e=po(e,t=oi(t,e)))||delete e[Eo(Fo(t))]}function Qr(e,t,n,r){return zr(e,t,n(lr(e,t)),r)}function Jr(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Br(e,r?0:o,r?o+1:i):Br(e,r?o+1:0,r?i:o)}function ei(e,t){var n=e;return n instanceof Tn&&(n=n.value()),dt(t,(function(e,t){return t.func.apply(t.thisArg,ht([e],t.args))}),n)}function ti(e,t,n){var i=e.length;if(i<2)return i?Zr(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var u=e[o],s=-1;++s<i;)s!=o&&(a[o]=Qn(a[o]||u,e[s],t,n));return Zr(ir(a,1),t,n)}function ni(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var u=r<o?t[r]:void 0;n(a,e[r],u)}return a}function ri(e){return Ia(e)?e:[]}function ii(e){return"function"==typeof e?e:Wu}function oi(e,t){return Ta(e)?e:ao(e,t)?[e]:ko(ou(e))}var ai=Dr;function ui(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Br(e,t,n)}var si=Yt||function(e){return He.clearTimeout(e)};function ci(e,t){if(t)return e.slice();var n=e.length,r=We?We(n):new e.constructor(n);return e.copy(r),r}function li(e){var t=new e.constructor(e.byteLength);return new Be(t).set(new Be(e)),t}function fi(e,t){var n=t?li(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function hi(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=Xa(e),a=void 0!==t,u=null===t,s=t==t,c=Xa(t);if(!u&&!c&&!o&&e>t||o&&a&&s&&!u&&!c||r&&a&&s||!n&&s||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||u&&n&&i||!a&&i||!s)return-1}return 0}function di(e,t,n,i){for(var o=-1,a=e.length,u=n.length,s=-1,c=t.length,l=on(a-u,0),f=r(c+l),h=!i;++s<c;)f[s]=t[s];for(;++o<u;)(h||o<a)&&(f[n[o]]=e[o]);for(;l--;)f[s++]=e[o++];return f}function pi(e,t,n,i){for(var o=-1,a=e.length,u=-1,s=n.length,c=-1,l=t.length,f=on(a-s,0),h=r(f+l),d=!i;++o<f;)h[o]=e[o];for(var p=o;++c<l;)h[p+c]=t[c];for(;++u<s;)(d||o<a)&&(h[p+n[u]]=e[o++]);return h}function vi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function gi(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var u=t[o],s=r?r(n[u],e[u],u,n,e):void 0;void 0===s&&(s=e[u]),i?Gn(n,u,s):qn(n,u,s)}return n}function mi(e,t){return function(n,r){var i=Ta(n)?it:Wn,o=t?t():{};return i(n,e,Yi(r,2),o)}}function yi(e){return Dr((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&oo(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=ve(t);++r<i;){var u=n[r];u&&e(t,u,r,o)}return t}))}function _i(e,t){return function(n,r){if(null==n)return n;if(!Na(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=ve(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function bi(e){return function(t,n,r){for(var i=-1,o=ve(t),a=r(t),u=a.length;u--;){var s=a[e?u:++i];if(!1===n(o[s],s,o))break}return t}}function wi(e){return function(t){var n=Ft(t=ou(t))?Bt(t):void 0,r=n?n[0]:t.charAt(0),i=n?ui(n,1).join(""):t.slice(1);return r[e]()+i}}function xi(e){return function(t){return dt(Pu(Cu(t).replace(Ce,"")),e,"")}}function ki(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=On(e.prototype),r=e.apply(n,t);return Ua(r)?r:n}}function Ei(e){return function(t,n,r){var i=ve(t);if(!Na(t)){var o=Yi(n,3);t=yu(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:void 0}}function Si(e){return qi((function(t){var n=t.length,r=n,i=Cn.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new ye(o);if(i&&!u&&"wrapper"==Gi(a))var u=new Cn([],!0)}for(r=u?r:n;++r<n;){var s=Gi(a=t[r]),c="wrapper"==s?Hi(a):void 0;u=c&&uo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[Gi(c[0])].apply(u,c[3]):1==a.length&&uo(a)?u[s]():u.thru(a)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Ta(r))return u.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function ji(e,t,n,i,o,a,u,s,c,l){var f=128&t,h=1&t,d=2&t,p=24&t,v=512&t,g=d?void 0:ki(e);return function m(){for(var y=arguments.length,_=r(y),b=y;b--;)_[b]=arguments[b];if(p)var w=$i(m),x=Nt(_,w);if(i&&(_=di(_,i,o,p)),a&&(_=pi(_,a,u,p)),y-=x,p&&y<l){var k=Vt(_,w);return Ni(e,t,ji,m.placeholder,n,_,k,s,c,l-y)}var E=h?n:this,S=d?E[e]:e;return y=_.length,s?_=vo(_,s):v&&y>1&&_.reverse(),f&&c<y&&(_.length=c),this&&this!==He&&this instanceof m&&(S=g||ki(S)),S.apply(E,_)}}function Mi(e,t){return function(n,r){return function(e,t,n,r){return ur(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Oi(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Xr(n),r=Xr(r)):(n=Yr(n),r=Yr(r)),i=e(n,r)}return i}}function Ai(e){return qi((function(t){return t=ft(t,Ot(Yi())),Dr((function(n){var r=this;return e(t,(function(e){return rt(e,r,n)}))}))}))}function Ci(e,t){var n=(t=void 0===t?" ":Xr(t)).length;if(n<2)return n?Rr(t,e):t;var r=Rr(t,Kt(e/qt(t)));return Ft(t)?ui(Bt(r),0,e).join(""):r.slice(0,e)}function Ti(e){return function(t,n,i){return i&&"number"!=typeof i&&oo(t,n,i)&&(n=i=void 0),t=eu(t),void 0===n?(n=t,t=0):n=eu(n),function(e,t,n,i){for(var o=-1,a=on(Kt((t-e)/(n||1)),0),u=r(a);a--;)u[i?a:++o]=e,e+=n;return u}(t,n,i=void 0===i?t<n?1:-1:eu(i),e)}}function Li(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ru(t),n=ru(n)),e(t,n)}}function Ni(e,t,n,r,i,o,a,u,s,c){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var f=[e,t,i,l?o:void 0,l?a:void 0,l?void 0:o,l?void 0:a,u,s,c],h=n.apply(void 0,f);return uo(e)&&mo(h,f),h.placeholder=r,bo(h,e,t)}function Ii(e){var t=pe[e];return function(e,n){if(e=ru(e),(n=null==n?0:an(tu(n),292))&&tn(e)){var r=(ou(e)+"e").split("e");return+((r=(ou(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ri=pn&&1/Ut(new pn([,-0]))[1]==1/0?function(e){return new pn(e)}:Xu;function Di(e){return function(t){var n=eo(t);return n==v?Pt(t):n==_?function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}(t):function(e,t){return ft(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Fi(e,t,n,i,u,s,c,l){var f=2&t;if(!f&&"function"!=typeof e)throw new ye(o);var h=i?i.length:0;if(h||(t&=-97,i=u=void 0),c=void 0===c?c:on(tu(c),0),l=void 0===l?l:tu(l),h-=u?u.length:0,64&t){var d=i,p=u;i=u=void 0}var v=f?void 0:Hi(e),g=[e,t,n,i,u,d,p,s,c,l];if(v&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,u=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!u)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var s=t[3];if(s){var c=e[3];e[3]=c?di(c,s,t[4]):s,e[4]=c?Vt(e[3],a):t[4]}(s=t[5])&&(c=e[5],e[5]=c?pi(c,s,t[6]):s,e[6]=c?Vt(e[5],a):t[6]),(s=t[7])&&(e[7]=s),128&r&&(e[8]=null==e[8]?t[8]:an(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(g,v),e=g[0],t=g[1],n=g[2],i=g[3],u=g[4],!(l=g[9]=void 0===g[9]?f?0:e.length:on(g[9]-h,0))&&24&t&&(t&=-25),t&&1!=t)m=8==t||16==t?function(e,t,n){var i=ki(e);return function o(){for(var a=arguments.length,u=r(a),s=a,c=$i(o);s--;)u[s]=arguments[s];var l=a<3&&u[0]!==c&&u[a-1]!==c?[]:Vt(u,c);if((a-=l.length)<n)return Ni(e,t,ji,o.placeholder,void 0,u,l,void 0,void 0,n-a);var f=this&&this!==He&&this instanceof o?i:e;return rt(f,this,u)}}(e,t,l):32!=t&&33!=t||u.length?ji.apply(void 0,g):function(e,t,n,i){var o=1&t,a=ki(e);return function t(){for(var u=-1,s=arguments.length,c=-1,l=i.length,f=r(l+s),h=this&&this!==He&&this instanceof t?a:e;++c<l;)f[c]=i[c];for(;s--;)f[c++]=arguments[++u];return rt(h,o?n:this,f)}}(e,t,n,i);else var m=function(e,t,n){var r=1&t,i=ki(e);return function t(){var o=this&&this!==He&&this instanceof t?i:e;return o.apply(r?n:this,arguments)}}(e,t,n);return bo((v?Vr:mo)(m,g),e,t)}function Pi(e,t,n,r){return void 0===e||Ma(e,we[n])&&!Ee.call(r,n)?t:e}function zi(e,t,n,r,i,o){return Ua(e)&&Ua(t)&&(o.set(t,e),Or(e,t,void 0,zi,o),o.delete(t)),e}function Vi(e){return Ha(e)?void 0:e}function Ui(e,t,n,r,i,o){var a=1&n,u=e.length,s=t.length;if(u!=s&&!(a&&s>u))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var l=-1,f=!0,h=2&n?new Rn:void 0;for(o.set(e,t),o.set(t,e);++l<u;){var d=e[l],p=t[l];if(r)var v=a?r(p,d,l,t,e,o):r(d,p,l,e,t,o);if(void 0!==v){if(v)continue;f=!1;break}if(h){if(!vt(t,(function(e,t){if(!Ct(h,t)&&(d===e||i(d,e,n,r,o)))return h.push(t)}))){f=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function qi(e){return _o(ho(e,void 0,Lo),e+"")}function Bi(e){return fr(e,yu,Qi)}function Wi(e){return fr(e,_u,Ji)}var Hi=mn?function(e){return mn.get(e)}:Xu;function Gi(e){for(var t=e.name+"",n=yn[t],r=Ee.call(yn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function $i(e){return(Ee.call(Mn,"placeholder")?Mn:e).placeholder}function Yi(){var e=Mn.iteratee||Hu;return e=e===Hu?xr:e,arguments.length?e(arguments[0],arguments[1]):e}function Xi(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Zi(e){for(var t=yu(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,lo(i)]}return t}function Ki(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return wr(n)?n:void 0}var Qi=Jt?function(e){return null==e?[]:(e=ve(e),st(Jt(e),(function(t){return Xe.call(e,t)})))}:ns,Ji=Jt?function(e){for(var t=[];e;)ht(t,Qi(e)),e=Ge(e);return t}:ns,eo=hr;function to(e,t,n){for(var r=-1,i=(t=oi(t,e)).length,o=!1;++r<i;){var a=Eo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Va(i)&&io(a,i)&&(Ta(e)||Ca(e))}function no(e){return"function"!=typeof e.constructor||co(e)?{}:On(Ge(e))}function ro(e){return Ta(e)||Ca(e)||!!(gt&&e&&e[gt])}function io(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&se.test(e))&&e>-1&&e%1==0&&e<t}function oo(e,t,n){if(!Ua(n))return!1;var r=typeof t;return!!("number"==r?Na(n)&&io(t,n.length):"string"==r&&t in n)&&Ma(n[t],e)}function ao(e,t){if(Ta(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Xa(e))||W.test(e)||!B.test(e)||null!=t&&e in ve(t)}function uo(e){var t=Gi(e),n=Mn[t];if("function"!=typeof n||!(t in Tn.prototype))return!1;if(e===n)return!0;var r=Hi(n);return!!r&&e===r[0]}(fn&&eo(new fn(new ArrayBuffer(1)))!=E||hn&&eo(new hn)!=v||dn&&"[object Promise]"!=eo(dn.resolve())||pn&&eo(new pn)!=_||vn&&eo(new vn)!=x)&&(eo=function(e){var t=hr(e),n=t==m?e.constructor:void 0,r=n?So(n):"";if(r)switch(r){case _n:return E;case bn:return v;case wn:return"[object Promise]";case xn:return _;case kn:return x}return t});var so=xe?Pa:rs;function co(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||we)}function lo(e){return e==e&&!Ua(e)}function fo(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in ve(n))}}function ho(e,t,n){return t=on(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=on(i.length-t,0),u=r(a);++o<a;)u[o]=i[t+o];o=-1;for(var s=r(t+1);++o<t;)s[o]=i[o];return s[t]=n(u),rt(e,this,s)}}function po(e,t){return t.length<2?e:lr(e,Br(t,0,-1))}function vo(e,t){for(var n=e.length,r=an(t.length,n),i=vi(e);r--;){var o=t[r];e[r]=io(o,n)?i[o]:void 0}return e}function go(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var mo=wo(Vr),yo=Zt||function(e,t){return He.setTimeout(e,t)},_o=wo(Ur);function bo(e,t,n){var r=t+"";return _o(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(K,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return ot(u,(function(n){var r="_."+n[0];t&n[1]&&!ct(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(Q);return t?t[1].split(J):[]}(r),n)))}function wo(e){var t=0,n=0;return function(){var r=un(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function xo(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=Ir(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}var ko=function(e){var t=wa((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(H,(function(e,n,r,i){t.push(r?i.replace(te,"$1"):n||e)})),t}),(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}();function Eo(e){if("string"==typeof e||Xa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function So(e){if(null!=e){try{return ke.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function jo(e){if(e instanceof Tn)return e.clone();var t=new Cn(e.__wrapped__,e.__chain__);return t.__actions__=vi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Mo=Dr((function(e,t){return Ia(e)?Qn(e,ir(t,1,Ia,!0)):[]})),Oo=Dr((function(e,t){var n=Fo(t);return Ia(n)&&(n=void 0),Ia(e)?Qn(e,ir(t,1,Ia,!0),Yi(n,2)):[]})),Ao=Dr((function(e,t){var n=Fo(t);return Ia(n)&&(n=void 0),Ia(e)?Qn(e,ir(t,1,Ia,!0),void 0,n):[]}));function Co(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:tu(n);return i<0&&(i=on(r+i,0)),yt(e,Yi(t,3),i)}function To(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=tu(n),i=n<0?on(r+i,0):an(i,r-1)),yt(e,Yi(t,3),i,!0)}function Lo(e){return null!=e&&e.length?ir(e,1):[]}function No(e){return e&&e.length?e[0]:void 0}var Io=Dr((function(e){var t=ft(e,ri);return t.length&&t[0]===e[0]?gr(t):[]})),Ro=Dr((function(e){var t=Fo(e),n=ft(e,ri);return t===Fo(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?gr(n,Yi(t,2)):[]})),Do=Dr((function(e){var t=Fo(e),n=ft(e,ri);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?gr(n,void 0,t):[]}));function Fo(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Po=Dr(zo);function zo(e,t){return e&&e.length&&t&&t.length?Lr(e,t):e}var Vo=qi((function(e,t){var n=null==e?0:e.length,r=$n(e,t);return Nr(e,ft(t,(function(e){return io(e,n)?+e:e})).sort(hi)),r}));function Uo(e){return null==e?e:ln.call(e)}var qo=Dr((function(e){return Zr(ir(e,1,Ia,!0))})),Bo=Dr((function(e){var t=Fo(e);return Ia(t)&&(t=void 0),Zr(ir(e,1,Ia,!0),Yi(t,2))})),Wo=Dr((function(e){var t=Fo(e);return t="function"==typeof t?t:void 0,Zr(ir(e,1,Ia,!0),void 0,t)}));function Ho(e){if(!e||!e.length)return[];var t=0;return e=st(e,(function(e){if(Ia(e))return t=on(e.length,t),!0})),Mt(t,(function(t){return ft(e,kt(t))}))}function Go(e,t){if(!e||!e.length)return[];var n=Ho(e);return null==t?n:ft(n,(function(e){return rt(t,void 0,e)}))}var $o=Dr((function(e,t){return Ia(e)?Qn(e,t):[]})),Yo=Dr((function(e){return ti(st(e,Ia))})),Xo=Dr((function(e){var t=Fo(e);return Ia(t)&&(t=void 0),ti(st(e,Ia),Yi(t,2))})),Zo=Dr((function(e){var t=Fo(e);return t="function"==typeof t?t:void 0,ti(st(e,Ia),void 0,t)})),Ko=Dr(Ho),Qo=Dr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Go(e,n)}));function Jo(e){var t=Mn(e);return t.__chain__=!0,t}function ea(e,t){return t(e)}var ta=qi((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return $n(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Tn&&io(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ea,args:[i],thisArg:void 0}),new Cn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)})),na=mi((function(e,t,n){Ee.call(e,n)?++e[n]:Gn(e,n,1)})),ra=Ei(Co),ia=Ei(To);function oa(e,t){return(Ta(e)?ot:Jn)(e,Yi(t,3))}function aa(e,t){return(Ta(e)?at:er)(e,Yi(t,3))}var ua=mi((function(e,t,n){Ee.call(e,n)?e[n].push(t):Gn(e,n,[t])})),sa=Dr((function(e,t,n){var i=-1,o="function"==typeof t,a=Na(e)?r(e.length):[];return Jn(e,(function(e){a[++i]=o?rt(t,e,n):mr(e,t,n)})),a})),ca=mi((function(e,t,n){Gn(e,n,t)}));function la(e,t){return(Ta(e)?ft:Sr)(e,Yi(t,3))}var fa=mi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),ha=Dr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&oo(e,t[0],t[1])?t=[]:n>2&&oo(t[0],t[1],t[2])&&(t=[t[0]]),Cr(e,ir(t,1),[])})),da=Xt||function(){return He.Date.now()};function pa(e,t,n){return t=n?void 0:t,Fi(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function va(e,t){var n;if("function"!=typeof t)throw new ye(o);return e=tu(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var ga=Dr((function(e,t,n){var r=1;if(n.length){var i=Vt(n,$i(ga));r|=32}return Fi(e,r,t,n,i)})),ma=Dr((function(e,t,n){var r=3;if(n.length){var i=Vt(n,$i(ma));r|=32}return Fi(t,r,e,n,i)}));function ya(e,t,n){var r,i,a,u,s,c,l=0,f=!1,h=!1,d=!0;if("function"!=typeof e)throw new ye(o);function p(t){var n=r,o=i;return r=i=void 0,l=t,u=e.apply(o,n)}function v(e){return l=e,s=yo(m,t),f?p(e):u}function g(e){var n=e-c;return void 0===c||n>=t||n<0||h&&e-l>=a}function m(){var e=da();if(g(e))return y(e);s=yo(m,function(e){var n=t-(e-c);return h?an(n,a-(e-l)):n}(e))}function y(e){return s=void 0,d&&r?p(e):(r=i=void 0,u)}function _(){var e=da(),n=g(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return v(c);if(h)return si(s),s=yo(m,t),p(c)}return void 0===s&&(s=yo(m,t)),u}return t=ru(t)||0,Ua(n)&&(f=!!n.leading,a=(h="maxWait"in n)?on(ru(n.maxWait)||0,t):a,d="trailing"in n?!!n.trailing:d),_.cancel=function(){void 0!==s&&si(s),l=0,r=c=i=s=void 0},_.flush=function(){return void 0===s?u:y(da())},_}var _a=Dr((function(e,t){return Kn(e,1,t)})),ba=Dr((function(e,t,n){return Kn(e,ru(t)||0,n)}));function wa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ye(o);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(wa.Cache||In),n}function xa(e){if("function"!=typeof e)throw new ye(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}wa.Cache=In;var ka=ai((function(e,t){var n=(t=1==t.length&&Ta(t[0])?ft(t[0],Ot(Yi())):ft(ir(t,1),Ot(Yi()))).length;return Dr((function(r){for(var i=-1,o=an(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return rt(e,this,r)}))})),Ea=Dr((function(e,t){return Fi(e,32,void 0,t,Vt(t,$i(Ea)))})),Sa=Dr((function(e,t){return Fi(e,64,void 0,t,Vt(t,$i(Sa)))})),ja=qi((function(e,t){return Fi(e,256,void 0,void 0,void 0,t)}));function Ma(e,t){return e===t||e!=e&&t!=t}var Oa=Li(dr),Aa=Li((function(e,t){return e>=t})),Ca=yr(function(){return arguments}())?yr:function(e){return qa(e)&&Ee.call(e,"callee")&&!Xe.call(e,"callee")},Ta=r.isArray,La=Ke?Ot(Ke):function(e){return qa(e)&&hr(e)==k};function Na(e){return null!=e&&Va(e.length)&&!Pa(e)}function Ia(e){return qa(e)&&Na(e)}var Ra=en||rs,Da=Qe?Ot(Qe):function(e){return qa(e)&&hr(e)==f};function Fa(e){if(!qa(e))return!1;var t=hr(e);return t==h||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Ha(e)}function Pa(e){if(!Ua(e))return!1;var t=hr(e);return t==d||t==p||"[object AsyncFunction]"==t||"[object Proxy]"==t}function za(e){return"number"==typeof e&&e==tu(e)}function Va(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ua(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function qa(e){return null!=e&&"object"==typeof e}var Ba=Je?Ot(Je):function(e){return qa(e)&&eo(e)==v};function Wa(e){return"number"==typeof e||qa(e)&&hr(e)==g}function Ha(e){if(!qa(e)||hr(e)!=m)return!1;var t=Ge(e);if(null===t)return!0;var n=Ee.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ke.call(n)==Oe}var Ga=et?Ot(et):function(e){return qa(e)&&hr(e)==y},$a=tt?Ot(tt):function(e){return qa(e)&&eo(e)==_};function Ya(e){return"string"==typeof e||!Ta(e)&&qa(e)&&hr(e)==b}function Xa(e){return"symbol"==typeof e||qa(e)&&hr(e)==w}var Za=nt?Ot(nt):function(e){return qa(e)&&Va(e.length)&&!!Pe[hr(e)]},Ka=Li(Er),Qa=Li((function(e,t){return e<=t}));function Ja(e){if(!e)return[];if(Na(e))return Ya(e)?Bt(e):vi(e);if(Et&&e[Et])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Et]());var t=eo(e);return(t==v?Pt:t==_?Ut:Mu)(e)}function eu(e){return e?(e=ru(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function tu(e){var t=eu(e),n=t%1;return t==t?n?t-n:t:0}function nu(e){return e?Yn(tu(e),0,4294967295):0}function ru(e){if("number"==typeof e)return e;if(Xa(e))return NaN;if(Ua(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ua(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Y,"");var n=oe.test(e);return n||ue.test(e)?qe(e.slice(2),n?2:8):ie.test(e)?NaN:+e}function iu(e){return gi(e,_u(e))}function ou(e){return null==e?"":Xr(e)}var au=yi((function(e,t){if(co(t)||Na(t))gi(t,yu(t),e);else for(var n in t)Ee.call(t,n)&&qn(e,n,t[n])})),uu=yi((function(e,t){gi(t,_u(t),e)})),su=yi((function(e,t,n,r){gi(t,_u(t),e,r)})),cu=yi((function(e,t,n,r){gi(t,yu(t),e,r)})),lu=qi($n),fu=Dr((function(e,t){e=ve(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&oo(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=_u(o),u=-1,s=a.length;++u<s;){var c=a[u],l=e[c];(void 0===l||Ma(l,we[c])&&!Ee.call(e,c))&&(e[c]=o[c])}return e})),hu=Dr((function(e){return e.push(void 0,zi),rt(wu,void 0,e)}));function du(e,t,n){var r=null==e?void 0:lr(e,t);return void 0===r?n:r}function pu(e,t){return null!=e&&to(e,t,vr)}var vu=Mi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Me.call(t)),e[t]=n}),Uu(Wu)),gu=Mi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Me.call(t)),Ee.call(e,t)?e[t].push(n):e[t]=[n]}),Yi),mu=Dr(mr);function yu(e){return Na(e)?Fn(e):kr(e)}function _u(e){return Na(e)?Fn(e,!0):function(e){if(!Ua(e))return function(e){var t=[];if(null!=e)for(var n in ve(e))t.push(n);return t}(e);var t=co(e),n=[];for(var r in e)("constructor"!=r||!t&&Ee.call(e,r))&&n.push(r);return n}(e)}var bu=yi((function(e,t,n){Or(e,t,n)})),wu=yi((function(e,t,n,r){Or(e,t,n,r)})),xu=qi((function(e,t){var n={};if(null==e)return n;var r=!1;t=ft(t,(function(t){return t=oi(t,e),r||(r=t.length>1),t})),gi(e,Wi(e),n),r&&(n=Xn(n,7,Vi));for(var i=t.length;i--;)Kr(n,t[i]);return n})),ku=qi((function(e,t){return null==e?{}:function(e,t){return Tr(e,t,(function(t,n){return pu(e,n)}))}(e,t)}));function Eu(e,t){if(null==e)return{};var n=ft(Wi(e),(function(e){return[e]}));return t=Yi(t),Tr(e,n,(function(e,n){return t(e,n[0])}))}var Su=Di(yu),ju=Di(_u);function Mu(e){return null==e?[]:At(e,yu(e))}var Ou=xi((function(e,t,n){return t=t.toLowerCase(),e+(n?Au(t):t)}));function Au(e){return Fu(ou(e).toLowerCase())}function Cu(e){return(e=ou(e))&&e.replace(ce,It).replace(Te,"")}var Tu=xi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Lu=xi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Nu=wi("toLowerCase"),Iu=xi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Ru=xi((function(e,t,n){return e+(n?" ":"")+Fu(t)})),Du=xi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Fu=wi("toUpperCase");function Pu(e,t,n){return e=ou(e),void 0===(t=n?void 0:t)?function(e){return Re.test(e)}(e)?function(e){return e.match(Ne)||[]}(e):function(e){return e.match(ee)||[]}(e):e.match(t)||[]}var zu=Dr((function(e,t){try{return rt(e,void 0,t)}catch(e){return Fa(e)?e:new he(e)}})),Vu=qi((function(e,t){return ot(t,(function(t){t=Eo(t),Gn(e,t,ga(e[t],e))})),e}));function Uu(e){return function(){return e}}var qu=Si(),Bu=Si(!0);function Wu(e){return e}function Hu(e){return xr("function"==typeof e?e:Xn(e,1))}var Gu=Dr((function(e,t){return function(n){return mr(n,e,t)}})),$u=Dr((function(e,t){return function(n){return mr(e,n,t)}}));function Yu(e,t,n){var r=yu(t),i=cr(t,r);null!=n||Ua(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=cr(t,yu(t)));var o=!(Ua(n)&&"chain"in n&&!n.chain),a=Pa(e);return ot(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=vi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,ht([this.value()],arguments))})})),e}function Xu(){}var Zu=Ai(ft),Ku=Ai(ut),Qu=Ai(vt);function Ju(e){return ao(e)?kt(Eo(e)):function(e){return function(t){return lr(t,e)}}(e)}var es=Ti(),ts=Ti(!0);function ns(){return[]}function rs(){return!1}var is,os=Oi((function(e,t){return e+t}),0),as=Ii("ceil"),us=Oi((function(e,t){return e/t}),1),ss=Ii("floor"),cs=Oi((function(e,t){return e*t}),1),ls=Ii("round"),fs=Oi((function(e,t){return e-t}),0);return Mn.after=function(e,t){if("function"!=typeof t)throw new ye(o);return e=tu(e),function(){if(--e<1)return t.apply(this,arguments)}},Mn.ary=pa,Mn.assign=au,Mn.assignIn=uu,Mn.assignInWith=su,Mn.assignWith=cu,Mn.at=lu,Mn.before=va,Mn.bind=ga,Mn.bindAll=Vu,Mn.bindKey=ma,Mn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ta(e)?e:[e]},Mn.chain=Jo,Mn.chunk=function(e,t,n){t=(n?oo(e,t,n):void 0===t)?1:on(tu(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,u=r(Kt(i/t));o<i;)u[a++]=Br(e,o,o+=t);return u},Mn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Mn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return ht(Ta(n)?vi(n):[n],ir(t,1))},Mn.cond=function(e){var t=null==e?0:e.length,n=Yi();return e=t?ft(e,(function(e){if("function"!=typeof e[1])throw new ye(o);return[n(e[0]),e[1]]})):[],Dr((function(n){for(var r=-1;++r<t;){var i=e[r];if(rt(i[0],this,n))return rt(i[1],this,n)}}))},Mn.conforms=function(e){return function(e){var t=yu(e);return function(n){return Zn(n,e,t)}}(Xn(e,1))},Mn.constant=Uu,Mn.countBy=na,Mn.create=function(e,t){var n=On(e);return null==t?n:Hn(n,t)},Mn.curry=function e(t,n,r){var i=Fi(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Mn.curryRight=function e(t,n,r){var i=Fi(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Mn.debounce=ya,Mn.defaults=fu,Mn.defaultsDeep=hu,Mn.defer=_a,Mn.delay=ba,Mn.difference=Mo,Mn.differenceBy=Oo,Mn.differenceWith=Ao,Mn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Br(e,(t=n||void 0===t?1:tu(t))<0?0:t,r):[]},Mn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Br(e,0,(t=r-(t=n||void 0===t?1:tu(t)))<0?0:t):[]},Mn.dropRightWhile=function(e,t){return e&&e.length?Jr(e,Yi(t,3),!0,!0):[]},Mn.dropWhile=function(e,t){return e&&e.length?Jr(e,Yi(t,3),!0):[]},Mn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&oo(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=tu(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:tu(r))<0&&(r+=i),r=n>r?0:nu(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Mn.filter=function(e,t){return(Ta(e)?st:rr)(e,Yi(t,3))},Mn.flatMap=function(e,t){return ir(la(e,t),1)},Mn.flatMapDeep=function(e,t){return ir(la(e,t),1/0)},Mn.flatMapDepth=function(e,t,n){return n=void 0===n?1:tu(n),ir(la(e,t),n)},Mn.flatten=Lo,Mn.flattenDeep=function(e){return null!=e&&e.length?ir(e,1/0):[]},Mn.flattenDepth=function(e,t){return null!=e&&e.length?ir(e,t=void 0===t?1:tu(t)):[]},Mn.flip=function(e){return Fi(e,512)},Mn.flow=qu,Mn.flowRight=Bu,Mn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Mn.functions=function(e){return null==e?[]:cr(e,yu(e))},Mn.functionsIn=function(e){return null==e?[]:cr(e,_u(e))},Mn.groupBy=ua,Mn.initial=function(e){return null!=e&&e.length?Br(e,0,-1):[]},Mn.intersection=Io,Mn.intersectionBy=Ro,Mn.intersectionWith=Do,Mn.invert=vu,Mn.invertBy=gu,Mn.invokeMap=sa,Mn.iteratee=Hu,Mn.keyBy=ca,Mn.keys=yu,Mn.keysIn=_u,Mn.map=la,Mn.mapKeys=function(e,t){var n={};return t=Yi(t,3),ur(e,(function(e,r,i){Gn(n,t(e,r,i),e)})),n},Mn.mapValues=function(e,t){var n={};return t=Yi(t,3),ur(e,(function(e,r,i){Gn(n,r,t(e,r,i))})),n},Mn.matches=function(e){return jr(Xn(e,1))},Mn.matchesProperty=function(e,t){return Mr(e,Xn(t,1))},Mn.memoize=wa,Mn.merge=bu,Mn.mergeWith=wu,Mn.method=Gu,Mn.methodOf=$u,Mn.mixin=Yu,Mn.negate=xa,Mn.nthArg=function(e){return e=tu(e),Dr((function(t){return Ar(t,e)}))},Mn.omit=xu,Mn.omitBy=function(e,t){return Eu(e,xa(Yi(t)))},Mn.once=function(e){return va(2,e)},Mn.orderBy=function(e,t,n,r){return null==e?[]:(Ta(t)||(t=null==t?[]:[t]),Ta(n=r?void 0:n)||(n=null==n?[]:[n]),Cr(e,t,n))},Mn.over=Zu,Mn.overArgs=ka,Mn.overEvery=Ku,Mn.overSome=Qu,Mn.partial=Ea,Mn.partialRight=Sa,Mn.partition=fa,Mn.pick=ku,Mn.pickBy=Eu,Mn.property=Ju,Mn.propertyOf=function(e){return function(t){return null==e?void 0:lr(e,t)}},Mn.pull=Po,Mn.pullAll=zo,Mn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Lr(e,t,Yi(n,2)):e},Mn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Lr(e,t,void 0,n):e},Mn.pullAt=Vo,Mn.range=es,Mn.rangeRight=ts,Mn.rearg=ja,Mn.reject=function(e,t){return(Ta(e)?st:rr)(e,xa(Yi(t,3)))},Mn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Yi(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Nr(e,i),n},Mn.rest=function(e,t){if("function"!=typeof e)throw new ye(o);return Dr(e,t=void 0===t?t:tu(t))},Mn.reverse=Uo,Mn.sampleSize=function(e,t,n){return t=(n?oo(e,t,n):void 0===t)?1:tu(t),(Ta(e)?zn:Pr)(e,t)},Mn.set=function(e,t,n){return null==e?e:zr(e,t,n)},Mn.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:zr(e,t,n,r)},Mn.shuffle=function(e){return(Ta(e)?Vn:qr)(e)},Mn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&oo(e,t,n)?(t=0,n=r):(t=null==t?0:tu(t),n=void 0===n?r:tu(n)),Br(e,t,n)):[]},Mn.sortBy=ha,Mn.sortedUniq=function(e){return e&&e.length?$r(e):[]},Mn.sortedUniqBy=function(e,t){return e&&e.length?$r(e,Yi(t,2)):[]},Mn.split=function(e,t,n){return n&&"number"!=typeof n&&oo(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=ou(e))&&("string"==typeof t||null!=t&&!Ga(t))&&!(t=Xr(t))&&Ft(e)?ui(Bt(e),0,n):e.split(t,n):[]},Mn.spread=function(e,t){if("function"!=typeof e)throw new ye(o);return t=null==t?0:on(tu(t),0),Dr((function(n){var r=n[t],i=ui(n,0,t);return r&&ht(i,r),rt(e,this,i)}))},Mn.tail=function(e){var t=null==e?0:e.length;return t?Br(e,1,t):[]},Mn.take=function(e,t,n){return e&&e.length?Br(e,0,(t=n||void 0===t?1:tu(t))<0?0:t):[]},Mn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Br(e,(t=r-(t=n||void 0===t?1:tu(t)))<0?0:t,r):[]},Mn.takeRightWhile=function(e,t){return e&&e.length?Jr(e,Yi(t,3),!1,!0):[]},Mn.takeWhile=function(e,t){return e&&e.length?Jr(e,Yi(t,3)):[]},Mn.tap=function(e,t){return t(e),e},Mn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new ye(o);return Ua(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ya(e,t,{leading:r,maxWait:t,trailing:i})},Mn.thru=ea,Mn.toArray=Ja,Mn.toPairs=Su,Mn.toPairsIn=ju,Mn.toPath=function(e){return Ta(e)?ft(e,Eo):Xa(e)?[e]:vi(ko(ou(e)))},Mn.toPlainObject=iu,Mn.transform=function(e,t,n){var r=Ta(e),i=r||Ra(e)||Za(e);if(t=Yi(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Ua(e)&&Pa(o)?On(Ge(e)):{}}return(i?ot:ur)(e,(function(e,r,i){return t(n,e,r,i)})),n},Mn.unary=function(e){return pa(e,1)},Mn.union=qo,Mn.unionBy=Bo,Mn.unionWith=Wo,Mn.uniq=function(e){return e&&e.length?Zr(e):[]},Mn.uniqBy=function(e,t){return e&&e.length?Zr(e,Yi(t,2)):[]},Mn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Zr(e,void 0,t):[]},Mn.unset=function(e,t){return null==e||Kr(e,t)},Mn.unzip=Ho,Mn.unzipWith=Go,Mn.update=function(e,t,n){return null==e?e:Qr(e,t,ii(n))},Mn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Qr(e,t,ii(n),r)},Mn.values=Mu,Mn.valuesIn=function(e){return null==e?[]:At(e,_u(e))},Mn.without=$o,Mn.words=Pu,Mn.wrap=function(e,t){return Ea(ii(t),e)},Mn.xor=Yo,Mn.xorBy=Xo,Mn.xorWith=Zo,Mn.zip=Ko,Mn.zipObject=function(e,t){return ni(e||[],t||[],qn)},Mn.zipObjectDeep=function(e,t){return ni(e||[],t||[],zr)},Mn.zipWith=Qo,Mn.entries=Su,Mn.entriesIn=ju,Mn.extend=uu,Mn.extendWith=su,Yu(Mn,Mn),Mn.add=os,Mn.attempt=zu,Mn.camelCase=Ou,Mn.capitalize=Au,Mn.ceil=as,Mn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=ru(n))==n?n:0),void 0!==t&&(t=(t=ru(t))==t?t:0),Yn(ru(e),t,n)},Mn.clone=function(e){return Xn(e,4)},Mn.cloneDeep=function(e){return Xn(e,5)},Mn.cloneDeepWith=function(e,t){return Xn(e,5,t="function"==typeof t?t:void 0)},Mn.cloneWith=function(e,t){return Xn(e,4,t="function"==typeof t?t:void 0)},Mn.conformsTo=function(e,t){return null==t||Zn(e,t,yu(t))},Mn.deburr=Cu,Mn.defaultTo=function(e,t){return null==e||e!=e?t:e},Mn.divide=us,Mn.endsWith=function(e,t,n){e=ou(e),t=Xr(t);var r=e.length,i=n=void 0===n?r:Yn(tu(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Mn.eq=Ma,Mn.escape=function(e){return(e=ou(e))&&z.test(e)?e.replace(F,Rt):e},Mn.escapeRegExp=function(e){return(e=ou(e))&&$.test(e)?e.replace(G,"\\$&"):e},Mn.every=function(e,t,n){var r=Ta(e)?ut:tr;return n&&oo(e,t,n)&&(t=void 0),r(e,Yi(t,3))},Mn.find=ra,Mn.findIndex=Co,Mn.findKey=function(e,t){return mt(e,Yi(t,3),ur)},Mn.findLast=ia,Mn.findLastIndex=To,Mn.findLastKey=function(e,t){return mt(e,Yi(t,3),sr)},Mn.floor=ss,Mn.forEach=oa,Mn.forEachRight=aa,Mn.forIn=function(e,t){return null==e?e:or(e,Yi(t,3),_u)},Mn.forInRight=function(e,t){return null==e?e:ar(e,Yi(t,3),_u)},Mn.forOwn=function(e,t){return e&&ur(e,Yi(t,3))},Mn.forOwnRight=function(e,t){return e&&sr(e,Yi(t,3))},Mn.get=du,Mn.gt=Oa,Mn.gte=Aa,Mn.has=function(e,t){return null!=e&&to(e,t,pr)},Mn.hasIn=pu,Mn.head=No,Mn.identity=Wu,Mn.includes=function(e,t,n,r){e=Na(e)?e:Mu(e),n=n&&!r?tu(n):0;var i=e.length;return n<0&&(n=on(i+n,0)),Ya(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&_t(e,t,n)>-1},Mn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:tu(n);return i<0&&(i=on(r+i,0)),_t(e,t,i)},Mn.inRange=function(e,t,n){return t=eu(t),void 0===n?(n=t,t=0):n=eu(n),function(e,t,n){return e>=an(t,n)&&e<on(t,n)}(e=ru(e),t,n)},Mn.invoke=mu,Mn.isArguments=Ca,Mn.isArray=Ta,Mn.isArrayBuffer=La,Mn.isArrayLike=Na,Mn.isArrayLikeObject=Ia,Mn.isBoolean=function(e){return!0===e||!1===e||qa(e)&&hr(e)==l},Mn.isBuffer=Ra,Mn.isDate=Da,Mn.isElement=function(e){return qa(e)&&1===e.nodeType&&!Ha(e)},Mn.isEmpty=function(e){if(null==e)return!0;if(Na(e)&&(Ta(e)||"string"==typeof e||"function"==typeof e.splice||Ra(e)||Za(e)||Ca(e)))return!e.length;var t=eo(e);if(t==v||t==_)return!e.size;if(co(e))return!kr(e).length;for(var n in e)if(Ee.call(e,n))return!1;return!0},Mn.isEqual=function(e,t){return _r(e,t)},Mn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?_r(e,t,void 0,n):!!r},Mn.isError=Fa,Mn.isFinite=function(e){return"number"==typeof e&&tn(e)},Mn.isFunction=Pa,Mn.isInteger=za,Mn.isLength=Va,Mn.isMap=Ba,Mn.isMatch=function(e,t){return e===t||br(e,t,Zi(t))},Mn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,br(e,t,Zi(t),n)},Mn.isNaN=function(e){return Wa(e)&&e!=+e},Mn.isNative=function(e){if(so(e))throw new he("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return wr(e)},Mn.isNil=function(e){return null==e},Mn.isNull=function(e){return null===e},Mn.isNumber=Wa,Mn.isObject=Ua,Mn.isObjectLike=qa,Mn.isPlainObject=Ha,Mn.isRegExp=Ga,Mn.isSafeInteger=function(e){return za(e)&&e>=-9007199254740991&&e<=9007199254740991},Mn.isSet=$a,Mn.isString=Ya,Mn.isSymbol=Xa,Mn.isTypedArray=Za,Mn.isUndefined=function(e){return void 0===e},Mn.isWeakMap=function(e){return qa(e)&&eo(e)==x},Mn.isWeakSet=function(e){return qa(e)&&"[object WeakSet]"==hr(e)},Mn.join=function(e,t){return null==e?"":nn.call(e,t)},Mn.kebabCase=Tu,Mn.last=Fo,Mn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=tu(n))<0?on(r+i,0):an(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):yt(e,wt,i,!0)},Mn.lowerCase=Lu,Mn.lowerFirst=Nu,Mn.lt=Ka,Mn.lte=Qa,Mn.max=function(e){return e&&e.length?nr(e,Wu,dr):void 0},Mn.maxBy=function(e,t){return e&&e.length?nr(e,Yi(t,2),dr):void 0},Mn.mean=function(e){return xt(e,Wu)},Mn.meanBy=function(e,t){return xt(e,Yi(t,2))},Mn.min=function(e){return e&&e.length?nr(e,Wu,Er):void 0},Mn.minBy=function(e,t){return e&&e.length?nr(e,Yi(t,2),Er):void 0},Mn.stubArray=ns,Mn.stubFalse=rs,Mn.stubObject=function(){return{}},Mn.stubString=function(){return""},Mn.stubTrue=function(){return!0},Mn.multiply=cs,Mn.nth=function(e,t){return e&&e.length?Ar(e,tu(t)):void 0},Mn.noConflict=function(){return He._===this&&(He._=Ae),this},Mn.noop=Xu,Mn.now=da,Mn.pad=function(e,t,n){e=ou(e);var r=(t=tu(t))?qt(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Ci(Qt(i),n)+e+Ci(Kt(i),n)},Mn.padEnd=function(e,t,n){e=ou(e);var r=(t=tu(t))?qt(e):0;return t&&r<t?e+Ci(t-r,n):e},Mn.padStart=function(e,t,n){e=ou(e);var r=(t=tu(t))?qt(e):0;return t&&r<t?Ci(t-r,n)+e:e},Mn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),sn(ou(e).replace(X,""),t||0)},Mn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&oo(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=eu(e),void 0===t?(t=e,e=0):t=eu(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=cn();return an(e+i*(t-e+Ue("1e-"+((i+"").length-1))),t)}return Ir(e,t)},Mn.reduce=function(e,t,n){var r=Ta(e)?dt:St,i=arguments.length<3;return r(e,Yi(t,4),n,i,Jn)},Mn.reduceRight=function(e,t,n){var r=Ta(e)?pt:St,i=arguments.length<3;return r(e,Yi(t,4),n,i,er)},Mn.repeat=function(e,t,n){return t=(n?oo(e,t,n):void 0===t)?1:tu(t),Rr(ou(e),t)},Mn.replace=function(){var e=arguments,t=ou(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Mn.result=function(e,t,n){var r=-1,i=(t=oi(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var o=null==e?void 0:e[Eo(t[r])];void 0===o&&(r=i,o=n),e=Pa(o)?o.call(e):o}return e},Mn.round=ls,Mn.runInContext=e,Mn.sample=function(e){return(Ta(e)?Pn:Fr)(e)},Mn.size=function(e){if(null==e)return 0;if(Na(e))return Ya(e)?qt(e):e.length;var t=eo(e);return t==v||t==_?e.size:kr(e).length},Mn.snakeCase=Iu,Mn.some=function(e,t,n){var r=Ta(e)?vt:Wr;return n&&oo(e,t,n)&&(t=void 0),r(e,Yi(t,3))},Mn.sortedIndex=function(e,t){return Hr(e,t)},Mn.sortedIndexBy=function(e,t,n){return Gr(e,t,Yi(n,2))},Mn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Hr(e,t);if(r<n&&Ma(e[r],t))return r}return-1},Mn.sortedLastIndex=function(e,t){return Hr(e,t,!0)},Mn.sortedLastIndexBy=function(e,t,n){return Gr(e,t,Yi(n,2),!0)},Mn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Hr(e,t,!0)-1;if(Ma(e[n],t))return n}return-1},Mn.startCase=Ru,Mn.startsWith=function(e,t,n){return e=ou(e),n=null==n?0:Yn(tu(n),0,e.length),t=Xr(t),e.slice(n,n+t.length)==t},Mn.subtract=fs,Mn.sum=function(e){return e&&e.length?jt(e,Wu):0},Mn.sumBy=function(e,t){return e&&e.length?jt(e,Yi(t,2)):0},Mn.template=function(e,t,n){var r=Mn.templateSettings;n&&oo(e,t,n)&&(t=void 0),e=ou(e),t=su({},t,r,Pi);var i,o,a=su({},t.imports,r.imports,Pi),u=yu(a),s=At(a,u),c=0,l=t.interpolate||le,f="__p += '",h=ge((t.escape||le).source+"|"+l.source+"|"+(l===q?ne:le).source+"|"+(t.evaluate||le).source+"|$","g"),d="//# sourceURL="+(Ee.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Fe+"]")+"\n";e.replace(h,(function(t,n,r,a,u,s){return r||(r=a),f+=e.slice(c,s).replace(fe,Dt),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),u&&(o=!0,f+="';\n"+u+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=s+t.length,t})),f+="';\n";var p=Ee.call(t,"variable")&&t.variable;p||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(N,""):f).replace(I,"$1").replace(R,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=zu((function(){return de(u,d+"return "+f).apply(void 0,s)}));if(v.source=f,Fa(v))throw v;return v},Mn.times=function(e,t){if((e=tu(e))<1||e>9007199254740991)return[];var n=4294967295,r=an(e,4294967295);e-=4294967295;for(var i=Mt(r,t=Yi(t));++n<e;)t(n);return i},Mn.toFinite=eu,Mn.toInteger=tu,Mn.toLength=nu,Mn.toLower=function(e){return ou(e).toLowerCase()},Mn.toNumber=ru,Mn.toSafeInteger=function(e){return e?Yn(tu(e),-9007199254740991,9007199254740991):0===e?e:0},Mn.toString=ou,Mn.toUpper=function(e){return ou(e).toUpperCase()},Mn.trim=function(e,t,n){if((e=ou(e))&&(n||void 0===t))return e.replace(Y,"");if(!e||!(t=Xr(t)))return e;var r=Bt(e),i=Bt(t);return ui(r,Tt(r,i),Lt(r,i)+1).join("")},Mn.trimEnd=function(e,t,n){if((e=ou(e))&&(n||void 0===t))return e.replace(Z,"");if(!e||!(t=Xr(t)))return e;var r=Bt(e);return ui(r,0,Lt(r,Bt(t))+1).join("")},Mn.trimStart=function(e,t,n){if((e=ou(e))&&(n||void 0===t))return e.replace(X,"");if(!e||!(t=Xr(t)))return e;var r=Bt(e);return ui(r,Tt(r,Bt(t))).join("")},Mn.truncate=function(e,t){var n=30,r="...";if(Ua(t)){var i="separator"in t?t.separator:i;n="length"in t?tu(t.length):n,r="omission"in t?Xr(t.omission):r}var o=(e=ou(e)).length;if(Ft(e)){var a=Bt(e);o=a.length}if(n>=o)return e;var u=n-qt(r);if(u<1)return r;var s=a?ui(a,0,u).join(""):e.slice(0,u);if(void 0===i)return s+r;if(a&&(u+=s.length-u),Ga(i)){if(e.slice(u).search(i)){var c,l=s;for(i.global||(i=ge(i.source,ou(re.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;s=s.slice(0,void 0===f?u:f)}}else if(e.indexOf(Xr(i),u)!=u){var h=s.lastIndexOf(i);h>-1&&(s=s.slice(0,h))}return s+r},Mn.unescape=function(e){return(e=ou(e))&&P.test(e)?e.replace(D,Wt):e},Mn.uniqueId=function(e){var t=++Se;return ou(e)+t},Mn.upperCase=Du,Mn.upperFirst=Fu,Mn.each=oa,Mn.eachRight=aa,Mn.first=No,Yu(Mn,(is={},ur(Mn,(function(e,t){Ee.call(Mn.prototype,t)||(is[t]=e)})),is),{chain:!1}),Mn.VERSION="4.17.15",ot(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Mn[e].placeholder=Mn})),ot(["drop","take"],(function(e,t){Tn.prototype[e]=function(n){n=void 0===n?1:on(tu(n),0);var r=this.__filtered__&&!t?new Tn(this):this.clone();return r.__filtered__?r.__takeCount__=an(n,r.__takeCount__):r.__views__.push({size:an(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},Tn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),ot(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Tn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Yi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),ot(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Tn.prototype[e]=function(){return this[n](1).value()[0]}})),ot(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Tn.prototype[e]=function(){return this.__filtered__?new Tn(this):this[n](1)}})),Tn.prototype.compact=function(){return this.filter(Wu)},Tn.prototype.find=function(e){return this.filter(e).head()},Tn.prototype.findLast=function(e){return this.reverse().find(e)},Tn.prototype.invokeMap=Dr((function(e,t){return"function"==typeof e?new Tn(this):this.map((function(n){return mr(n,e,t)}))})),Tn.prototype.reject=function(e){return this.filter(xa(Yi(e)))},Tn.prototype.slice=function(e,t){e=tu(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Tn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=tu(t))<0?n.dropRight(-t):n.take(t-e)),n)},Tn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Tn.prototype.toArray=function(){return this.take(4294967295)},ur(Tn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Mn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(Mn.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,u=t instanceof Tn,s=a[0],c=u||Ta(t),l=function(e){var t=i.apply(Mn,ht([e],a));return r&&f?t[0]:t};c&&n&&"function"==typeof s&&1!=s.length&&(u=c=!1);var f=this.__chain__,h=!!this.__actions__.length,d=o&&!f,p=u&&!h;if(!o&&c){t=p?t:new Tn(this);var v=e.apply(t,a);return v.__actions__.push({func:ea,args:[l],thisArg:void 0}),new Cn(v,f)}return d&&p?e.apply(this,a):(v=this.thru(l),d?r?v.value()[0]:v.value():v)})})),ot(["pop","push","shift","sort","splice","unshift"],(function(e){var t=_e[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Mn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ta(i)?i:[],e)}return this[n]((function(n){return t.apply(Ta(n)?n:[],e)}))}})),ur(Tn.prototype,(function(e,t){var n=Mn[t];if(n){var r=n.name+"";Ee.call(yn,r)||(yn[r]=[]),yn[r].push({name:t,func:n})}})),yn[ji(void 0,2).name]=[{name:"wrapper",func:void 0}],Tn.prototype.clone=function(){var e=new Tn(this.__wrapped__);return e.__actions__=vi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=vi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=vi(this.__views__),e},Tn.prototype.reverse=function(){if(this.__filtered__){var e=new Tn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Tn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ta(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=an(t,e+a);break;case"takeRight":e=on(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,u=o.end,s=u-a,c=r?u:a-1,l=this.__iteratees__,f=l.length,h=0,d=an(s,this.__takeCount__);if(!n||!r&&i==s&&d==s)return ei(e,this.__actions__);var p=[];e:for(;s--&&h<d;){for(var v=-1,g=e[c+=t];++v<f;){var m=l[v],y=m.iteratee,_=m.type,b=y(g);if(2==_)g=b;else if(!b){if(1==_)continue e;break e}}p[h++]=g}return p},Mn.prototype.at=ta,Mn.prototype.chain=function(){return Jo(this)},Mn.prototype.commit=function(){return new Cn(this.value(),this.__chain__)},Mn.prototype.next=function(){void 0===this.__values__&&(this.__values__=Ja(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Mn.prototype.plant=function(e){for(var t,n=this;n instanceof An;){var r=jo(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Mn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Tn){var t=e;return this.__actions__.length&&(t=new Tn(this)),(t=t.reverse()).__actions__.push({func:ea,args:[Uo],thisArg:void 0}),new Cn(t,this.__chain__)}return this.thru(Uo)},Mn.prototype.toJSON=Mn.prototype.valueOf=Mn.prototype.value=function(){return ei(this.__wrapped__,this.__actions__)},Mn.prototype.first=Mn.prototype.head,Et&&(Mn.prototype[Et]=function(){return this}),Mn}();He._=Ht,void 0===(i=function(){return Ht}.call(t,n,t,r))||(r.exports=i)}).call(this)}).call(this,n(76),n(39)(e))},function(e,t,n){var r;try{r=n(137)}catch(e){}r||(r=window.graphlib),e.exports=r},function(e,t,n){var r=n(75),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){var r=n(24),i=n(56);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e,t,n){var r=n(195),i=n(205),o=n(16),a=n(1),u=n(212);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):u(e)}},function(e,t,n){var r=n(79),i=n(58),o=n(9);e.exports=function(e){return o(e)?r(e):i(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPresent=function(e){return null!=e},t.isDefined=function(e){return void 0!==e},t.isFilled=function(e){return null!==e}},,function(e,t,n){var r=n(150),i=n(155);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(19),i=n(151),o=n(152),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},function(e,t){e.exports=function(e){return e}},,function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(7).Symbol;e.exports=r},function(e,t,n){(function(e){var r=n(7),i=n(171),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,u=a&&a.exports===o?r.Buffer:void 0,s=(u?u.isBuffer:void 0)||i;e.exports=s}).call(this,n(39)(e))},function(e,t,n){var r=n(79),i=n(175),o=n(9);e.exports=function(e){return o(e)?r(e,!0):i(e)}},function(e,t,n){var r=n(180),i=n(53),o=n(181),a=n(88),u=n(182),s=n(15),c=n(77),l=c(r),f=c(i),h=c(o),d=c(a),p=c(u),v=s;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=v(new i)||o&&"[object Promise]"!=v(o.resolve())||a&&"[object Set]"!=v(new a)||u&&"[object WeakMap]"!=v(new u))&&(v=function(e){var t=s(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case f:return"[object Map]";case h:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return t}),e.exports=v},function(e,t,n){var r=n(15),i=n(8);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},function(e,t,n){var r=n(15),i=n(4);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){var r=n(37),i=n(38);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var u=-1,s=t.length;++u<s;){var c=t[u],l=o?o(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),a?i(n,c,l):r(n,c,l)}return n}},function(e,t,n){var r=n(170),i=n(8),o=Object.prototype,a=o.hasOwnProperty,u=o.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!u.call(e,"callee")};e.exports=s},function(e,t,n){var r=n(172),i=n(41),o=n(57),a=o&&o.isTypedArray,u=a?i(a):r;e.exports=u},function(e,t,n){var r=n(23);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},,,,function(e,t,n){var r=n(33),i=n(145),o=n(146),a=n(147),u=n(148),s=n(149);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=u,c.prototype.set=s,e.exports=c},function(e,t,n){var r=n(140),i=n(141),o=n(142),a=n(143),u=n(144);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=o,s.prototype.has=a,s.prototype.set=u,e.exports=s},function(e,t,n){var r=n(18);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(14)(Object,"create");e.exports=r},function(e,t,n){var r=n(164);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var r=n(38),i=n(18),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(78);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(80)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(63),i=n(193)(r);e.exports=i},function(e,t,n){var r=n(1),i=n(67),o=n(207),a=n(103);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t,n){var r=n(16),i=n(112),o=n(113);e.exports=function(e,t){return o(i(e,t,r),e+"")}},function(e,t,n){var r=n(18),i=n(9),o=n(40),a=n(4);e.exports=function(e,t,n){if(!a(n))return!1;var u=typeof t;return!!("number"==u?i(n)&&o(t,n.length):"string"==u&&t in n)&&r(n[t],e)}},function(e,t,n){"use strict";var r=n(0);e.exports={longestPath:function(e){var t={};r.forEach(e.sources(),(function n(i){var o=e.node(i);if(r.has(t,i))return o.rank;t[i]=!0;var a=r.min(r.map(e.outEdges(i),(function(t){return n(t.w)-e.edge(t).minlen})));return a!==Number.POSITIVE_INFINITY&&null!=a||(a=0),o.rank=a}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},,,function(e,t,n){"use strict";var r=n(3);function i(e){this._isDirected=!r.has(e,"directed")||e.directed,this._isMultigraph=!!r.has(e,"multigraph")&&e.multigraph,this._isCompound=!!r.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function o(e,t){e[t]?e[t]++:e[t]=1}function a(e,t){--e[t]||delete e[t]}function u(e,t,n,i){var o=""+t,a=""+n;if(!e&&o>a){var u=o;o=a,a=u}return o+"\x01"+a+"\x01"+(r.isUndefined(i)?"\0":i)}function s(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var a=i;i=o,o=a}var u={v:i,w:o};return r&&(u.name=r),u}function c(e,t){return u(e,t.v,t.w,t.name)}e.exports=i,i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(e){return this._label=e,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultNodeLabelFn=e,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return r.keys(this._nodes)},i.prototype.sources=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._in[t])}))},i.prototype.sinks=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._out[t])}))},i.prototype.setNodes=function(e,t){var n=arguments,i=this;return r.each(e,(function(e){n.length>1?i.setNode(e,t):i.setNode(e)})),this},i.prototype.setNode=function(e,t){return r.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},i.prototype.node=function(e){return this._nodes[e]},i.prototype.hasNode=function(e){return r.has(this._nodes,e)},i.prototype.removeNode=function(e){var t=this;if(r.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],r.each(this.children(e),(function(e){t.setParent(e)})),delete this._children[e]),r.each(r.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],r.each(r.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},i.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(t))t="\0";else{for(var n=t+="";!r.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},i.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},i.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if("\0"!==t)return t}},i.prototype.children=function(e){if(r.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return r.keys(t)}else{if("\0"===e)return this.nodes();if(this.hasNode(e))return[]}},i.prototype.predecessors=function(e){var t=this._preds[e];if(t)return r.keys(t)},i.prototype.successors=function(e){var t=this._sucs[e];if(t)return r.keys(t)},i.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return r.union(t,this.successors(e))},i.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},i.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;r.each(this._nodes,(function(n,r){e(r)&&t.setNode(r,n)})),r.each(this._edgeObjs,(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))}));var i={};return this._isCompound&&r.each(t.nodes(),(function(e){t.setParent(e,function e(r){var o=n.parent(r);return void 0===o||t.hasNode(o)?(i[r]=o,o):o in i?i[o]:e(o)}(e))})),t},i.prototype.setDefaultEdgeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultEdgeLabelFn=e,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return r.values(this._edgeObjs)},i.prototype.setPath=function(e,t){var n=this,i=arguments;return r.reduce(e,(function(e,r){return i.length>1?n.setEdge(e,r,t):n.setEdge(e,r),r})),this},i.prototype.setEdge=function(){var e,t,n,i,a=!1,c=arguments[0];"object"==typeof c&&null!==c&&"v"in c?(e=c.v,t=c.w,n=c.name,2===arguments.length&&(i=arguments[1],a=!0)):(e=c,t=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],a=!0)),e=""+e,t=""+t,r.isUndefined(n)||(n=""+n);var l=u(this._isDirected,e,t,n);if(r.has(this._edgeLabels,l))return a&&(this._edgeLabels[l]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[l]=a?i:this._defaultEdgeLabelFn(e,t,n);var f=s(this._isDirected,e,t,n);return e=f.v,t=f.w,Object.freeze(f),this._edgeObjs[l]=f,o(this._preds[t],e),o(this._sucs[e],t),this._in[t][l]=f,this._out[e][l]=f,this._edgeCount++,this},i.prototype.edge=function(e,t,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,e,t,n);return this._edgeLabels[r]},i.prototype.hasEdge=function(e,t,n){var i=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,e,t,n);return r.has(this._edgeLabels,i)},i.prototype.removeEdge=function(e,t,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,e,t,n),i=this._edgeObjs[r];return i&&(e=i.v,t=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],a(this._preds[t],e),a(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},i.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var i=r.values(n);return t?r.filter(i,(function(e){return e.v===t})):i}},i.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var i=r.values(n);return t?r.filter(i,(function(e){return e.w===t})):i}},i.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},function(e,t,n){var r=n(14)(n(7),"Map");e.exports=r},function(e,t,n){var r=n(156),i=n(163),o=n(165),a=n(166),u=n(167);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=o,s.prototype.has=a,s.prototype.set=u,e.exports=s},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){(function(e){var r=n(75),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,u=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=u}).call(this,n(39)(e))},function(e,t,n){var r=n(42),i=n(173),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(83),i=n(84),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=u},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){var r=n(89);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var r=n(64),i=n(11);e.exports=function(e,t){return e&&r(e,t,i)}},function(e,t,n){var r=n(192)();e.exports=r},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t,n){var r=n(45),i=n(28);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},function(e,t,n){var r=n(1),i=n(23),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},function(e,t,n){var r=n(60),i=n(226);e.exports=function e(t,n,o,a,u){var s=-1,c=t.length;for(o||(o=i),u||(u=[]);++s<c;){var l=t[s];n>0&&o(l)?n>1?e(l,n-1,o,a,u):r(u,l):a||(u[u.length]=l)}return u}},function(e,t,n){var r=n(23);e.exports=function(e,t,n){for(var i=-1,o=e.length;++i<o;){var a=e[i],u=t(a);if(null!=u&&(void 0===s?u==u&&!r(u):n(u,s)))var s=u,c=a}return c}},function(e,t,n){e.exports={graphlib:n(6),layout:n(250),debug:n(309),util:{time:n(2).time,notime:n(2).notime},version:n(310)}},,,,function(e,t,n){var r=n(32),i=n(55),o=n(37),a=n(168),u=n(174),s=n(81),c=n(82),l=n(177),f=n(178),h=n(86),d=n(179),p=n(22),v=n(183),g=n(184),m=n(91),y=n(1),_=n(20),b=n(188),w=n(4),x=n(190),k=n(11),E={};E["[object Arguments]"]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E["[object Object]"]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E["[object Function]"]=E["[object WeakMap]"]=!1,e.exports=function e(t,n,S,j,M,O){var A,C=1&n,T=2&n,L=4&n;if(S&&(A=M?S(t,j,M,O):S(t)),void 0!==A)return A;if(!w(t))return t;var N=y(t);if(N){if(A=v(t),!C)return c(t,A)}else{var I=p(t),R="[object Function]"==I||"[object GeneratorFunction]"==I;if(_(t))return s(t,C);if("[object Object]"==I||"[object Arguments]"==I||R&&!M){if(A=T||R?{}:m(t),!C)return T?f(t,u(A,t)):l(t,a(A,t))}else{if(!E[I])return M?t:{};A=g(t,I,C)}}O||(O=new r);var D=O.get(t);if(D)return D;O.set(t,A),x(t)?t.forEach((function(r){A.add(e(r,n,S,r,t,O))})):b(t)&&t.forEach((function(r,i){A.set(i,e(r,n,S,i,t,O))}));var F=L?T?d:h:T?keysIn:k,P=N?void 0:F(t);return i(P||t,(function(r,i){P&&(r=t[i=r]),o(A,i,e(r,n,S,i,t,O))})),A}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(76))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(14),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){var r=n(169),i=n(26),o=n(1),a=n(20),u=n(40),s=n(27),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),f=!n&&!l&&a(e),h=!n&&!l&&!f&&s(e),d=n||l||f||h,p=d?r(e.length,String):[],v=p.length;for(var g in e)!t&&!c.call(e,g)||d&&("length"==g||f&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||u(g,v))||p.push(g);return p}},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){(function(e){var r=n(7),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Buffer:void 0,u=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=u?u(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(39)(e))},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(60),i=n(43),o=n(59),a=n(84),u=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=u},function(e,t,n){var r=n(87),i=n(59),o=n(11);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var r=n(60),i=n(1);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},function(e,t,n){var r=n(14)(n(7),"Set");e.exports=r},function(e,t,n){var r=n(7).Uint8Array;e.exports=r},function(e,t,n){var r=n(61);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(92),i=n(43),o=n(42);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},function(e,t,n){var r=n(4),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},function(e,t,n){e.exports=n(94)},function(e,t,n){var r=n(55),i=n(44),o=n(95),a=n(1);e.exports=function(e,t){return(a(e)?r:i)(e,o(t))}},function(e,t,n){var r=n(16);e.exports=function(e){return"function"==typeof e?e:r}},function(e,t,n){var r=n(83),i=n(194),o=n(10),a=n(1);e.exports=function(e,t){return(a(e)?r:i)(e,o(t,3))}},function(e,t,n){var r=n(197),i=n(8);e.exports=function e(t,n,o,a,u){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,a,e,u))}},function(e,t,n){var r=n(99),i=n(200),o=n(100);e.exports=function(e,t,n,a,u,s){var c=1&n,l=e.length,f=t.length;if(l!=f&&!(c&&f>l))return!1;var h=s.get(e);if(h&&s.get(t))return h==t;var d=-1,p=!0,v=2&n?new r:void 0;for(s.set(e,t),s.set(t,e);++d<l;){var g=e[d],m=t[d];if(a)var y=c?a(m,g,d,t,e,s):a(g,m,d,e,t,s);if(void 0!==y){if(y)continue;p=!1;break}if(v){if(!i(t,(function(e,t){if(!o(v,t)&&(g===e||u(g,e,n,a,s)))return v.push(t)}))){p=!1;break}}else if(g!==m&&!u(g,m,n,a,s)){p=!1;break}}return s.delete(e),s.delete(t),p}},function(e,t,n){var r=n(54),i=n(198),o=n(199);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(4);e.exports=function(e){return e==e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},function(e,t,n){var r=n(210);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(211),i=n(105);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t,n){var r=n(45),i=n(26),o=n(1),a=n(40),u=n(56),s=n(28);e.exports=function(e,t,n){for(var c=-1,l=(t=r(t,e)).length,f=!1;++c<l;){var h=s(t[c]);if(!(f=null!=e&&n(e,h)))break;e=e[h]}return f||++c!=l?f:!!(l=null==e?0:e.length)&&u(l)&&a(h,l)&&(o(e)||i(e))}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,n){var r=n(214),i=n(105);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t){e.exports=function(e){return void 0===e}},function(e,t,n){var r=n(46),i=n(10),o=n(110),a=n(1);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},function(e,t,n){var r=n(44),i=n(9);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},function(e,t,n){var r=n(216),i=n(44),o=n(10),a=n(217),u=n(1);e.exports=function(e,t,n){var s=u(e)?r:a,c=arguments.length<3;return s(e,o(t,4),n,c,i)}},function(e,t,n){var r=n(227),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,u=i(o.length-t,0),s=Array(u);++a<u;)s[a]=o[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=o[a];return c[t]=n(s),r(e,this,c)}}},function(e,t,n){var r=n(228),i=n(229)(r);e.exports=i},function(e,t){e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},function(e,t,n){var r=n(9),i=n(8);e.exports=function(e){return i(e)&&r(e)}},function(e,t,n){var r=n(238),i=n(11);e.exports=function(e){return null==e?[]:r(e,i(e))}},function(e,t,n){var r=n(3),i=n(118);e.exports=function(e,t,n,r){return function(e,t,n,r){var o,a,u={},s=new i,c=function(e){var t=e.v!==o?e.v:e.w,r=u[t],i=n(e),c=a.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+i);c<r.distance&&(r.distance=c,r.predecessor=o,s.decrease(t,c))};for(e.nodes().forEach((function(e){var n=e===t?0:Number.POSITIVE_INFINITY;u[e]={distance:n},s.add(e,n)}));s.size()>0&&(o=s.removeMin(),(a=u[o]).distance!==Number.POSITIVE_INFINITY);)r(o).forEach(c);return u}(e,String(t),n||o,r||function(t){return e.outEdges(t)})};var o=r.constant(1)},function(e,t,n){var r=n(3);function i(){this._arr=[],this._keyIndices={}}e.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map((function(e){return e.key}))},i.prototype.has=function(e){return r.has(this._keyIndices,e)},i.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!r.has(n,e)){var i=this._arr,o=i.length;return n[e]=o,i.push({key:e,priority:t}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},i.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},i.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,i=e;n<t.length&&(i=t[n].priority<t[i].priority?n:i,r<t.length&&(i=t[r].priority<t[i].priority?r:i),i!==e&&(this._swap(e,i),this._heapify(i)))},i.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},i.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,i=n[e],o=n[t];n[e]=o,n[t]=i,r[o.key]=e,r[i.key]=t}},function(e,t,n){var r=n(3);e.exports=function(e){var t=0,n=[],i={},o=[];return e.nodes().forEach((function(a){r.has(i,a)||function a(u){var s=i[u]={onStack:!0,lowlink:t,index:t++};if(n.push(u),e.successors(u).forEach((function(e){r.has(i,e)?i[e].onStack&&(s.lowlink=Math.min(s.lowlink,i[e].index)):(a(e),s.lowlink=Math.min(s.lowlink,i[e].lowlink))})),s.lowlink===s.index){var c,l=[];do{c=n.pop(),i[c].onStack=!1,l.push(c)}while(u!==c);o.push(l)}}(a)})),o}},function(e,t,n){var r=n(3);function i(e){var t={},n={},i=[];if(r.each(e.sinks(),(function a(u){if(r.has(n,u))throw new o;r.has(t,u)||(n[u]=!0,t[u]=!0,r.each(e.predecessors(u),a),delete n[u],i.push(u))})),r.size(t)!==e.nodeCount())throw new o;return i}function o(){}e.exports=i,i.CycleException=o,o.prototype=new Error},function(e,t,n){var r=n(3);e.exports=function(e,t,n){r.isArray(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],a={};return r.each(t,(function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(t,n,i,o,a,u){r.has(o,n)||(o[n]=!0,i||u.push(n),r.each(a(n),(function(n){e(t,n,i,o,a,u)})),i&&u.push(n))}(e,t,"post"===n,a,i,o)})),o}},function(e,t,n){var r=n(257);e.exports=function(e){return e?(e=r(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},function(e,t,n){var r=n(68);e.exports=function(e){return null!=e&&e.length?r(e,1):[]}},function(e,t,n){var r=n(38),i=n(18);e.exports=function(e,t,n){(void 0===n||i(e[t],n))&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t){e.exports=function(e,t){return e<t}},function(e,t,n){"use strict";var r=n(0),i=n(6).Graph,o=n(49).slack;function a(e,t){return r.forEach(e.nodes(),(function n(i){r.forEach(t.nodeEdges(i),(function(r){var a=r.v,u=i===a?r.w:a;e.hasNode(u)||o(t,r)||(e.setNode(u,{}),e.setEdge(i,u,{}),n(u))}))})),e.nodeCount()}function u(e,t){return r.minBy(t.edges(),(function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return o(t,n)}))}function s(e,t,n){r.forEach(e.nodes(),(function(e){t.node(e).rank+=n}))}e.exports=function(e){var t,n,r=new i({directed:!1}),c=e.nodes()[0],l=e.nodeCount();for(r.setNode(c,{});a(r,e)<l;)t=u(r,e),n=r.hasNode(t.v)?o(e,t):-o(e,t),s(r,e,n);return r}},,,,,,,,,,function(e,t,n){var r=n(138);e.exports={Graph:r.Graph,json:n(240),alg:n(241),version:r.version}},function(e,t,n){e.exports={Graph:n(52),version:n(239)}},function(e,t,n){var r=n(74);e.exports=function(e){return r(e,4)}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(34),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},function(e,t,n){var r=n(34);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(34);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(34);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},function(e,t,n){var r=n(33);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(33),i=n(53),o=n(54);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(24),i=n(153),o=n(4),a=n(77),u=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,l=s.toString,f=c.hasOwnProperty,h=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?h:u).test(a(e))}},function(e,t,n){var r=n(19),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,u=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[u]=n:delete e[u]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,i=n(154),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},function(e,t,n){var r=n(7)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(157),i=n(33),o=n(53);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(e,t,n){var r=n(158),i=n(159),o=n(160),a=n(161),u=n(162);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=o,s.prototype.has=a,s.prototype.set=u,e.exports=s},function(e,t,n){var r=n(35);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(35),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(35),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var r=n(35);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(36);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(36);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(36);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(36);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},function(e,t,n){var r=n(25),i=n(11);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(15),i=n(8);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(15),i=n(56),o=n(8),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},function(e,t,n){var r=n(80)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(25),i=n(21);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t,n){var r=n(4),i=n(42),o=n(176),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var u in e)("constructor"!=u||!t&&a.call(e,u))&&n.push(u);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(25),i=n(59);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t,n){var r=n(25),i=n(85);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t,n){var r=n(87),i=n(85),o=n(21);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var r=n(14)(n(7),"DataView");e.exports=r},function(e,t,n){var r=n(14)(n(7),"Promise");e.exports=r},function(e,t,n){var r=n(14)(n(7),"WeakMap");e.exports=r},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(61),i=n(185),o=n(186),a=n(187),u=n(90);e.exports=function(e,t,n){var s=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new s(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return u(e,n);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(e);case"[object RegExp]":return o(e);case"[object Set]":return new s;case"[object Symbol]":return a(e)}}},function(e,t,n){var r=n(61);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(19),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},function(e,t,n){var r=n(189),i=n(41),o=n(57),a=o&&o.isMap,u=a?i(a):r;e.exports=u},function(e,t,n){var r=n(22),i=n(8);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},function(e,t,n){var r=n(191),i=n(41),o=n(57),a=o&&o.isSet,u=a?i(a):r;e.exports=u},function(e,t,n){var r=n(22),i=n(8);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},function(e,t){e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),u=a.length;u--;){var s=a[e?u:++i];if(!1===n(o[s],s,o))break}return t}}},function(e,t,n){var r=n(9);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,u=Object(n);(t?a--:++a<o)&&!1!==i(u[a],a,u););return n}}},function(e,t,n){var r=n(44);e.exports=function(e,t){var n=[];return r(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}},function(e,t,n){var r=n(196),i=n(204),o=n(102);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(32),i=n(97);e.exports=function(e,t,n,o){var a=n.length,u=a,s=!o;if(null==e)return!u;for(e=Object(e);a--;){var c=n[a];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<u;){var l=(c=n[a])[0],f=e[l],h=c[1];if(s&&c[2]){if(void 0===f&&!(l in e))return!1}else{var d=new r;if(o)var p=o(f,h,l,e,t,d);if(!(void 0===p?i(h,f,3,o,d):p))return!1}}return!0}},function(e,t,n){var r=n(32),i=n(98),o=n(201),a=n(203),u=n(22),s=n(1),c=n(20),l=n(27),f="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,d,p,v){var g=s(e),m=s(t),y=g?"[object Array]":u(e),_=m?"[object Array]":u(t),b=(y="[object Arguments]"==y?f:y)==f,w=(_="[object Arguments]"==_?f:_)==f,x=y==_;if(x&&c(e)){if(!c(t))return!1;g=!0,b=!1}if(x&&!b)return v||(v=new r),g||l(e)?i(e,t,n,d,p,v):o(e,t,y,n,d,p,v);if(!(1&n)){var k=b&&h.call(e,"__wrapped__"),E=w&&h.call(t,"__wrapped__");if(k||E){var S=k?e.value():e,j=E?t.value():t;return v||(v=new r),p(S,j,n,d,v)}}return!!x&&(v||(v=new r),a(e,t,n,d,p,v))}},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t,n){var r=n(19),i=n(89),o=n(18),a=n(98),u=n(202),s=n(65),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,f,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var d=u;case"[object Set]":var p=1&r;if(d||(d=s),e.size!=t.size&&!p)return!1;var v=h.get(e);if(v)return v==t;r|=2,h.set(e,t);var g=a(d(e),d(t),r,c,f,h);return h.delete(e),g;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t,n){var r=n(86),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,u){var s=1&n,c=r(e),l=c.length;if(l!=r(t).length&&!s)return!1;for(var f=l;f--;){var h=c[f];if(!(s?h in t:i.call(t,h)))return!1}var d=u.get(e);if(d&&u.get(t))return d==t;var p=!0;u.set(e,t),u.set(t,e);for(var v=s;++f<l;){var g=e[h=c[f]],m=t[h];if(o)var y=s?o(m,g,h,t,e,u):o(g,m,h,e,t,u);if(!(void 0===y?g===m||a(g,m,n,o,u):y)){p=!1;break}v||(v="constructor"==h)}if(p&&!v){var _=e.constructor,b=t.constructor;_!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b)&&(p=!1)}return u.delete(e),u.delete(t),p}},function(e,t,n){var r=n(101),i=n(11);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},function(e,t,n){var r=n(97),i=n(206),o=n(104),a=n(67),u=n(101),s=n(102),c=n(28);e.exports=function(e,t){return a(e)&&u(t)?s(c(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},function(e,t,n){var r=n(66);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},function(e,t,n){var r=n(208),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},function(e,t,n){var r=n(209);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},function(e,t,n){var r=n(54);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},function(e,t,n){var r=n(19),i=n(46),o=n(1),a=n(23),u=r?r.prototype:void 0,s=u?u.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return s?s.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(106),i=n(213),o=n(67),a=n(28);e.exports=function(e){return o(e)?r(a(e)):i(e)}},function(e,t,n){var r=n(66);e.exports=function(e){return function(t){return r(t,e)}}},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e,t){return null!=e&&n.call(e,t)}},function(e,t,n){var r=n(58),i=n(22),o=n(26),a=n(1),u=n(9),s=n(20),c=n(42),l=n(27),f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(u(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||s(e)||l(e)||o(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!r(e).length;for(var n in e)if(f.call(e,n))return!1;return!0}},function(e,t){e.exports=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}},function(e,t){e.exports=function(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}},function(e,t,n){var r=n(58),i=n(22),o=n(9),a=n(219),u=n(220);e.exports=function(e){if(null==e)return 0;if(o(e))return a(e)?u(e):e.length;var t=i(e);return"[object Map]"==t||"[object Set]"==t?e.size:r(e).length}},function(e,t,n){var r=n(15),i=n(1),o=n(8);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},function(e,t,n){var r=n(221),i=n(222),o=n(223);e.exports=function(e){return i(e)?o(e):r(e)}},function(e,t,n){var r=n(106)("length");e.exports=r},function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},function(e,t){var n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+n+"|"+r+")?",s="[\\ufe0e\\ufe0f]?"+u+"(?:\\u200d(?:"+[i,o,a].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*",c="(?:"+[i+n+"?",n,o,a,"[\\ud800-\\udfff]"].join("|")+")",l=RegExp(r+"(?="+r+")|"+c+s,"g");e.exports=function(e){for(var t=l.lastIndex=0;l.test(e);)++t;return t}},function(e,t,n){var r=n(55),i=n(92),o=n(63),a=n(10),u=n(43),s=n(1),c=n(20),l=n(24),f=n(4),h=n(27);e.exports=function(e,t,n){var d=s(e),p=d||c(e)||h(e);if(t=a(t,4),null==n){var v=e&&e.constructor;n=p?d?new v:[]:f(e)&&l(v)?i(u(e)):{}}return(p?r:o)(e,(function(e,r,i){return t(n,e,r,i)})),n}},function(e,t,n){var r=n(68),i=n(47),o=n(230),a=n(115),u=i((function(e){return o(r(e,1,a,!0))}));e.exports=u},function(e,t,n){var r=n(19),i=n(26),o=n(1),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(62),i=n(78),o=n(16),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var i=n(),o=16-(i-r);if(r=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(99),i=n(231),o=n(235),a=n(100),u=n(236),s=n(65);e.exports=function(e,t,n){var c=-1,l=i,f=e.length,h=!0,d=[],p=d;if(n)h=!1,l=o;else if(f>=200){var v=t?null:u(e);if(v)return s(v);h=!1,l=a,p=new r}else p=t?[]:d;e:for(;++c<f;){var g=e[c],m=t?t(g):g;if(g=n||0!==g?g:0,h&&m==m){for(var y=p.length;y--;)if(p[y]===m)continue e;t&&p.push(m),d.push(g)}else l(p,m,n)||(p!==d&&p.push(m),d.push(g))}return d}},function(e,t,n){var r=n(232);e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},function(e,t,n){var r=n(114),i=n(233),o=n(234);e.exports=function(e,t,n){return t==t?o(e,t,n):r(e,i,n)}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},function(e,t){e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},function(e,t,n){var r=n(88),i=n(237),o=n(65),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(46);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},function(e,t){e.exports="2.1.8"},function(e,t,n){var r=n(3),i=n(52);function o(e){return r.map(e.nodes(),(function(t){var n=e.node(t),i=e.parent(t),o={v:t};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o}))}function a(e){return r.map(e.edges(),(function(t){var n=e.edge(t),i={v:t.v,w:t.w};return r.isUndefined(t.name)||(i.name=t.name),r.isUndefined(n)||(i.value=n),i}))}e.exports={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:o(e),edges:a(e)};return r.isUndefined(e.graph())||(t.value=r.clone(e.graph())),t},read:function(e){var t=new i(e.options).setGraph(e.value);return r.each(e.nodes,(function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),r.each(e.edges,(function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}}},function(e,t,n){e.exports={components:n(242),dijkstra:n(117),dijkstraAll:n(243),findCycles:n(244),floydWarshall:n(245),isAcyclic:n(246),postorder:n(247),preorder:n(248),prim:n(249),tarjan:n(119),topsort:n(120)}},function(e,t,n){var r=n(3);e.exports=function(e){var t,n={},i=[];function o(i){r.has(n,i)||(n[i]=!0,t.push(i),r.each(e.successors(i),o),r.each(e.predecessors(i),o))}return r.each(e.nodes(),(function(e){t=[],o(e),t.length&&i.push(t)})),i}},function(e,t,n){var r=n(117),i=n(3);e.exports=function(e,t,n){return i.transform(e.nodes(),(function(i,o){i[o]=r(e,o,t,n)}),{})}},function(e,t,n){var r=n(3),i=n(119);e.exports=function(e){return r.filter(i(e),(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))}},function(e,t,n){var r=n(3);e.exports=function(e,t,n){return function(e,t,n){var r={},i=e.nodes();return i.forEach((function(e){r[e]={},r[e][e]={distance:0},i.forEach((function(t){e!==t&&(r[e][t]={distance:Number.POSITIVE_INFINITY})})),n(e).forEach((function(n){var i=n.v===e?n.w:n.v,o=t(n);r[e][i]={distance:o,predecessor:e}}))})),i.forEach((function(e){var t=r[e];i.forEach((function(n){var o=r[n];i.forEach((function(n){var r=o[e],i=t[n],a=o[n],u=r.distance+i.distance;u<a.distance&&(a.distance=u,a.predecessor=i.predecessor)}))}))})),r}(e,t||i,n||function(t){return e.outEdges(t)})};var i=r.constant(1)},function(e,t,n){var r=n(120);e.exports=function(e){try{r(e)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},function(e,t,n){var r=n(121);e.exports=function(e,t){return r(e,t,"post")}},function(e,t,n){var r=n(121);e.exports=function(e,t){return r(e,t,"pre")}},function(e,t,n){var r=n(3),i=n(52),o=n(118);e.exports=function(e,t){var n,a=new i,u={},s=new o;function c(e){var r=e.v===n?e.w:e.v,i=s.priority(r);if(void 0!==i){var o=t(e);o<i&&(u[r]=n,s.decrease(r,o))}}if(0===e.nodeCount())return a;r.each(e.nodes(),(function(e){s.add(e,Number.POSITIVE_INFINITY),a.setNode(e)})),s.decrease(e.nodes()[0],0);for(var l=!1;s.size()>0;){if(n=s.removeMin(),r.has(u,n))a.setEdge(n,u[n]);else{if(l)throw new Error("Input graph is not connected: "+e);l=!0}e.nodeEdges(n).forEach(c)}return a}},function(e,t,n){"use strict";var r=n(0),i=n(288),o=n(291),a=n(292),u=n(2).normalizeRanks,s=n(294),c=n(2).removeEmptyRanks,l=n(295),f=n(296),h=n(297),d=n(298),p=n(307),v=n(2),g=n(6).Graph;e.exports=function(e,t){var n=t&&t.debugTiming?v.time:v.notime;n("layout",(function(){var t=n("  buildLayoutGraph",(function(){return function(e){var t=new g({multigraph:!0,compound:!0}),n=j(e.graph());return t.setGraph(r.merge({},y,S(n,m),r.pick(n,_))),r.forEach(e.nodes(),(function(n){var i=j(e.node(n));t.setNode(n,r.defaults(S(i,b),w)),t.setParent(n,e.parent(n))})),r.forEach(e.edges(),(function(n){var i=j(e.edge(n));t.setEdge(n,r.merge({},k,S(i,x),r.pick(i,E)))})),t}(e)}));n("  runLayout",(function(){!function(e,t){t("    makeSpaceForEdgeLabels",(function(){!function(e){var t=e.graph();t.ranksep/=2,r.forEach(e.edges(),(function(n){var r=e.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(e)})),t("    removeSelfEdges",(function(){!function(e){r.forEach(e.edges(),(function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(e)})),t("    acyclic",(function(){i.run(e)})),t("    nestingGraph.run",(function(){l.run(e)})),t("    rank",(function(){a(v.asNonCompoundGraph(e))})),t("    injectEdgeLabelProxies",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};v.addDummyNode(e,"edge-proxy",i,"_ep")}}))}(e)})),t("    removeEmptyRanks",(function(){c(e)})),t("    nestingGraph.cleanup",(function(){l.cleanup(e)})),t("    normalizeRanks",(function(){u(e)})),t("    assignRankMinMax",(function(){!function(e){var t=0;r.forEach(e.nodes(),(function(n){var i=e.node(n);i.borderTop&&(i.minRank=e.node(i.borderTop).rank,i.maxRank=e.node(i.borderBottom).rank,t=r.max(t,i.maxRank))})),e.graph().maxRank=t}(e)})),t("    removeEdgeLabelProxies",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))}))}(e)})),t("    normalize.run",(function(){o.run(e)})),t("    parentDummyChains",(function(){s(e)})),t("    addBorderSegments",(function(){f(e)})),t("    order",(function(){d(e)})),t("    insertSelfEdges",(function(){!function(e){var t=v.buildLayerMatrix(e);r.forEach(t,(function(t){var n=0;r.forEach(t,(function(t,i){var o=e.node(t);o.order=i+n,r.forEach(o.selfEdges,(function(t){v.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:o.rank,order:i+ ++n,e:t.e,label:t.label},"_se")})),delete o.selfEdges}))}))}(e)})),t("    adjustCoordinateSystem",(function(){h.adjust(e)})),t("    position",(function(){p(e)})),t("    positionSelfEdges",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,u=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*a/3,y:o-u},{x:i+5*a/6,y:o-u},{x:i+a,y:o},{x:i+5*a/6,y:o+u},{x:i+2*a/3,y:o+u}],n.label.x=n.x,n.label.y=n.y}}))}(e)})),t("    removeBorderNodes",(function(){!function(e){r.forEach(e.nodes(),(function(t){if(e.children(t).length){var n=e.node(t),i=e.node(n.borderTop),o=e.node(n.borderBottom),a=e.node(r.last(n.borderLeft)),u=e.node(r.last(n.borderRight));n.width=Math.abs(u.x-a.x),n.height=Math.abs(o.y-i.y),n.x=a.x+n.width/2,n.y=i.y+n.height/2}})),r.forEach(e.nodes(),(function(t){"border"===e.node(t).dummy&&e.removeNode(t)}))}(e)})),t("    normalize.undo",(function(){o.undo(e)})),t("    fixupEdgeLabelCoords",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(e)})),t("    undoCoordinateSystem",(function(){h.undo(e)})),t("    translateGraph",(function(){!function(e){var t=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,o=0,a=e.graph(),u=a.marginx||0,s=a.marginy||0;function c(e){var r=e.x,a=e.y,u=e.width,s=e.height;t=Math.min(t,r-u/2),n=Math.max(n,r+u/2),i=Math.min(i,a-s/2),o=Math.max(o,a+s/2)}r.forEach(e.nodes(),(function(t){c(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.has(n,"x")&&c(n)})),t-=u,i-=s,r.forEach(e.nodes(),(function(n){var r=e.node(n);r.x-=t,r.y-=i})),r.forEach(e.edges(),(function(n){var o=e.edge(n);r.forEach(o.points,(function(e){e.x-=t,e.y-=i})),r.has(o,"x")&&(o.x-=t),r.has(o,"y")&&(o.y-=i)})),a.width=n-t+u,a.height=o-i+s}(e)})),t("    assignNodeIntersects",(function(){!function(e){r.forEach(e.edges(),(function(t){var n,r,i=e.edge(t),o=e.node(t.v),a=e.node(t.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(v.intersectRect(o,n)),i.points.push(v.intersectRect(a,r))}))}(e)})),t("    reversePoints",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);n.reversed&&n.points.reverse()}))}(e)})),t("    acyclic.undo",(function(){i.undo(e)}))}(t,n)})),n("  updateInputGraph",(function(){!function(e,t){r.forEach(e.nodes(),(function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))})),r.forEach(e.edges(),(function(n){var i=e.edge(n),o=t.edge(n);i.points=o.points,r.has(o,"x")&&(i.x=o.x,i.y=o.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)}))}))};var m=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},_=["acyclicer","ranker","rankdir","align"],b=["width","height"],w={width:0,height:0},x=["minlen","weight","width","height","labeloffset"],k={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"];function S(e,t){return r.mapValues(r.pick(e,t),Number)}function j(e){var t={};return r.forEach(e,(function(e,n){t[n.toLowerCase()]=e})),t}},function(e,t,n){var r=n(74);e.exports=function(e){return r(e,5)}},function(e,t,n){var r=n(47),i=n(18),o=n(48),a=n(21),u=Object.prototype,s=u.hasOwnProperty,c=r((function(e,t){e=Object(e);var n=-1,r=t.length,c=r>2?t[2]:void 0;for(c&&o(t[0],t[1],c)&&(r=1);++n<r;)for(var l=t[n],f=a(l),h=-1,d=f.length;++h<d;){var p=f[h],v=e[p];(void 0===v||i(v,u[p])&&!s.call(e,p))&&(e[p]=l[p])}return e}));e.exports=c},function(e,t,n){var r=n(254)(n(255));e.exports=r},function(e,t,n){var r=n(10),i=n(9),o=n(11);e.exports=function(e){return function(t,n,a){var u=Object(t);if(!i(t)){var s=r(n,3);t=o(t),n=function(e){return s(u[e],e,u)}}var c=e(t,n,a);return c>-1?u[s?t[c]:c]:void 0}}},function(e,t,n){var r=n(114),i=n(10),o=n(256),a=Math.max;e.exports=function(e,t,n){var u=null==e?0:e.length;if(!u)return-1;var s=null==n?0:o(n);return s<0&&(s=a(u+s,0)),r(e,i(t,3),s)}},function(e,t,n){var r=n(122);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){var r=n(4),i=n(23),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=u.test(e);return n||s.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},function(e,t,n){var r=n(64),i=n(95),o=n(21);e.exports=function(e,t){return null==e?e:r(e,i(t),o)}},function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,n){var r=n(38),i=n(63),o=n(10);e.exports=function(e,t){var n={};return t=o(t,3),i(e,(function(e,i,o){r(n,i,t(e,i,o))})),n}},function(e,t,n){var r=n(69),i=n(262),o=n(16);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},function(e,t){e.exports=function(e,t){return e>t}},function(e,t,n){var r=n(264),i=n(268)((function(e,t,n){r(e,t,n)}));e.exports=i},function(e,t,n){var r=n(32),i=n(124),o=n(64),a=n(265),u=n(4),s=n(21),c=n(125);e.exports=function e(t,n,l,f,h){t!==n&&o(n,(function(o,s){if(h||(h=new r),u(o))a(t,n,s,l,e,f,h);else{var d=f?f(c(t,s),o,s+"",t,n,h):void 0;void 0===d&&(d=o),i(t,s,d)}}),s)}},function(e,t,n){var r=n(124),i=n(81),o=n(90),a=n(82),u=n(91),s=n(26),c=n(1),l=n(115),f=n(20),h=n(24),d=n(4),p=n(266),v=n(27),g=n(125),m=n(267);e.exports=function(e,t,n,y,_,b,w){var x=g(e,n),k=g(t,n),E=w.get(k);if(E)r(e,n,E);else{var S=b?b(x,k,n+"",e,t,w):void 0,j=void 0===S;if(j){var M=c(k),O=!M&&f(k),A=!M&&!O&&v(k);S=k,M||O||A?c(x)?S=x:l(x)?S=a(x):O?(j=!1,S=i(k,!0)):A?(j=!1,S=o(k,!0)):S=[]:p(k)||s(k)?(S=x,s(x)?S=m(x):d(x)&&!h(x)||(S=u(k))):j=!1}j&&(w.set(k,S),_(S,k,y,b,w),w.delete(k)),r(e,n,S)}}},function(e,t,n){var r=n(15),i=n(43),o=n(8),a=Function.prototype,u=Object.prototype,s=a.toString,c=u.hasOwnProperty,l=s.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==l}},function(e,t,n){var r=n(25),i=n(21);e.exports=function(e){return r(e,i(e))}},function(e,t,n){var r=n(47),i=n(48);e.exports=function(e){return r((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,u=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,u&&i(n[0],n[1],u)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,a)}return t}))}},function(e,t,n){var r=n(69),i=n(126),o=n(16);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},function(e,t,n){var r=n(69),i=n(10),o=n(126);e.exports=function(e,t){return e&&e.length?r(e,i(t,2),o):void 0}},function(e,t,n){var r=n(7);e.exports=function(){return r.Date.now()}},function(e,t,n){var r=n(273),i=n(276)((function(e,t){return null==e?{}:r(e,t)}));e.exports=i},function(e,t,n){var r=n(274),i=n(104);e.exports=function(e,t){return r(e,t,(function(t,n){return i(e,n)}))}},function(e,t,n){var r=n(66),i=n(275),o=n(45);e.exports=function(e,t,n){for(var a=-1,u=t.length,s={};++a<u;){var c=t[a],l=r(e,c);n(l,c)&&i(s,o(c,e),l)}return s}},function(e,t,n){var r=n(37),i=n(45),o=n(40),a=n(4),u=n(28);e.exports=function(e,t,n,s){if(!a(e))return e;for(var c=-1,l=(t=i(t,e)).length,f=l-1,h=e;null!=h&&++c<l;){var d=u(t[c]),p=n;if(c!=f){var v=h[d];void 0===(p=s?s(v,d,h):void 0)&&(p=a(v)?v:o(t[c+1])?[]:{})}r(h,d,p),h=h[d]}return e}},function(e,t,n){var r=n(123),i=n(112),o=n(113);e.exports=function(e){return o(i(e,void 0,r),e+"")}},function(e,t,n){var r=n(278)();e.exports=r},function(e,t,n){var r=n(279),i=n(48),o=n(122);e.exports=function(e){return function(t,n,a){return a&&"number"!=typeof a&&i(t,n,a)&&(n=a=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),a=void 0===a?t<n?1:-1:o(a),r(t,n,a,e)}}},function(e,t){var n=Math.ceil,r=Math.max;e.exports=function(e,t,i,o){for(var a=-1,u=r(n((t-e)/(i||1)),0),s=Array(u);u--;)s[o?u:++a]=e,e+=i;return s}},function(e,t,n){var r=n(68),i=n(281),o=n(47),a=n(48),u=o((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));e.exports=u},function(e,t,n){var r=n(46),i=n(10),o=n(110),a=n(282),u=n(41),s=n(283),c=n(16);e.exports=function(e,t,n){var l=-1;t=r(t.length?t:[c],u(i));var f=o(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++l,value:e}}));return a(f,(function(e,t){return s(e,t,n)}))}},function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},function(e,t,n){var r=n(284);e.exports=function(e,t,n){for(var i=-1,o=e.criteria,a=t.criteria,u=o.length,s=n.length;++i<u;){var c=r(o[i],a[i]);if(c)return i>=s?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}},function(e,t,n){var r=n(23);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e==e,a=r(e),u=void 0!==t,s=null===t,c=t==t,l=r(t);if(!s&&!l&&!a&&e>t||a&&u&&c&&!s&&!l||i&&u&&c||!n&&c||!o)return 1;if(!i&&!a&&!l&&e<t||l&&n&&o&&!i&&!a||s&&n&&o||!u&&o||!c)return-1}return 0}},function(e,t,n){var r=n(103),i=0;e.exports=function(e){var t=++i;return r(e)+t}},function(e,t,n){var r=n(37),i=n(287);e.exports=function(e,t){return i(e||[],t||[],r)}},function(e,t){e.exports=function(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var u=r<o?t[r]:void 0;n(a,e[r],u)}return a}},function(e,t,n){"use strict";var r=n(0),i=n(289);e.exports={run:function(e){var t="greedy"===e.graph().acyclicer?i(e,function(e){return function(t){return e.edge(t).weight}}(e)):function(e){var t=[],n={},i={};return r.forEach(e.nodes(),(function o(a){r.has(i,a)||(i[a]=!0,n[a]=!0,r.forEach(e.outEdges(a),(function(e){r.has(n,e.w)?t.push(e):o(e.w)})),delete n[a])})),t}(e);r.forEach(t,(function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,r.uniqueId("rev"))}))},undo:function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}}))}}},function(e,t,n){var r=n(0),i=n(6).Graph,o=n(290);e.exports=function(e,t){if(e.nodeCount()<=1)return[];var n=function(e,t){var n=new i,a=0,u=0;r.forEach(e.nodes(),(function(e){n.setNode(e,{v:e,in:0,out:0})})),r.forEach(e.edges(),(function(e){var r=n.edge(e.v,e.w)||0,i=t(e),o=r+i;n.setEdge(e.v,e.w,o),u=Math.max(u,n.node(e.v).out+=i),a=Math.max(a,n.node(e.w).in+=i)}));var c=r.range(u+a+3).map((function(){return new o})),l=a+1;return r.forEach(n.nodes(),(function(e){s(c,l,n.node(e))})),{graph:n,buckets:c,zeroIdx:l}}(e,t||a),c=function(e,t,n){for(var r,i=[],o=t[t.length-1],a=t[0];e.nodeCount();){for(;r=a.dequeue();)u(e,t,n,r);for(;r=o.dequeue();)u(e,t,n,r);if(e.nodeCount())for(var s=t.length-2;s>0;--s)if(r=t[s].dequeue()){i=i.concat(u(e,t,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,(function(t){return e.outEdges(t.v,t.w)})),!0)};var a=r.constant(1);function u(e,t,n,i,o){var a=o?[]:void 0;return r.forEach(e.inEdges(i.v),(function(r){var i=e.edge(r),u=e.node(r.v);o&&a.push({v:r.v,w:r.w}),u.out-=i,s(t,n,u)})),r.forEach(e.outEdges(i.v),(function(r){var i=e.edge(r),o=r.w,a=e.node(o);a.in-=i,s(t,n,a)})),e.removeNode(i.v),a}function s(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}},function(e,t){function n(){var e={};e._next=e._prev=e,this._sentinel=e}function r(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function i(e,t){if("_next"!==e&&"_prev"!==e)return t}e.exports=n,n.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return r(t),t},n.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&r(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},n.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,i)),n=n._prev;return"["+e.join(", ")+"]"}},function(e,t,n){"use strict";var r=n(0),i=n(2);e.exports={run:function(e){e.graph().dummyChains=[],r.forEach(e.edges(),(function(t){!function(e,t){var n,r,o,a=t.v,u=e.node(a).rank,s=t.w,c=e.node(s).rank,l=t.name,f=e.edge(t),h=f.labelRank;if(c!==u+1){for(e.removeEdge(t),o=0,++u;u<c;++o,++u)f.points=[],r={width:0,height:0,edgeLabel:f,edgeObj:t,rank:u},n=i.addDummyNode(e,"edge",r,"_d"),u===h&&(r.width=f.width,r.height=f.height,r.dummy="edge-label",r.labelpos=f.labelpos),e.setEdge(a,n,{weight:f.weight},l),0===o&&e.graph().dummyChains.push(n),a=n;e.setEdge(a,s,{weight:f.weight},l)}}(e,t)}))},undo:function(e){r.forEach(e.graph().dummyChains,(function(t){var n,r=e.node(t),i=r.edgeLabel;for(e.setEdge(r.edgeObj,i);r.dummy;)n=e.successors(t)[0],e.removeNode(t),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),t=n,r=e.node(t)}))}}},function(e,t,n){"use strict";var r=n(49).longestPath,i=n(127),o=n(293);e.exports=function(e){switch(e.graph().ranker){case"network-simplex":u(e);break;case"tight-tree":!function(e){r(e),i(e)}(e);break;case"longest-path":a(e);break;default:u(e)}};var a=r;function u(e){o(e)}},function(e,t,n){"use strict";var r=n(0),i=n(127),o=n(49).slack,a=n(49).longestPath,u=n(6).alg.preorder,s=n(6).alg.postorder,c=n(2).simplify;function l(e){e=c(e),a(e);var t,n=i(e);for(d(n),f(n,e);t=v(n);)m(n,e,t,g(n,e,t))}function f(e,t){var n=s(e,e.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(e,t,n){var r=e.node(n).parent;e.edge(n,r).cutvalue=h(e,t,n)}(e,t,n)}))}function h(e,t,n){var i=e.node(n).parent,o=!0,a=t.edge(n,i),u=0;return a||(o=!1,a=t.edge(i,n)),u=a.weight,r.forEach(t.nodeEdges(n),(function(r){var a,s,c=r.v===n,l=c?r.w:r.v;if(l!==i){var f=c===o,h=t.edge(r).weight;if(u+=f?h:-h,a=n,s=l,e.hasEdge(a,s)){var d=e.edge(n,l).cutvalue;u+=f?-d:d}}})),u}function d(e,t){arguments.length<2&&(t=e.nodes()[0]),p(e,{},1,t)}function p(e,t,n,i,o){var a=n,u=e.node(i);return t[i]=!0,r.forEach(e.neighbors(i),(function(o){r.has(t,o)||(n=p(e,t,n,o,i))})),u.low=a,u.lim=n++,o?u.parent=o:delete u.parent,n}function v(e){return r.find(e.edges(),(function(t){return e.edge(t).cutvalue<0}))}function g(e,t,n){var i=n.v,a=n.w;t.hasEdge(i,a)||(i=n.w,a=n.v);var u=e.node(i),s=e.node(a),c=u,l=!1;u.lim>s.lim&&(c=s,l=!0);var f=r.filter(t.edges(),(function(t){return l===y(0,e.node(t.v),c)&&l!==y(0,e.node(t.w),c)}));return r.minBy(f,(function(e){return o(t,e)}))}function m(e,t,n,i){var o=n.v,a=n.w;e.removeEdge(o,a),e.setEdge(i.v,i.w,{}),d(e),f(e,t),function(e,t){var n=r.find(e.nodes(),(function(e){return!t.node(e).parent})),i=u(e,n);i=i.slice(1),r.forEach(i,(function(n){var r=e.node(n).parent,i=t.edge(n,r),o=!1;i||(i=t.edge(r,n),o=!0),t.node(n).rank=t.node(r).rank+(o?i.minlen:-i.minlen)}))}(e,t)}function y(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}e.exports=l,l.initLowLimValues=d,l.initCutValues=f,l.calcCutValue=h,l.leaveEdge=v,l.enterEdge=g,l.exchangeEdges=m},function(e,t,n){var r=n(0);e.exports=function(e){var t=function(e){var t={},n=0;return r.forEach(e.children(),(function i(o){var a=n;r.forEach(e.children(o),i),t[o]={low:a,lim:n++}})),t}(e);r.forEach(e.graph().dummyChains,(function(n){for(var r=e.node(n),i=r.edgeObj,o=function(e,t,n,r){var i,o,a=[],u=[],s=Math.min(t[n].low,t[r].low),c=Math.max(t[n].lim,t[r].lim);i=n;do{i=e.parent(i),a.push(i)}while(i&&(t[i].low>s||c>t[i].lim));for(o=i,i=r;(i=e.parent(i))!==o;)u.push(i);return{path:a.concat(u.reverse()),lca:o}}(e,t,i.v,i.w),a=o.path,u=o.lca,s=0,c=a[s],l=!0;n!==i.w;){if(r=e.node(n),l){for(;(c=a[s])!==u&&e.node(c).maxRank<r.rank;)s++;c===u&&(l=!1)}if(!l){for(;s<a.length-1&&e.node(c=a[s+1]).minRank<=r.rank;)s++;c=a[s]}e.setParent(n,c),n=e.successors(n)[0]}}))}},function(e,t,n){var r=n(0),i=n(2);e.exports={run:function(e){var t=i.addDummyNode(e,"root",{},"_root"),n=function(e){var t={};return r.forEach(e.children(),(function(n){!function n(i,o){var a=e.children(i);a&&a.length&&r.forEach(a,(function(e){n(e,o+1)})),t[i]=o}(n,1)})),t}(e),o=r.max(r.values(n))-1,a=2*o+1;e.graph().nestingRoot=t,r.forEach(e.edges(),(function(t){e.edge(t).minlen*=a}));var u=function(e){return r.reduce(e.edges(),(function(t,n){return t+e.edge(n).weight}),0)}(e)+1;r.forEach(e.children(),(function(s){!function e(t,n,o,a,u,s,c){var l=t.children(c);if(l.length){var f=i.addBorderNode(t,"_bt"),h=i.addBorderNode(t,"_bb"),d=t.node(c);t.setParent(f,c),d.borderTop=f,t.setParent(h,c),d.borderBottom=h,r.forEach(l,(function(r){e(t,n,o,a,u,s,r);var i=t.node(r),l=i.borderTop?i.borderTop:r,d=i.borderBottom?i.borderBottom:r,p=i.borderTop?a:2*a,v=l!==d?1:u-s[c]+1;t.setEdge(f,l,{weight:p,minlen:v,nestingEdge:!0}),t.setEdge(d,h,{weight:p,minlen:v,nestingEdge:!0})})),t.parent(c)||t.setEdge(n,f,{weight:0,minlen:u+s[c]})}else c!==n&&t.setEdge(n,c,{weight:0,minlen:o})}(e,t,a,u,o,n,s)})),e.graph().nodeRankFactor=a},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,r.forEach(e.edges(),(function(t){e.edge(t).nestingEdge&&e.removeEdge(t)}))}}},function(e,t,n){var r=n(0),i=n(2);function o(e,t,n,r,o,a){var u={width:0,height:0,rank:a,borderType:t},s=o[t][a-1],c=i.addDummyNode(e,"border",u,n);o[t][a]=c,e.setParent(c,r),s&&e.setEdge(s,c,{weight:1})}e.exports=function(e){r.forEach(e.children(),(function t(n){var i=e.children(n),a=e.node(n);if(i.length&&r.forEach(i,t),r.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var u=a.minRank,s=a.maxRank+1;u<s;++u)o(e,"borderLeft","_bl",n,a,u),o(e,"borderRight","_br",n,a,u)}}))}},function(e,t,n){"use strict";var r=n(0);function i(e){r.forEach(e.nodes(),(function(t){o(e.node(t))})),r.forEach(e.edges(),(function(t){o(e.edge(t))}))}function o(e){var t=e.width;e.width=e.height,e.height=t}function a(e){e.y=-e.y}function u(e){var t=e.x;e.x=e.y,e.y=t}e.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||i(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){r.forEach(e.nodes(),(function(t){a(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,a),r.has(n,"y")&&a(n)}))}(e),"lr"!==t&&"rl"!==t||(function(e){r.forEach(e.nodes(),(function(t){u(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,u),r.has(n,"x")&&u(n)}))}(e),i(e))}}},function(e,t,n){"use strict";var r=n(0),i=n(299),o=n(300),a=n(301),u=n(305),s=n(306),c=n(6).Graph,l=n(2);function f(e,t,n){return r.map(t,(function(t){return u(e,t,n)}))}function h(e,t){var n=new c;r.forEach(e,(function(e){var i=e.graph().root,o=a(e,i,n,t);r.forEach(o.vs,(function(t,n){e.node(t).order=n})),s(e,n,o.vs)}))}function d(e,t){r.forEach(t,(function(t){r.forEach(t,(function(t,n){e.node(t).order=n}))}))}e.exports=function(e){var t=l.maxRank(e),n=f(e,r.range(1,t+1),"inEdges"),a=f(e,r.range(t-1,-1,-1),"outEdges"),u=i(e);d(e,u);for(var s,c=Number.POSITIVE_INFINITY,p=0,v=0;v<4;++p,++v){h(p%2?n:a,p%4>=2),u=l.buildLayerMatrix(e);var g=o(e,u);g<c&&(v=0,s=r.cloneDeep(u),c=g)}d(e,s)}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){var t={},n=r.filter(e.nodes(),(function(t){return!e.children(t).length})),i=r.max(r.map(n,(function(t){return e.node(t).rank}))),o=r.map(r.range(i+1),(function(){return[]})),a=r.sortBy(n,(function(t){return e.node(t).rank}));return r.forEach(a,(function n(i){if(!r.has(t,i)){t[i]=!0;var a=e.node(i);o[a.rank].push(i),r.forEach(e.successors(i),n)}})),o}},function(e,t,n){"use strict";var r=n(0);function i(e,t,n){for(var i=r.zipObject(n,r.map(n,(function(e,t){return t}))),o=r.flatten(r.map(t,(function(t){return r.sortBy(r.map(e.outEdges(t),(function(t){return{pos:i[t.w],weight:e.edge(t).weight}})),"pos")})),!0),a=1;a<n.length;)a<<=1;var u=2*a-1;a-=1;var s=r.map(new Array(u),(function(){return 0})),c=0;return r.forEach(o.forEach((function(e){var t=e.pos+a;s[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=s[t+1]),s[t=t-1>>1]+=e.weight;c+=e.weight*n}))),c}e.exports=function(e,t){for(var n=0,r=1;r<t.length;++r)n+=i(e,t[r-1],t[r]);return n}},function(e,t,n){var r=n(0),i=n(302),o=n(303),a=n(304);e.exports=function e(t,n,u,s){var c=t.children(n),l=t.node(n),f=l?l.borderLeft:void 0,h=l?l.borderRight:void 0,d={};f&&(c=r.filter(c,(function(e){return e!==f&&e!==h})));var p=i(t,c);r.forEach(p,(function(n){if(t.children(n.v).length){var i=e(t,n.v,u,s);d[n.v]=i,r.has(i,"barycenter")&&(o=n,a=i,r.isUndefined(o.barycenter)?(o.barycenter=a.barycenter,o.weight=a.weight):(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight))}var o,a}));var v=o(p,u);!function(e,t){r.forEach(e,(function(e){e.vs=r.flatten(e.vs.map((function(e){return t[e]?t[e].vs:e})),!0)}))}(v,d);var g=a(v,s);if(f&&(g.vs=r.flatten([f,g.vs,h],!0),t.predecessors(f).length)){var m=t.node(t.predecessors(f)[0]),y=t.node(t.predecessors(h)[0]);r.has(g,"barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+m.order+y.order)/(g.weight+2),g.weight+=2}return g}},function(e,t,n){var r=n(0);e.exports=function(e,t){return r.map(t,(function(t){var n=e.inEdges(t);if(n.length){var i=r.reduce(n,(function(t,n){var r=e.edge(n),i=e.node(n.v);return{sum:t.sum+r.weight*i.order,weight:t.weight+r.weight}}),{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}return{v:t}}))}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){var n={};return r.forEach(e,(function(e,t){var i=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};r.isUndefined(e.barycenter)||(i.barycenter=e.barycenter,i.weight=e.weight)})),r.forEach(t.edges(),(function(e){var t=n[e.v],i=n[e.w];r.isUndefined(t)||r.isUndefined(i)||(i.indegree++,t.out.push(n[e.w]))})),function(e){var t=[];function n(e){return function(t){t.merged||(r.isUndefined(t.barycenter)||r.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function i(t){return function(n){n.in.push(t),0==--n.indegree&&e.push(n)}}for(;e.length;){var o=e.pop();t.push(o),r.forEach(o.in.reverse(),n(o)),r.forEach(o.out,i(o))}return r.map(r.filter(t,(function(e){return!e.merged})),(function(e){return r.pick(e,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(e){return!e.indegree})))}},function(e,t,n){var r=n(0),i=n(2);function o(e,t,n){for(var i;t.length&&(i=r.last(t)).i<=n;)t.pop(),e.push(i.vs),n++;return n}e.exports=function(e,t){var n,a=i.partition(e,(function(e){return r.has(e,"barycenter")})),u=a.lhs,s=r.sortBy(a.rhs,(function(e){return-e.i})),c=[],l=0,f=0,h=0;u.sort((n=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:n?t.i-e.i:e.i-t.i})),h=o(c,s,h),r.forEach(u,(function(e){h+=e.vs.length,c.push(e.vs),l+=e.barycenter*e.weight,f+=e.weight,h=o(c,s,h)}));var d={vs:r.flatten(c,!0)};return f&&(d.barycenter=l/f,d.weight=f),d}},function(e,t,n){var r=n(0),i=n(6).Graph;e.exports=function(e,t,n){var o=function(e){for(var t;e.hasNode(t=r.uniqueId("_root")););return t}(e),a=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel((function(t){return e.node(t)}));return r.forEach(e.nodes(),(function(i){var u=e.node(i),s=e.parent(i);(u.rank===t||u.minRank<=t&&t<=u.maxRank)&&(a.setNode(i),a.setParent(i,s||o),r.forEach(e[n](i),(function(t){var n=t.v===i?t.w:t.v,o=a.edge(n,i),u=r.isUndefined(o)?0:o.weight;a.setEdge(n,i,{weight:e.edge(t).weight+u})})),r.has(u,"minRank")&&a.setNode(i,{borderLeft:u.borderLeft[t],borderRight:u.borderRight[t]}))})),a}},function(e,t,n){var r=n(0);e.exports=function(e,t,n){var i,o={};r.forEach(n,(function(n){for(var r,a,u=e.parent(n);u;){if((r=e.parent(u))?(a=o[r],o[r]=u):(a=i,i=u),a&&a!==u)return void t.setEdge(a,u);u=r}}))}},function(e,t,n){"use strict";var r=n(0),i=n(2),o=n(308).positionX;e.exports=function(e){(function(e){var t=i.buildLayerMatrix(e),n=e.graph().ranksep,o=0;r.forEach(t,(function(t){var i=r.max(r.map(t,(function(t){return e.node(t).height})));r.forEach(t,(function(t){e.node(t).y=o+i/2})),o+=i+n}))})(e=i.asNonCompoundGraph(e)),r.forEach(o(e),(function(t,n){e.node(n).x=t}))}},function(e,t,n){"use strict";var r=n(0),i=n(6).Graph,o=n(2);function a(e,t){var n={};return r.reduce(t,(function(t,i){var o=0,a=0,u=t.length,c=r.last(i);return r.forEach(i,(function(t,l){var f=function(e,t){if(e.node(t).dummy)return r.find(e.predecessors(t),(function(t){return e.node(t).dummy}))}(e,t),h=f?e.node(f).order:u;(f||t===c)&&(r.forEach(i.slice(a,l+1),(function(t){r.forEach(e.predecessors(t),(function(r){var i=e.node(r),a=i.order;!(a<o||h<a)||i.dummy&&e.node(t).dummy||s(n,r,t)}))})),a=l+1,o=h)})),i})),n}function u(e,t){var n={};function i(t,i,o,a,u){var c;r.forEach(r.range(i,o),(function(i){c=t[i],e.node(c).dummy&&r.forEach(e.predecessors(c),(function(t){var r=e.node(t);r.dummy&&(r.order<a||r.order>u)&&s(n,t,c)}))}))}return r.reduce(t,(function(t,n){var o,a=-1,u=0;return r.forEach(n,(function(r,s){if("border"===e.node(r).dummy){var c=e.predecessors(r);c.length&&(o=e.node(c[0]).order,i(n,u,s,a,o),u=s,a=o)}i(n,u,n.length,o,t.length)})),n})),n}function s(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function c(e,t,n){if(t>n){var i=t;t=n,n=i}return r.has(e[t],n)}function l(e,t,n,i){var o={},a={},u={};return r.forEach(t,(function(e){r.forEach(e,(function(e,t){o[e]=e,a[e]=e,u[e]=t}))})),r.forEach(t,(function(e){var t=-1;r.forEach(e,(function(e){var s=i(e);if(s.length)for(var l=((s=r.sortBy(s,(function(e){return u[e]}))).length-1)/2,f=Math.floor(l),h=Math.ceil(l);f<=h;++f){var d=s[f];a[e]===e&&t<u[d]&&!c(n,e,d)&&(a[d]=e,a[e]=o[e]=o[d],t=u[d])}}))})),{root:o,align:a}}function f(e,t,n,o,a){var u={},s=function(e,t,n,o){var a=new i,u=e.graph(),s=function(e,t,n){return function(i,o,a){var u,s=i.node(o),c=i.node(a),l=0;if(l+=s.width/2,r.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2}if(u&&(l+=n?u:-u),u=0,l+=(s.dummy?t:e)/2,l+=(c.dummy?t:e)/2,l+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":u=c.width/2;break;case"r":u=-c.width/2}return u&&(l+=n?u:-u),u=0,l}}(u.nodesep,u.edgesep,o);return r.forEach(t,(function(t){var i;r.forEach(t,(function(t){var r=n[t];if(a.setNode(r),i){var o=n[i],u=a.edge(o,r);a.setEdge(o,r,Math.max(s(e,t,i),u||0))}i=t}))})),a}(e,t,n,a),c=a?"borderLeft":"borderRight";function l(e,t){for(var n=s.nodes(),r=n.pop(),i={};r;)i[r]?e(r):(i[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return l((function(e){u[e]=s.inEdges(e).reduce((function(e,t){return Math.max(e,u[t.v]+s.edge(t))}),0)}),s.predecessors.bind(s)),l((function(t){var n=s.outEdges(t).reduce((function(e,t){return Math.min(e,u[t.w]-s.edge(t))}),Number.POSITIVE_INFINITY),r=e.node(t);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(u[t]=Math.max(u[t],n))}),s.successors.bind(s)),r.forEach(o,(function(e){u[e]=u[n[e]]})),u}function h(e,t){return r.minBy(r.values(t),(function(t){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(t,(function(t,r){var o=function(e,t){return e.node(t).width}(e,r)/2;n=Math.max(t+o,n),i=Math.min(t-o,i)})),n-i}))}function d(e,t){var n=r.values(t),i=r.min(n),o=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(a){var u,s=n+a,c=e[s];if(c!==t){var l=r.values(c);(u="l"===a?i-r.min(l):o-r.max(l))&&(e[s]=r.mapValues(c,(function(e){return e+u})))}}))}))}function p(e,t){return r.mapValues(e.ul,(function(n,i){if(t)return e[t.toLowerCase()][i];var o=r.sortBy(r.map(e,i));return(o[1]+o[2])/2}))}e.exports={positionX:function(e){var t,n=o.buildLayerMatrix(e),i=r.merge(a(e,n),u(e,n)),s={};r.forEach(["u","d"],(function(o){t="u"===o?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(t=r.map(t,(function(e){return r.values(e).reverse()})));var a=("u"===o?e.predecessors:e.successors).bind(e),u=l(0,t,i,a),c=f(e,t,u.root,u.align,"r"===n);"r"===n&&(c=r.mapValues(c,(function(e){return-e}))),s[o+n]=c}))}));var c=h(e,s);return d(s,c),p(s,e.graph().align)},findType1Conflicts:a,findType2Conflicts:u,addConflict:s,hasConflict:c,verticalAlignment:l,horizontalCompaction:f,alignCoordinates:d,findSmallestWidthAlignment:h,balance:p}},function(e,t,n){var r=n(0),i=n(2),o=n(6).Graph;e.exports={debugOrdering:function(e){var t=i.buildLayerMatrix(e),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.forEach(e.nodes(),(function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)})),r.forEach(e.edges(),(function(e){n.setEdge(e.v,e.w,{},e.name)})),r.forEach(t,(function(e,t){var i="layer"+t;n.setNode(i,{rank:"same"}),r.reduce(e,(function(e,t){return n.setEdge(e,t,{style:"invis"}),t}))})),n}}},function(e,t){e.exports="0.8.5"},function(e,t,n){"use strict";n.r(t);var h=function e(){f(this,e)},d=function(e){function t(){var e;return f(this,t),(e=s(this,c(t).call(this)))._cx=0,e._cy=0,e._radius=250,e}return l(t,e),u(t,[{key:"apply",value:function(e){var t=e.boundingBox(),n=(t[1]+t[3])/2,r=(t[0]+t[2])/2,i=Math.abs(t[1]-t[3]),o=Math.abs(t[0]-t[2]),a=.8*Math.min(i,o)/2,u=e.nodes(),s=2*Math.PI/u.length;u.forEach((function(e,t){e.x=n+a*Math.cos(t*s),e.y=r+a*Math.sin(t*s)}))}},{key:"cx",value:function(e){return arguments.length?(this._cx=e,this):this._cx}},{key:"cy",value:function(e){return arguments.length?(this._cy=e,this):this._cy}},{key:"radius",value:function(e){return arguments.length?(this._radius=e,this):this._radius}}]),t}(h),p=n(70),v=n(5);function g(e,t,n){Object(v.defaults)(e,Object(v.pick)(Object(v.cloneDeep)(t),n))}function m(e,t){g(e,t,["fill","stroke","strokeDash","strokeWidth"])}function y(e){var t={};return b(e)&&(t=function(e){return Object(v.pick)(e,["type","radius"])}(e)),w(e)&&(t=function(e){return Object(v.pick)(e,["type","width","height"])}(e)),m(t,e),t}function _(e,t){var n={};return m(n,e),"circle"===t&&(n.type="circle",n.radius=w(e)?Math.min(e.width||35,e.height||35):35),"rectangle"===t&&(n.type="rectangle",n.width=b(e)?2*(e.radius||40):80,n.height=b(e)?e.radius:40),n}function b(e){return"circle"===e.type}function w(e){return"rectangle"===e.type}var x=function(){function e(t,n,r,i){f(this,e),this._xmin=void 0!==t?t:1/0,this._ymin=void 0!==n?n:1/0,this._xmax=void 0!==r?r:-1/0,this._ymax=void 0!==i?i:-1/0}return u(e,[{key:"bounds",value:function(){return[[this._xmin,this._ymin],[this._xmax,this._ymax]]}},{key:"clone",value:function(){return new e(this._xmin,this._ymin,this._xmax,this._ymax)}},{key:"expand",value:function(t,n){return t instanceof e?this._expandBBox(t):(void 0!==n&&this._expandPoint(t,n),this)}},{key:"_expandBBox",value:function(e){var t=e.bounds(),n=a(t,2),r=a(n[0],2),i=r[0],o=r[1],u=a(n[1],2),s=u[0],c=u[1];return i<this._xmin&&(this._xmin=i),o<this._ymin&&(this._ymin=o),s>this._xmax&&(this._xmax=s),c>this._ymax&&(this._ymax=c),this}},{key:"_expandPoint",value:function(e,t){return e<this._xmin&&(this._xmin=e),e>this._xmax&&(this._xmax=e),t<this._ymin&&(this._ymin=t),t>this._ymax&&(this._ymax=t),this}}]),e}(),k=function e(){f(this,e)},E=function(e){function t(e){var n;return f(this,t),(n=s(this,c(t).call(this)))._nodes=[],n.fill=t.defaultFill,n.stroke=t.defaultStroke,n.strokeDash=t.defaultStrokeDash,n.strokeWidth=t.defaultStrokeWidth,e&&(void 0!==e.fill&&(n.fill=e.fill),void 0!==e.stroke&&(n.stroke=e.stroke),void 0!==e.strokeDash&&(n.strokeDash=e.strokeDash.slice()),void 0!==e.strokeWidth&&(n.strokeWidth=e.strokeWidth)),n}return l(t,e),u(t,[{key:"nodes",value:function(e){return arguments.length?(this._nodes=e,this):this._nodes}},{key:"_doStrokeAndFill",value:function(e){this.strokeDash&&e.setLineDash(this.strokeDash),null!==this.strokeWidth&&(e.lineWidth=this.strokeWidth),this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&this.strokeWidth&&(e.strokeStyle=this.stroke,e.stroke())}}]),t}(k);E.defaultFill="white",E.defaultStroke="#333333",E.defaultStrokeDash=null,E.defaultStrokeWidth=1.5;var S=2*Math.PI,j=Math.PI/3,M=function(e){function t(e){var n;return f(this,t),(n=s(this,c(t).call(this,e)))._width=t.defaultWidth,n._height=t.defaultHeight,e&&w(e)&&(e.width&&(n._width=e.width),e.height&&(n._height=e.height)),n}return l(t,e),u(t,[{key:"bounds",value:function(e,t){var n=this,r=new x;return this._nodes.forEach((function(i){var o=e(i.x),a=t(i.y);r.expand(o+n._width/2,a+n._height/2),r.expand(o-n._width/2,a-n._height/2)})),r}},{key:"containsPoint",value:function(e,t,n,r){r=r||1;var i=this._width/r/2,o=this._height/r/2,a=e.y+o,u=e.x+i,s=e.y-o,c=e.x-i;return u>=t&&t>=c&&a>=n&&n>=s}},{key:"height",value:function(e){return arguments.length?(this._height=+e,this):this._height}},{key:"intersect",value:function(e){for(;e<-Math.PI;)e+=S;for(;e>Math.PI;)e-=S;var t=Math.tan(e),n=function(e,t,n){var r=Math.atan2(n,t);return e>-r&&e<=r?1:e>r&&e<=Math.PI-r?2:e>Math.PI-r||e<=-(Math.PI-r)?3:4}(e,this._width,this._height),r=1===n||2===n?1:-1,i=3===n||4===n?-1:1;return 1===n||3===n?(r*=this._width/2,i*=t*this._width/2):(r*=this._height/(2*t),i*=this._height/2),{x:r,y:i}}},{key:"render",value:function(e,t,n){var r=this;if(this._nodes.length){e.save(),e.beginPath();var i=this._width/2,o=this._height/2;this._nodes.forEach((function(a){var u=t(a.x),s=n(a.y);e.rect(Math.round(u-i)-.5,Math.round(s-o)-.5,r._width+1,r._height+1)})),this._doStrokeAndFill(e),e.restore()}}},{key:"selfLoopPoints",value:function(e){var t=e.x,n=e.y,r=Math.max(100,Math.min(this._width,200)),i=Math.min(this._height,100),o=this._width/2,a=i/4;return[{x:t,y:n,dx:o,dy:-a},{x:t,y:n,dx:o+r*Math.cos(-j),dy:i*Math.sin(-j)},{x:t,y:n,dx:o+r*Math.cos(j),dy:i*Math.sin(j)},{x:t,y:n,dx:o,dy:a}]}},{key:"width",value:function(e){return arguments.length?(this._width=+e,this):this._width}}]),t}(E);M.defaultWidth=125,M.defaultHeight=60;var O=function(e){function t(){return f(this,t),s(this,c(t).apply(this,arguments))}return l(t,e),u(t,[{key:"apply",value:function(e,t){var n=new p.graphlib.Graph({multigraph:!0});n.setGraph(t||{nodesep:2*M.defaultWidth,ranksep:2*M.defaultWidth,rankdir:"BT"}),n.setDefaultEdgeLabel((function(){return{}})),e.nodes().forEach((function(e){n.setNode(e.id,{label:e.id,width:M.defaultWidth,height:M.defaultHeight})})),e.edges().forEach((function(e){n.setEdge(e.source,e.target)})),Object(p.layout)(n);var r=new Map(e.nodes().map((function(e){return[e.id,e]}))),i=n.graph(),o=i.width?i.width/2:0,a=i.height?i.height/2:0;n.nodes().forEach((function(e){var t=r.get(e);if(t){var i=n.node(t.id);t.x=i.x-o,t.y=i.y-a}}))}}]),t}(h),A=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},C=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return A(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}(A),T=C.right,L=(C.left,T),N=Array.prototype,I=(N.slice,N.map,Math.sqrt(50)),R=Math.sqrt(10),D=Math.sqrt(2);function F(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=I?10:o>=R?5:o>=D?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=I?10:o>=R?5:o>=D?2:1)}Array.prototype.slice;var P={value:function(){}};function z(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new V(r)}function V(e){this._=e}function U(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function q(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function B(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=P,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}V.prototype=z.prototype={constructor:V,on:function(e,t){var n,r=this._,i=U(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=B(r[n],e.name,t);else if(null==t)for(n in r)r[n]=B(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=q(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new V(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var W=z;function H(){}var G=function(e){return null==e?H:function(){return this.querySelector(e)}};function $(){return[]}var Y=function(e){return null==e?$:function(){return this.querySelectorAll(e)}},X=function(e){return function(){return this.matches(e)}},Z=function(e){return new Array(e.length)};function K(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Q(e,t,n,r,i,o){for(var a,u=0,s=t.length,c=o.length;u<c;++u)(a=t[u])?(a.__data__=o[u],r[u]=a):n[u]=new K(e,o[u]);for(;u<s;++u)(a=t[u])&&(i[u]=a)}function J(e,t,n,r,i,o,a){var u,s,c,l={},f=t.length,h=o.length,d=new Array(f);for(u=0;u<f;++u)(s=t[u])&&(d[u]=c="$"+a.call(s,s.__data__,u,t),c in l?i[u]=s:l[c]=s);for(u=0;u<h;++u)(s=l[c="$"+a.call(e,o[u],u,o)])?(r[u]=s,s.__data__=o[u],l[c]=null):n[u]=new K(e,o[u]);for(u=0;u<f;++u)(s=t[u])&&l[d[u]]===s&&(i[u]=s)}function ee(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}K.prototype={constructor:K,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var te="http://www.w3.org/1999/xhtml",ne={svg:"http://www.w3.org/2000/svg",xhtml:te,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},re=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),ne.hasOwnProperty(t)?{space:ne[t],local:e}:e};function ie(e){return function(){this.removeAttribute(e)}}function oe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ae(e,t){return function(){this.setAttribute(e,t)}}function ue(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function se(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function ce(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var le=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function fe(e){return function(){this.style.removeProperty(e)}}function he(e,t,n){return function(){this.style.setProperty(e,t,n)}}function de(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function pe(e,t){return e.style.getPropertyValue(t)||le(e).getComputedStyle(e,null).getPropertyValue(t)}function ve(e){return function(){delete this[e]}}function ge(e,t){return function(){this[e]=t}}function me(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ye(e){return e.trim().split(/^|\s+/)}function _e(e){return e.classList||new be(e)}function be(e){this._node=e,this._names=ye(e.getAttribute("class")||"")}function we(e,t){for(var n=_e(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function xe(e,t){for(var n=_e(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ke(e){return function(){we(this,e)}}function Ee(e){return function(){xe(this,e)}}function Se(e,t){return function(){(t.apply(this,arguments)?we:xe)(this,e)}}function je(){this.textContent=""}function Me(e){return function(){this.textContent=e}}function Oe(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Ae(){this.innerHTML=""}function Ce(e){return function(){this.innerHTML=e}}function Te(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Le(){this.nextSibling&&this.parentNode.appendChild(this)}function Ne(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ie(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===te&&t.documentElement.namespaceURI===te?t.createElement(e):t.createElementNS(n,e)}}function Re(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}be.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var De=function(e){var t=re(e);return(t.local?Re:Ie)(t)};function Fe(){return null}function Pe(){var e=this.parentNode;e&&e.removeChild(this)}function ze(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ve(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}var Ue={},qe=null;function Be(e,t,n){return e=We(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function We(e,t,n){return function(r){var i=qe;qe=r;try{e.call(this,this.__data__,t,n)}finally{qe=i}}}function He(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function Ge(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function $e(e,t,n){var r=Ue.hasOwnProperty(e.type)?Be:We;return function(i,o,a){var u,s=this.__on,c=r(t,o,a);if(s)for(var l=0,f=s.length;l<f;++l)if((u=s[l]).type===e.type&&u.name===e.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),void(u.value=t);this.addEventListener(e.type,c,n),u={type:e.type,name:e.name,value:t,listener:c,capture:n},s?s.push(u):this.__on=[u]}}function Ye(e,t,n,r){var i=qe;e.sourceEvent=qe,qe=e;try{return t.apply(n,r)}finally{qe=i}}function Xe(e,t,n){var r=le(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Ze(e,t){return function(){return Xe(this,e,t)}}function Ke(e,t){return function(){return Xe(this,e,t.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Ue={mouseenter:"mouseover",mouseleave:"mouseout"}));var Qe=[null];function Je(e,t){this._groups=e,this._parents=t}function et(){return new Je([[document.documentElement]],Qe)}Je.prototype=et.prototype={constructor:Je,select:function(e){"function"!=typeof e&&(e=G(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,u=t[i],s=u.length,c=r[i]=new Array(s),l=0;l<s;++l)(o=u[l])&&(a=e.call(o,o.__data__,l,u))&&("__data__"in o&&(a.__data__=o.__data__),c[l]=a);return new Je(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=Y(e));for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,u=t[o],s=u.length,c=0;c<s;++c)(a=u[c])&&(r.push(e.call(a,a.__data__,c,u)),i.push(a));return new Je(r,i)},filter:function(e){"function"!=typeof e&&(e=X(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],u=a.length,s=r[i]=[],c=0;c<u;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&s.push(o);return new Je(r,this._parents)},data:function(e,t){if(!e)return p=new Array(this.size()),l=-1,this.each((function(e){p[++l]=e})),p;var n,r=t?J:Q,i=this._parents,o=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=o.length,u=new Array(a),s=new Array(a),c=new Array(a),l=0;l<a;++l){var f=i[l],h=o[l],d=h.length,p=e.call(f,f&&f.__data__,l,i),v=p.length,g=s[l]=new Array(v),m=u[l]=new Array(v);r(f,h,g,m,c[l]=new Array(d),p,t);for(var y,_,b=0,w=0;b<v;++b)if(y=g[b]){for(b>=w&&(w=b+1);!(_=m[w])&&++w<v;);y._next=_||null}}return(u=new Je(u,i))._enter=s,u._exit=c,u},enter:function(){return new Je(this._enter||this._groups.map(Z),this._parents)},exit:function(){return new Je(this._exit||this._groups.map(Z),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,c=t[u],l=n[u],f=c.length,h=a[u]=new Array(f),d=0;d<f;++d)(s=c[d]||l[d])&&(h[d]=s);for(;u<r;++u)a[u]=t[u];return new Je(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=ee);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,u=n[o],s=u.length,c=i[o]=new Array(s),l=0;l<s;++l)(a=u[l])&&(c[l]=a);c.sort(t)}return new Je(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,u=o.length;a<u;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=re(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?oe:ie:"function"==typeof t?n.local?ce:se:n.local?ue:ae)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?fe:"function"==typeof t?de:he)(e,t,null==n?"":n)):pe(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?ve:"function"==typeof t?me:ge)(e,t)):this.node()[e]},classed:function(e,t){var n=ye(e+"");if(arguments.length<2){for(var r=_e(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?Se:t?ke:Ee)(n,t))},text:function(e){return arguments.length?this.each(null==e?je:("function"==typeof e?Oe:Me)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Ae:("function"==typeof e?Te:Ce)(e)):this.node().innerHTML},raise:function(){return this.each(Le)},lower:function(){return this.each(Ne)},append:function(e){var t="function"==typeof e?e:De(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:De(e),r=null==t?Fe:"function"==typeof t?t:G(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Pe)},clone:function(e){return this.select(e?Ve:ze)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=He(e+""),a=o.length;if(!(arguments.length<2)){for(u=t?$e:Ge,null==n&&(n=!1),r=0;r<a;++r)this.each(u(o[r],t,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<a;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"==typeof t?Ke:Ze)(e,t))}};var tt=et,nt=function(e){return"string"==typeof e?new Je([[document.querySelector(e)]],[document.documentElement]):new Je([[e]],Qe)};function rt(){qe.stopImmediatePropagation()}var it=function(){qe.preventDefault(),qe.stopImmediatePropagation()},ot=function(e){var t=e.document.documentElement,n=nt(e).on("dragstart.drag",it,!0);"onselectstart"in t?n.on("selectstart.drag",it,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")};function at(e,t){var n=e.document.documentElement,r=nt(e).on("dragstart.drag",null);t&&(r.on("click.drag",it,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var ut=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function st(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ct(){}var lt="\\s*([+-]?\\d+)\\s*",ft="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ht="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dt=/^#([0-9a-f]{3,8})$/,pt=new RegExp("^rgb\\("+[lt,lt,lt]+"\\)$"),vt=new RegExp("^rgb\\("+[ht,ht,ht]+"\\)$"),gt=new RegExp("^rgba\\("+[lt,lt,lt,ft]+"\\)$"),mt=new RegExp("^rgba\\("+[ht,ht,ht,ft]+"\\)$"),yt=new RegExp("^hsl\\("+[ft,ht,ht]+"\\)$"),_t=new RegExp("^hsla\\("+[ft,ht,ht,ft]+"\\)$"),bt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function wt(){return this.rgb().formatHex()}function xt(){return this.rgb().formatRgb()}function kt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Et(t):3===n?new Ot(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?new Ot(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?new Ot(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=pt.exec(e))?new Ot(t[1],t[2],t[3],1):(t=vt.exec(e))?new Ot(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=gt.exec(e))?St(t[1],t[2],t[3],t[4]):(t=mt.exec(e))?St(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=yt.exec(e))?Lt(t[1],t[2]/100,t[3]/100,1):(t=_t.exec(e))?Lt(t[1],t[2]/100,t[3]/100,t[4]):bt.hasOwnProperty(e)?Et(bt[e]):"transparent"===e?new Ot(NaN,NaN,NaN,0):null}function Et(e){return new Ot(e>>16&255,e>>8&255,255&e,1)}function St(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ot(e,t,n,r)}function jt(e){return e instanceof ct||(e=kt(e)),e?new Ot((e=e.rgb()).r,e.g,e.b,e.opacity):new Ot}function Mt(e,t,n,r){return 1===arguments.length?jt(e):new Ot(e,t,n,null==r?1:r)}function Ot(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function At(){return"#"+Tt(this.r)+Tt(this.g)+Tt(this.b)}function Ct(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Tt(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Lt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new It(e,t,n,r)}function Nt(e){if(e instanceof It)return new It(e.h,e.s,e.l,e.opacity);if(e instanceof ct||(e=kt(e)),!e)return new It;if(e instanceof It)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,u=o-i,s=(o+i)/2;return u?(a=t===o?(n-r)/u+6*(n<r):n===o?(r-t)/u+2:(t-n)/u+4,u/=s<.5?o+i:2-o-i,a*=60):u=s>0&&s<1?0:a,new It(a,u,s,e.opacity)}function It(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Rt(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Dt(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}ut(ct,kt,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:wt,formatHex:wt,formatHsl:function(){return Nt(this).formatHsl()},formatRgb:xt,toString:xt}),ut(Ot,Mt,st(ct,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Ot(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Ot(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:At,formatHex:At,formatRgb:Ct,toString:Ct})),ut(It,(function(e,t,n,r){return 1===arguments.length?Nt(e):new It(e,t,n,null==r?1:r)}),st(ct,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new It(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new It(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ot(Rt(e>=240?e-240:e+120,i,r),Rt(e,i,r),Rt(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Ft=function(e){return function(){return e}};function Pt(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Ft(isNaN(e)?t:e)}var zt=function e(t){var n=function(e){return 1==(e=+e)?Pt:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Ft(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=Mt(e)).r,(t=Mt(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=Pt(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function Vt(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),u=new Array(i);for(n=0;n<i;++n)r=Mt(t[n]),o[n]=r.r||0,a[n]=r.g||0,u[n]=r.b||0;return o=e(o),a=e(a),u=e(u),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=u(e),r+""}}}Vt((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,u=r<t-1?e[r+2]:2*o-i;return Dt((n-r/t)*t,a,i,o,u)}})),Vt((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],u=e[(r+2)%t];return Dt((n-r/t)*t,i,o,a,u)}}));var Ut=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}};function qt(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Kt(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}var Bt,Wt,Ht=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}},Gt=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},$t=function(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Kt(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},Yt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xt=new RegExp(Yt.source,"g"),Zt=function(e,t){var n,r,i,o=Yt.lastIndex=Xt.lastIndex=0,a=-1,u=[],s=[];for(e+="",t+="";(n=Yt.exec(e))&&(r=Xt.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:Gt(n,r)})),o=Xt.lastIndex;return o<t.length&&(i=t.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})},Kt=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?Ft(t):("number"===r?Gt:"string"===r?(n=kt(t))?(t=n,zt):Zt:t instanceof kt?zt:t instanceof Date?Ht:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?Ut:Array.isArray(t)?qt:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?$t:Gt)(e,t)},Qt=function(){for(var e,t=qe;e=t.sourceEvent;)t=e;return t},Jt=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]},en=function(e,t,n){arguments.length<3&&(n=t,t=Qt().changedTouches);for(var r,i=0,o=t?t.length:0;i<o;++i)if((r=t[i]).identifier===n)return Jt(e,r);return null},tn=function(e){var t=Qt();return t.changedTouches&&(t=t.changedTouches[0]),Jt(e,t)},nn=0,rn=0,on=0,an=0,un=0,sn=0,cn="object"==typeof performance&&performance.now?performance:Date,ln="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function fn(){return un||(ln(hn),un=cn.now()+sn)}function hn(){un=0}function dn(){this._call=this._time=this._next=null}function pn(e,t,n){var r=new dn;return r.restart(e,t,n),r}function vn(){un=(an=cn.now())+sn,nn=rn=0;try{!function(){fn(),++nn;for(var e,t=Bt;t;)(e=un-t._time)>=0&&t._call.call(null,e),t=t._next;--nn}()}finally{nn=0,function(){for(var e,t,n=Bt,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Bt=t);Wt=e,mn(r)}(),un=0}}function gn(){var e=cn.now(),t=e-an;t>1e3&&(sn-=t,an=e)}function mn(e){nn||(rn&&(rn=clearTimeout(rn)),e-un>24?(e<1/0&&(rn=setTimeout(vn,e-cn.now()-sn)),on&&(on=clearInterval(on))):(on||(an=cn.now(),on=setInterval(gn,1e3)),nn=1,ln(vn)))}dn.prototype=pn.prototype={constructor:dn,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?fn():+n)+(null==t?0:+t),this._next||Wt===this||(Wt?Wt._next=this:Bt=this,Wt=this),this._call=e,this._time=n,mn()},stop:function(){this._call&&(this._call=null,this._time=1/0,mn())}};var yn=function(e,t,n){var r=new dn;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r},_n=W("start","end","cancel","interrupt"),bn=[],wn=function(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(s){var c,l,f,h;if(1!==n.state)return u();for(c in i)if((h=i[c]).name===n.name){if(3===h.state)return yn(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[c])}if(yn((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(s))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),c=0,l=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++l]=h);r.length=l+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=pn((function(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:i,on:_n,tween:bn,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function xn(e,t){var n=En(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function kn(e,t){var n=En(e,t);if(n.state>3)throw new Error("too late; already running");return n}function En(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var Sn,jn,Mn,On,An=function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}},Cn=180/Math.PI,Tn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Ln=function(e,t,n,r,i,o){var a,u,s;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Cn,skewX:Math.atan(s)*Cn,scaleX:a,scaleY:u}};function Nn(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var u=[],s=[];return o=e(o),a=e(a),function(e,r,i,o,a,u){if(e!==i||r!==o){var s=a.push("translate(",null,t,null,n);u.push({i:s-4,x:Gt(e,i)},{i:s-2,x:Gt(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,u,s),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Gt(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,u,s),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Gt(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,u,s),function(e,t,n,r,o,a){if(e!==n||t!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:Gt(e,n)},{i:u-2,x:Gt(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,s),o=a=null,function(e){for(var t,n=-1,r=s.length;++n<r;)u[(t=s[n]).i]=t.x(e);return u.join("")}}}var In=Nn((function(e){return"none"===e?Tn:(Sn||(Sn=document.createElement("DIV"),jn=document.documentElement,Mn=document.defaultView),Sn.style.transform=e,e=Mn.getComputedStyle(jn.appendChild(Sn),null).getPropertyValue("transform"),jn.removeChild(Sn),e=e.slice(7,-1).split(","),Ln(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),Rn=Nn((function(e){return null==e?Tn:(On||(On=document.createElementNS("http://www.w3.org/2000/svg","g")),On.setAttribute("transform",e),(e=On.transform.baseVal.consolidate())?(e=e.matrix,Ln(e.a,e.b,e.c,e.d,e.e,e.f)):Tn)}),", ",")",")");function Dn(e,t){var n,r;return function(){var i=kn(this,e),o=i.tween;if(o!==n)for(var a=0,u=(r=n=o).length;a<u;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function Fn(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=kn(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:t,value:n},s=0,c=i.length;s<c;++s)if(i[s].name===t){i[s]=u;break}s===c&&i.push(u)}o.tween=i}}function Pn(e,t,n){var r=e._id;return e.each((function(){var e=kn(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return En(e,r).value[t]}}var zn=function(e,t){var n;return("number"==typeof t?Gt:t instanceof kt?zt:(n=kt(t))?(t=n,zt):Zt)(e,t)};function Vn(e){return function(){this.removeAttribute(e)}}function Un(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qn(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function Bn(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function Wn(e,t,n){var r,i,o;return function(){var a,u,s=n(this);if(null!=s)return(a=this.getAttribute(e))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=t(r=a,s));this.removeAttribute(e)}}function Hn(e,t,n){var r,i,o;return function(){var a,u,s=n(this);if(null!=s)return(a=this.getAttributeNS(e.space,e.local))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=t(r=a,s));this.removeAttributeNS(e.space,e.local)}}function Gn(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function $n(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Yn(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&$n(e,i)),n}return i._value=t,i}function Xn(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Gn(e,i)),n}return i._value=t,i}function Zn(e,t){return function(){xn(this,e).delay=+t.apply(this,arguments)}}function Kn(e,t){return t=+t,function(){xn(this,e).delay=t}}function Qn(e,t){return function(){kn(this,e).duration=+t.apply(this,arguments)}}function Jn(e,t){return t=+t,function(){kn(this,e).duration=t}}function er(e,t){if("function"!=typeof t)throw new Error;return function(){kn(this,e).ease=t}}function tr(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?xn:kn;return function(){var a=o(this,e),u=a.on;u!==r&&(i=(r=u).copy()).on(t,n),a.on=i}}var nr=tt.prototype.constructor;function rr(e){return function(){this.style.removeProperty(e)}}function ir(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function or(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&ir(e,o,n)),r}return o._value=t,o}function ar(e){return function(t){this.textContent=e.call(this,t)}}function ur(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&ar(r)),t}return r._value=e,r}var sr=0;function cr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function lr(){return++sr}var fr=tt.prototype;cr.prototype=function(e){return tt().transition(e)}.prototype={constructor:cr,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=G(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,s,c=r[a],l=c.length,f=o[a]=new Array(l),h=0;h<l;++h)(u=c[h])&&(s=e.call(u,u.__data__,h,c))&&("__data__"in u&&(s.__data__=u.__data__),f[h]=s,wn(f[h],t,n,h,f,En(u,n)));return new cr(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Y(e));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var s,c=r[u],l=c.length,f=0;f<l;++f)if(s=c[f]){for(var h,d=e.call(s,s.__data__,f,c),p=En(s,n),v=0,g=d.length;v<g;++v)(h=d[v])&&wn(h,t,n,v,d,p);o.push(d),a.push(s)}return new cr(o,a,t,n)},filter:function(e){"function"!=typeof e&&(e=X(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],u=a.length,s=r[i]=[],c=0;c<u;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&s.push(o);return new cr(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,c=t[u],l=n[u],f=c.length,h=a[u]=new Array(f),d=0;d<f;++d)(s=c[d]||l[d])&&(h[d]=s);for(;u<r;++u)a[u]=t[u];return new cr(a,this._parents,this._name,this._id)},selection:function(){return new nr(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=lr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,c=0;c<s;++c)if(a=u[c]){var l=En(a,t);wn(a,e,n,c,u,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new cr(r,this._parents,e,n)},call:fr.call,nodes:fr.nodes,node:fr.node,size:fr.size,empty:fr.empty,each:fr.each,on:function(e,t){var n=this._id;return arguments.length<2?En(this.node(),n).on.on(e):this.each(tr(n,e,t))},attr:function(e,t){var n=re(e),r="transform"===n?Rn:zn;return this.attrTween(e,"function"==typeof t?(n.local?Hn:Wn)(n,r,Pn(this,"attr."+e,t)):null==t?(n.local?Un:Vn)(n):(n.local?Bn:qn)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=re(e);return this.tween(n,(r.local?Yn:Xn)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?In:zn;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=pe(this,e),a=(this.style.removeProperty(e),pe(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,rr(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=pe(this,e),u=n(this),s=u+"";return null==u&&(this.style.removeProperty(e),s=u=pe(this,e)),a===s?null:a===r&&s===i?o:(i=s,o=t(r=a,u))}}(e,r,Pn(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,u="end."+a;return function(){var s=kn(this,e),c=s.on,l=null==s.value[a]?o||(o=rr(t)):void 0;c===n&&i===l||(r=(n=c).copy()).on(u,i=l),s.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=pe(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,or(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Pn(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,ur(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=En(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?Dn:Fn)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Zn:Kn)(t,e)):En(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Qn:Jn)(t,e)):En(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(er(t,e)):En(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var u={value:a},s={value:function(){0==--i&&o()}};n.each((function(){var n=kn(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),n.on=t}))}))}};var hr={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function dr(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return hr.time=fn(),hr;return n}function pr(e){return{type:e}}tt.prototype.interrupt=function(e){return this.each((function(){An(this,e)}))},tt.prototype.transition=function(e){var t,n;e instanceof cr?(t=e._id,e=e._name):(t=lr(),(n=hr).time=fn(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,c=0;c<s;++c)(a=u[c])&&wn(a,e,t,c,u,n||dr(a,t));return new cr(r,this._parents,e,t)},["w","e"].map(pr),["n","s"].map(pr),["n","w","e","s","nw","ne","sw","se"].map(pr),Math.cos,Math.sin,Math.PI,Math.max,Array.prototype.slice;var vr=Math.PI,gr=2*vr,mr=gr-1e-6;function yr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function _r(){}function br(e,t){var n=new _r;if(e instanceof _r)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,i=-1,o=e.length;if(null==t)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t(r=e[i],i,e),r)}else if(e)for(var a in e)n.set(a,e[a]);return n}function wr(){}yr.prototype=function(){return new yr}.prototype={constructor:yr,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,u=n-e,s=r-t,c=o-e,l=a-t,f=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>1e-6)if(Math.abs(l*u-s*c)>1e-6&&i){var h=n-o,d=r-a,p=u*u+s*s,v=h*h+d*d,g=Math.sqrt(p),m=Math.sqrt(f),y=i*Math.tan((vr-Math.acos((p+f-v)/(2*g*m)))/2),_=y/m,b=y/g;Math.abs(_-1)>1e-6&&(this._+="L"+(e+_*c)+","+(t+_*l)),this._+="A"+i+","+i+",0,0,"+ +(l*h>c*d)+","+(this._x1=e+b*u)+","+(this._y1=t+b*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),u=n*Math.sin(r),s=e+a,c=t+u,l=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+s+","+c),n&&(f<0&&(f=f%gr+gr),f>mr?this._+="A"+n+","+n+",0,1,"+l+","+(e-a)+","+(t-u)+"A"+n+","+n+",0,1,"+l+","+(this._x1=s)+","+(this._y1=c):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=vr)+","+l+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},_r.prototype=br.prototype={constructor:_r,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var xr=br.prototype;wr.prototype=function(e,t){var n=new wr;if(e instanceof wr)e.each((function(e){n.add(e)}));else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}.prototype={constructor:wr,has:xr.has,add:function(e){return this["$"+(e+="")]=e,this},remove:xr.remove,clear:xr.clear,values:xr.keys,size:xr.size,empty:xr.empty,each:xr.each},Array.prototype.slice;var kr=function(e){return function(){return e}};function Er(e,t,n,r,i,o,a,u,s,c){this.target=e,this.type=t,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=u,this.dy=s,this._=c}function Sr(){return!qe.ctrlKey&&!qe.button}function jr(){return this.parentNode}function Mr(e){return null==e?{x:qe.x,y:qe.y}:e}function Or(){return navigator.maxTouchPoints||"ontouchstart"in this}Er.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Ar={},Cr={};function Tr(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function Lr(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function Nr(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}var Ir=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,u=0,s=o<=0,c=!1;function l(){if(s)return Cr;if(c)return c=!1,Ar;var t,r,i=a;if(34===e.charCodeAt(i)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?s=!0:10===(r=e.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(a)&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=e.charCodeAt(t=a++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(i,t)}return s=!0,e.slice(i,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=l())!==Cr;){for(var f=[];r!==Ar&&r!==Cr;)f.push(r),r=l();t&&null==(f=t(f,u++))||i.push(f)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?function(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+Nr(-t,6):t>9999?"+"+Nr(t,6):Nr(t,4))+"-"+Nr(e.getUTCMonth()+1,2)+"-"+Nr(e.getUTCDate(),2)+(o?"T"+Nr(n,2)+":"+Nr(r,2)+":"+Nr(i,2)+"."+Nr(o,3)+"Z":i?"T"+Nr(n,2)+":"+Nr(r,2)+":"+Nr(i,2)+"Z":r||n?"T"+Nr(n,2)+":"+Nr(r,2)+"Z":"")}(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=Tr(e);return function(r,i){return t(n(r),i,e)}}(e,t):Tr(e)}));return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=Lr(t)),[n.map(a).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=Lr(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}},Rr=Ir(","),Dr=Rr.parse,Fr=(Rr.parseRows,Rr.format,Rr.formatBody,Rr.formatRows,Rr.formatRow,Rr.formatValue,Ir("\t")),Pr=Fr.parse;function zr(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}Fr.parseRows,Fr.format,Fr.formatBody,Fr.formatRows,Fr.formatRow,Fr.formatValue;var Vr=function(e,t){return fetch(e,t).then(zr)};function Ur(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),Vr(t,n).then((function(t){return e(t,r)}))}}function qr(e){return function(t,n){return Vr(t,n).then((function(t){return(new DOMParser).parseFromString(t,e)}))}}function Br(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,u,s,c,l,f,h,d=e._root,p={data:r},v=e._x0,g=e._y0,m=e._x1,y=e._y1;if(!d)return e._root=p,e;for(;d.length;)if((c=t>=(o=(v+m)/2))?v=o:m=o,(l=n>=(a=(g+y)/2))?g=a:y=a,i=d,!(d=d[f=l<<1|c]))return i[f]=p,e;if(u=+e._x.call(null,d.data),s=+e._y.call(null,d.data),t===u&&n===s)return p.next=d,i?i[f]=p:e._root=p,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(c=t>=(o=(v+m)/2))?v=o:m=o,(l=n>=(a=(g+y)/2))?g=a:y=a}while((f=l<<1|c)==(h=(s>=a)<<1|u>=o));return i[h]=d,i[f]=p,e}Ur(Dr),Ur(Pr),qr("application/xml"),qr("text/html"),qr("image/svg+xml");var Wr=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i};function Hr(e){return e[0]}function Gr(e){return e[1]}function $r(e,t,n){var r=new Yr(null==t?Hr:t,null==n?Gr:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function Yr(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Xr(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Zr=$r.prototype=Yr.prototype;Zr.copy=function(){var e,t,n=new Yr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Xr(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=Xr(t));return n},Zr.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return Br(this.cover(t,n),t,n,e)},Zr.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),u=new Array(o),s=1/0,c=1/0,l=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,u[n]=i,r<s&&(s=r),r>l&&(l=r),i<c&&(c=i),i>f&&(f=i));if(s>l||c>f)return this;for(this.cover(s,c).cover(l,f),n=0;n<o;++n)Br(this,a[n],u[n],e[n]);return this},Zr.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,u,s=i-n,c=this._root;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,(a=new Array(4))[u]=c,c=a,s*=2,u){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Zr.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},Zr.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Zr.find=function(e,t,n){var r,i,o,a,u,s,c,l=this._x0,f=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new Wr(v,l,f,h,d)),null==n?n=1/0:(l=e-n,f=t-n,h=e+n,d=t+n,n*=n);s=p.pop();)if(!(!(v=s.node)||(i=s.x0)>h||(o=s.y0)>d||(a=s.x1)<l||(u=s.y1)<f))if(v.length){var g=(i+a)/2,m=(o+u)/2;p.push(new Wr(v[3],g,m,a,u),new Wr(v[2],i,m,g,u),new Wr(v[1],g,o,a,m),new Wr(v[0],i,o,g,m)),(c=(t>=m)<<1|e>=g)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=s)}else{var y=e-+this._x.call(null,v.data),_=t-+this._y.call(null,v.data),b=y*y+_*_;if(b<n){var w=Math.sqrt(n=b);l=e-w,f=t-w,h=e+w,d=t+w,r=v.data}}return r},Zr.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,u,s,c,l,f,h,d=this._root,p=this._x0,v=this._y0,g=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(u=(p+g)/2))?p=u:g=u,(l=a>=(s=(v+m)/2))?v=s:m=s,t=d,!(d=d[f=l<<1|c]))return this;if(!d.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,h=f)}for(;d.data!==e;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(d=t[0]||t[1]||t[2]||t[3])&&d===(t[3]||t[2]||t[1]||t[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},Zr.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},Zr.root=function(){return this._root},Zr.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},Zr.visit=function(e){var t,n,r,i,o,a,u=[],s=this._root;for(s&&u.push(new Wr(s,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(s=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&s.length){var c=(r+o)/2,l=(i+a)/2;(n=s[3])&&u.push(new Wr(n,c,l,o,a)),(n=s[2])&&u.push(new Wr(n,r,l,c,a)),(n=s[1])&&u.push(new Wr(n,c,i,o,l)),(n=s[0])&&u.push(new Wr(n,r,i,c,l))}return this},Zr.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new Wr(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,u=t.y0,s=t.x1,c=t.y1,l=(a+s)/2,f=(u+c)/2;(o=i[0])&&n.push(new Wr(o,a,u,l,f)),(o=i[1])&&n.push(new Wr(o,l,u,s,f)),(o=i[2])&&n.push(new Wr(o,a,f,l,c)),(o=i[3])&&n.push(new Wr(o,l,f,s,c))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},Zr.x=function(e){return arguments.length?(this._x=e,this):this._x},Zr.y=function(e){return arguments.length?(this._y=e,this):this._y},Math.PI,Math.sqrt(5);var Kr=function(){return Math.random()},Qr=(function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,1===arguments.length?(n=e,e=0):n-=e,function(){return t()*n+e}}return n.source=e,n}(Kr),function e(t){function n(e,n){var r,i;return e=null==e?0:+e,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*t()-1,o=2*t()-1,i=r*r+o*o}while(!i||i>1);return e+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=e,n}(Kr)),Jr=(function e(t){function n(){var e=Qr.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return n.source=e,n}(Kr),function e(t){function n(e){return function(){for(var n=0,r=0;r<e;++r)n+=t();return n}}return n.source=e,n}(Kr));function ei(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}(function e(t){function n(e){var n=Jr.source(t)(e);return function(){return n()/e}}return n.source=e,n})(Kr),function e(t){function n(e){return function(){return-Math.log(1-t())/e}}return n.source=e,n}(Kr);var ti=Array.prototype,ni=ti.map,ri=ti.slice,ii=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}},oi=function(e){return+e},ai=[0,1];function ui(e){return e}function si(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function ci(e){var t,n=e[0],r=e[e.length-1];return n>r&&(t=n,n=r,r=t),function(e){return Math.max(n,Math.min(r,e))}}function li(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=si(i,r),o=n(a,o)):(r=si(r,i),o=n(o,a)),function(e){return o(r(e))}}function fi(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=si(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=L(e,t,1,r)-1;return o[n](i[n](t))}}function hi(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function di(e,t){return function(){var e,t,n,r,i,o,a=ai,u=ai,s=Kt,c=ui;function l(){return r=Math.min(a.length,u.length)>2?fi:li,i=o=null,f}function f(t){return isNaN(t=+t)?n:(i||(i=r(a.map(e),u,s)))(e(c(t)))}return f.invert=function(n){return c(t((o||(o=r(u,a.map(e),Gt)))(n)))},f.domain=function(e){return arguments.length?(a=ni.call(e,oi),c===ui||(c=ci(a)),l()):a.slice()},f.range=function(e){return arguments.length?(u=ri.call(e),l()):u.slice()},f.rangeRound=function(e){return u=ri.call(e),s=ii,l()},f.clamp=function(e){return arguments.length?(c=e?ci(a):ui,f):c!==ui},f.interpolate=function(e){return arguments.length?(s=e,l()):s},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,l()}}()(e,t)}var pi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vi(e){if(!(t=pi.exec(e)))throw new Error("invalid format: "+e);var t;return new gi({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function gi(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}vi.prototype=gi.prototype,gi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var mi,yi,_i,bi,wi=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},xi=function(e){return(e=wi(Math.abs(e)))?e[1]:NaN},ki=function(e,t){var n=wi(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Ei={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return ki(100*e,t)},r:ki,s:function(e,t){var n=wi(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(mi=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+wi(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},Si=function(e){return e},ji=Array.prototype.map,Mi=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];yi=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Si:(t=ji.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,u=t[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),o.push(e.substring(i-=u,i+u)),!((s+=u+1)>r));)u=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",u=void 0===e.numerals?Si:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(ji.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"-":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=vi(e)).fill,n=e.align,f=e.sign,h=e.symbol,d=e.zero,p=e.width,v=e.comma,g=e.precision,m=e.trim,y=e.type;"n"===y?(v=!0,y="g"):Ei[y]||(void 0===g&&(g=12),m=!0,y="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var _="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===h?o:/[%p]/.test(y)?s:"",w=Ei[y],x=/[defgprs%]/.test(y);function k(e){var i,o,s,h=_,k=b;if("c"===y)k=w(e)+k,e="";else{var E=(e=+e)<0;if(e=isNaN(e)?l:w(Math.abs(e),g),m&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0==+e&&(E=!1),h=(E?"("===f?f:c:"-"===f||"("===f?"":f)+h,k=("s"===y?Mi[8+mi/3]:"")+k+(E&&"("===f?")":""),x)for(i=-1,o=e.length;++i<o;)if(48>(s=e.charCodeAt(i))||s>57){k=(46===s?a+e.slice(i+1):e.slice(i))+k,e=e.slice(0,i);break}}v&&!d&&(e=r(e,1/0));var S=h.length+e.length+k.length,j=S<p?new Array(p-S+1).join(t):"";switch(v&&d&&(e=r(j+e,j.length?p-k.length:1/0),j=""),n){case"<":e=h+e+k+j;break;case"=":e=h+j+e+k;break;case"^":e=j.slice(0,S=j.length>>1)+h+e+k+j.slice(S);break;default:e=j+h+e+k}return u(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return e+""},k}return{format:f,formatPrefix:function(e,t){var n=f(((e=vi(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(xi(t)/3))),i=Math.pow(10,-r),o=Mi[8+r/3];return function(e){return n(i*e)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),_i=yi.format,bi=yi.formatPrefix;var Oi=function(e,t,n,r){var i,o=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=I?i*=10:o>=R?i*=5:o>=D&&(i*=2),t<e?-i:i}(e,t,n);switch((r=vi(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(xi(t)/3)))-xi(Math.abs(e)))}(o,a))||(r.precision=i),bi(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xi(t)-xi(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-xi(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return _i(r)};function Ai(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,i,o,a,u=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=F(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++u<i;)o[u]=(e+u)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++u<i;)o[u]=(e-u)/a;return r&&o.reverse(),o}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Oi(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),o=0,a=i.length-1,u=i[o],s=i[a];return s<u&&(r=u,u=s,s=r,r=o,o=a,a=r),(r=F(u,s,n))>0?r=F(u=Math.floor(u/r)*r,s=Math.ceil(s/r)*r,n):r<0&&(r=F(u=Math.ceil(u*r)/r,s=Math.floor(s*r)/r,n)),r>0?(i[o]=Math.floor(u/r)*r,i[a]=Math.ceil(s/r)*r,t(i)):r<0&&(i[o]=Math.ceil(u*r)/r,i[a]=Math.floor(s*r)/r,t(i)),e},e}function Ci(){var e=di(ui,ui);return e.copy=function(){return hi(e,Ci())},ei.apply(e,arguments),Ai(e)}var Ti=new Date,Li=new Date;function Ni(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,u=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return u;do{u.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return u},i.filter=function(n){return Ni((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return Ti.setTime(+t),Li.setTime(+r),e(Ti),e(Li),Math.floor(n(Ti,Li))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var Ii=Ni((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));Ii.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ni((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var Ri=Ii;function Di(e){return Ni((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5}))}(Ii.range,Ni((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))).range;var Fi=Di(0),Pi=Di(1),zi=Di(2),Vi=Di(3),Ui=Di(4),qi=Di(5),Bi=Di(6),Wi=(Fi.range,Pi.range,zi.range,Vi.range,Ui.range,qi.range,Bi.range,Ni((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5}),(function(e){return e.getDate()-1}))),Hi=Wi,Gi=((((Wi.range,Ni((function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getHours()}))).range,Ni((function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getMinutes()}))).range,Ni((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+1e3*t)}),(function(e,t){return(t-e)/1e3}),(function(e){return e.getUTCSeconds()}))).range,Ni((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e})));function $i(e){return Ni((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/6048e5}))}Gi.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Ni((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Gi:null},Gi.range;var Yi=$i(0),Xi=$i(1),Zi=$i(2),Ki=$i(3),Qi=$i(4),Ji=$i(5),eo=$i(6),to=(Yi.range,Xi.range,Zi.range,Ki.range,Qi.range,Ji.range,eo.range,Ni((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/864e5}),(function(e){return e.getUTCDate()-1}))),no=to,ro=(to.range,Ni((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));ro.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ni((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var io=ro;function oo(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ao(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function uo(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}ro.range;var so,co={"-":"",_:" ",0:"0"},lo=/^\s*\d+/,fo=/^%/,ho=/[\\^$*+?|[\]().{}]/g;function po(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function vo(e){return e.replace(ho,"\\$&")}function go(e){return new RegExp("^(?:"+e.map(vo).join("|")+")","i")}function mo(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function yo(e,t,n){var r=lo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function _o(e,t,n){var r=lo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function bo(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function wo(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function xo(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ko(e,t,n){var r=lo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Eo(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function So(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jo(e,t,n){var r=lo.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Mo(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Oo(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Ao(e,t,n){var r=lo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Co(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function To(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Lo(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function No(e,t,n){var r=lo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Io(e,t,n){var r=lo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ro(e,t,n){var r=fo.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Do(e,t,n){var r=lo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Fo(e,t,n){var r=lo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Po(e,t){return po(e.getDate(),t,2)}function zo(e,t){return po(e.getHours(),t,2)}function Vo(e,t){return po(e.getHours()%12||12,t,2)}function Uo(e,t){return po(1+Hi.count(Ri(e),e),t,3)}function qo(e,t){return po(e.getMilliseconds(),t,3)}function Bo(e,t){return qo(e,t)+"000"}function Wo(e,t){return po(e.getMonth()+1,t,2)}function Ho(e,t){return po(e.getMinutes(),t,2)}function Go(e,t){return po(e.getSeconds(),t,2)}function $o(e){var t=e.getDay();return 0===t?7:t}function Yo(e,t){return po(Fi.count(Ri(e)-1,e),t,2)}function Xo(e,t){var n=e.getDay();return e=n>=4||0===n?Ui(e):Ui.ceil(e),po(Ui.count(Ri(e),e)+(4===Ri(e).getDay()),t,2)}function Zo(e){return e.getDay()}function Ko(e,t){return po(Pi.count(Ri(e)-1,e),t,2)}function Qo(e,t){return po(e.getFullYear()%100,t,2)}function Jo(e,t){return po(e.getFullYear()%1e4,t,4)}function ea(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+po(t/60|0,"0",2)+po(t%60,"0",2)}function ta(e,t){return po(e.getUTCDate(),t,2)}function na(e,t){return po(e.getUTCHours(),t,2)}function ra(e,t){return po(e.getUTCHours()%12||12,t,2)}function ia(e,t){return po(1+no.count(io(e),e),t,3)}function oa(e,t){return po(e.getUTCMilliseconds(),t,3)}function aa(e,t){return oa(e,t)+"000"}function ua(e,t){return po(e.getUTCMonth()+1,t,2)}function sa(e,t){return po(e.getUTCMinutes(),t,2)}function ca(e,t){return po(e.getUTCSeconds(),t,2)}function la(e){var t=e.getUTCDay();return 0===t?7:t}function fa(e,t){return po(Yi.count(io(e)-1,e),t,2)}function ha(e,t){var n=e.getUTCDay();return e=n>=4||0===n?Qi(e):Qi.ceil(e),po(Qi.count(io(e),e)+(4===io(e).getUTCDay()),t,2)}function da(e){return e.getUTCDay()}function pa(e,t){return po(Xi.count(io(e)-1,e),t,2)}function va(e,t){return po(e.getUTCFullYear()%100,t,2)}function ga(e,t){return po(e.getUTCFullYear()%1e4,t,4)}function ma(){return"+0000"}function ya(){return"%"}function _a(e){return+e}function ba(e){return Math.floor(+e/1e3)}function wa(){this._=null}function xa(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ka(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ea(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Sa(e){for(;e.L;)e=e.L;return e}(so=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,u=e.months,s=e.shortMonths,c=go(i),l=mo(i),f=go(o),h=mo(o),d=go(a),p=mo(a),v=go(u),g=mo(u),m=go(s),y=mo(s),_={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return s[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:Po,e:Po,f:Bo,H:zo,I:Vo,j:Uo,L:qo,m:Wo,M:Ho,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:_a,s:ba,S:Go,u:$o,U:Yo,V:Xo,w:Zo,W:Ko,x:null,X:null,y:Qo,Y:Jo,Z:ea,"%":ya},b={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return s[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:ta,e:ta,f:aa,H:na,I:ra,j:ia,L:oa,m:ua,M:sa,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:_a,s:ba,S:ca,u:la,U:fa,V:ha,w:da,W:pa,x:null,X:null,y:va,Y:ga,Z:ma,"%":ya},w={a:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:Oo,e:Oo,f:Io,H:Co,I:Co,j:Ao,L:No,m:Mo,M:To,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=l[r[0].toLowerCase()],n+r[0].length):-1},q:jo,Q:Do,s:Fo,S:Lo,u:_o,U:bo,V:wo,w:yo,W:xo,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:Eo,Y:ko,Z:So,"%":Ro};function x(e,t){return function(n){var r,i,o,a=[],u=-1,s=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++u<c;)37===e.charCodeAt(u)&&(a.push(e.slice(s,u)),null!=(i=co[r=e.charAt(++u)])?r=e.charAt(++u):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),s=u+1);return a.push(e.slice(s,u)),a.join("")}}function k(e,t){return function(n){var r,i,o=uo(1900,void 0,1);if(E(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(!t||"Z"in o||(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=ao(uo(o.y,0,1))).getUTCDay(),r=i>4||0===i?Xi.ceil(r):Xi(r),r=no.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=oo(uo(o.y,0,1))).getDay(),r=i>4||0===i?Pi.ceil(r):Pi(r),r=Hi.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?ao(uo(o.y,0,1)).getUTCDay():oo(uo(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,ao(o)):oo(o)}}function E(e,t,n,r){for(var i,o,a=0,u=t.length,s=n.length;a<u;){if(r>=s)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=w[i in co?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=x(n,_),_.X=x(r,_),_.c=x(t,_),b.x=x(n,b),b.X=x(r,b),b.c=x(t,b),{format:function(e){var t=x(e+="",_);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=x(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,so.parse,so.utcFormat,so.utcParse,((Ni((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})).range,Ni((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getUTCHours()}))).range,Ni((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getUTCMinutes()}))).range,wa.prototype={constructor:wa,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Sa(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(ka(this,n),n=(e=n).U),n.C=!1,r.C=!0,Ea(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Ea(this,n),n=(e=n).U),n.C=!1,r.C=!0,ka(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,o=e.L,a=e.R;if(n=o?a?Sa(a):o:a,i?i.L===e?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=a,a.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,ka(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Ea(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ka(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,Ea(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ka(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,Ea(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}};var ja=wa;function Ma(e,t,n,r){var i=[null,null],o=Ka.push(i)-1;return i.left=e,i.right=t,n&&Aa(i,e,t,n),r&&Aa(i,t,e,r),Xa[e.index].halfedges.push(o),Xa[t.index].halfedges.push(o),i}function Oa(e,t,n){var r=[t,n];return r.left=e,r}function Aa(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function Ca(e,t,n,r,i){var o,a=e[0],u=e[1],s=a[0],c=a[1],l=0,f=1,h=u[0]-s,d=u[1]-c;if(o=t-s,h||!(o>0)){if(o/=h,h<0){if(o<l)return;o<f&&(f=o)}else if(h>0){if(o>f)return;o>l&&(l=o)}if(o=r-s,h||!(o<0)){if(o/=h,h<0){if(o>f)return;o>l&&(l=o)}else if(h>0){if(o<l)return;o<f&&(f=o)}if(o=n-c,d||!(o>0)){if(o/=d,d<0){if(o<l)return;o<f&&(f=o)}else if(d>0){if(o>f)return;o>l&&(l=o)}if(o=i-c,d||!(o<0)){if(o/=d,d<0){if(o>f)return;o>l&&(l=o)}else if(d>0){if(o<l)return;o<f&&(f=o)}return!(l>0||f<1)||(l>0&&(e[0]=[s+l*h,c+l*d]),f<1&&(e[1]=[s+f*h,c+f*d]),!0)}}}}}function Ta(e,t,n,r,i){var o=e[1];if(o)return!0;var a,u,s=e[0],c=e.left,l=e.right,f=c[0],h=c[1],d=l[0],p=l[1],v=(f+d)/2,g=(h+p)/2;if(p===h){if(v<t||v>=r)return;if(f>d){if(s){if(s[1]>=i)return}else s=[v,n];o=[v,i]}else{if(s){if(s[1]<n)return}else s=[v,i];o=[v,n]}}else if(u=g-(a=(f-d)/(p-h))*v,a<-1||a>1)if(f>d){if(s){if(s[1]>=i)return}else s=[(n-u)/a,n];o=[(i-u)/a,i]}else{if(s){if(s[1]<n)return}else s=[(i-u)/a,i];o=[(n-u)/a,n]}else if(h<p){if(s){if(s[0]>=r)return}else s=[t,a*t+u];o=[r,a*r+u]}else{if(s){if(s[0]<t)return}else s=[r,a*r+u];o=[t,a*t+u]}return e[0]=s,e[1]=o,!0}function La(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Na(e,t){return t[+(t.left!==e.site)]}function Ia(e,t){return t[+(t.left===e.site)]}var Ra,Da=[];function Fa(){xa(this),this.x=this.y=this.arc=this.site=this.cy=null}function Pa(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,o=n.site;if(r!==o){var a=i[0],u=i[1],s=r[0]-a,c=r[1]-u,l=o[0]-a,f=o[1]-u,h=2*(s*f-c*l);if(!(h>=-Ja)){var d=s*s+c*c,p=l*l+f*f,v=(f*d-c*p)/h,g=(s*p-l*d)/h,m=Da.pop()||new Fa;m.arc=e,m.site=i,m.x=v+a,m.y=(m.cy=g+u)+Math.sqrt(v*v+g*g),e.circle=m;for(var y=null,_=Za._;_;)if(m.y<_.y||m.y===_.y&&m.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}Za.insert(y,m),y||(Ra=m)}}}}function za(e){var t=e.circle;t&&(t.P||(Ra=t.N),Za.remove(t),Da.push(t),xa(t),e.circle=null)}var Va=[];function Ua(){xa(this),this.edge=this.site=this.circle=null}function qa(e){var t=Va.pop()||new Ua;return t.site=e,t}function Ba(e){za(e),Ya.remove(e),Va.push(e),xa(e)}function Wa(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],o=e.P,a=e.N,u=[e];Ba(e);for(var s=o;s.circle&&Math.abs(n-s.circle.x)<Qa&&Math.abs(r-s.circle.cy)<Qa;)o=s.P,u.unshift(s),Ba(s),s=o;u.unshift(s),za(s);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<Qa&&Math.abs(r-c.circle.cy)<Qa;)a=c.N,u.push(c),Ba(c),c=a;u.push(c),za(c);var l,f=u.length;for(l=1;l<f;++l)c=u[l],s=u[l-1],Aa(c.edge,s.site,c.site,i);s=u[0],(c=u[f-1]).edge=Ma(s.site,c.site,null,i),Pa(s),Pa(c)}function Ha(e){for(var t,n,r,i,o=e[0],a=e[1],u=Ya._;u;)if((r=Ga(u,a)-o)>Qa)u=u.L;else{if(!((i=o-$a(u,a))>Qa)){r>-Qa?(t=u.P,n=u):i>-Qa?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}!function(e){Xa[e.index]={site:e,halfedges:[]}}(e);var s=qa(e);if(Ya.insert(t,s),t||n){if(t===n)return za(t),n=qa(t.site),Ya.insert(s,n),s.edge=n.edge=Ma(t.site,s.site),Pa(t),void Pa(n);if(n){za(t),za(n);var c=t.site,l=c[0],f=c[1],h=e[0]-l,d=e[1]-f,p=n.site,v=p[0]-l,g=p[1]-f,m=2*(h*g-d*v),y=h*h+d*d,_=v*v+g*g,b=[(g*y-d*_)/m+l,(h*_-v*y)/m+f];Aa(n.edge,c,p,b),s.edge=Ma(c,e,null,b),n.edge=Ma(e,p,null,b),Pa(t),Pa(n)}else s.edge=Ma(t.site,s.site)}}function Ga(e,t){var n=e.site,r=n[0],i=n[1],o=i-t;if(!o)return r;var a=e.P;if(!a)return-1/0;var u=(n=a.site)[0],s=n[1],c=s-t;if(!c)return u;var l=u-r,f=1/o-1/c,h=l/c;return f?(-h+Math.sqrt(h*h-2*f*(l*l/(-2*c)-s+c/2+i-o/2)))/f+r:(r+u)/2}function $a(e,t){var n=e.N;if(n)return Ga(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var Ya,Xa,Za,Ka,Qa=1e-6,Ja=1e-12;function eu(e,t){return t[1]-e[1]||t[0]-e[0]}function tu(e,t){var n,r,i,o=e.sort(eu).pop();for(Ka=[],Xa=new Array(e.length),Ya=new ja,Za=new ja;;)if(i=Ra,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Ha(o),n=o[0],r=o[1]),o=e.pop();else{if(!i)break;Wa(i.arc)}if(function(){for(var e,t,n,r,i=0,o=Xa.length;i<o;++i)if((e=Xa[i])&&(r=(t=e.halfedges).length)){var a=new Array(r),u=new Array(r);for(n=0;n<r;++n)a[n]=n,u[n]=La(e,Ka[t[n]]);for(a.sort((function(e,t){return u[t]-u[e]})),n=0;n<r;++n)u[n]=t[a[n]];for(n=0;n<r;++n)t[n]=u[n]}}(),t){var a=+t[0][0],u=+t[0][1],s=+t[1][0],c=+t[1][1];!function(e,t,n,r){for(var i,o=Ka.length;o--;)Ta(i=Ka[o],e,t,n,r)&&Ca(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>Qa||Math.abs(i[0][1]-i[1][1])>Qa)||delete Ka[o]}(a,u,s,c),function(e,t,n,r){var i,o,a,u,s,c,l,f,h,d,p,v,g=Xa.length,m=!0;for(i=0;i<g;++i)if(o=Xa[i]){for(a=o.site,u=(s=o.halfedges).length;u--;)Ka[s[u]]||s.splice(u,1);for(u=0,c=s.length;u<c;)p=(d=Ia(o,Ka[s[u]]))[0],v=d[1],f=(l=Na(o,Ka[s[++u%c]]))[0],h=l[1],(Math.abs(p-f)>Qa||Math.abs(v-h)>Qa)&&(s.splice(u,0,Ka.push(Oa(a,d,Math.abs(p-e)<Qa&&r-v>Qa?[e,Math.abs(f-e)<Qa?h:r]:Math.abs(v-r)<Qa&&n-p>Qa?[Math.abs(h-r)<Qa?f:n,r]:Math.abs(p-n)<Qa&&v-t>Qa?[n,Math.abs(f-n)<Qa?h:t]:Math.abs(v-t)<Qa&&p-e>Qa?[Math.abs(h-t)<Qa?f:e,t]:null))-1),++c);c&&(m=!1)}if(m){var y,_,b,w=1/0;for(i=0,m=null;i<g;++i)(o=Xa[i])&&(b=(y=(a=o.site)[0]-e)*y+(_=a[1]-t)*_)<w&&(w=b,m=o);if(m){var x=[e,t],k=[e,r],E=[n,r],S=[n,t];m.halfedges.push(Ka.push(Oa(a=m.site,x,k))-1,Ka.push(Oa(a,k,E))-1,Ka.push(Oa(a,E,S))-1,Ka.push(Oa(a,S,x))-1)}}for(i=0;i<g;++i)(o=Xa[i])&&(o.halfedges.length||delete Xa[i])}(a,u,s,c)}this.edges=Ka,this.cells=Xa,Ya=Za=Ka=Xa=null}tu.prototype={constructor:tu,polygons:function(){var e=this.edges;return this.cells.map((function(t){var n=t.halfedges.map((function(n){return Na(t,e[n])}));return n.data=t.site.data,n}))},triangles:function(){var e=[],t=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,u,s,c,l=n.site,f=-1,h=t[i[o-1]],d=h.left===l?h.right:h.left;++f<o;)a=d,d=(h=t[i[f]]).left===l?h.right:h.left,a&&d&&r<a.index&&r<d.index&&(s=a,c=d,((u=l)[0]-c[0])*(s[1]-u[1])-(u[0]-s[0])*(c[1]-u[1])<0)&&e.push([l.data,a.data,d.data])})),e},links:function(){return this.edges.filter((function(e){return e.right})).map((function(e){return{source:e.left.data,target:e.right.data}}))},find:function(e,t,n){for(var r,i,o=this,a=o._found||0,u=o.cells.length;!(i=o.cells[a]);)if(++a>=u)return null;var s=e-i.site[0],c=t-i.site[1],l=s*s+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],u=r.left;if(u!==i.site&&u||(u=r.right)){var s=e-u[0],c=t-u[1],f=s*s+c*c;f<l&&(l=f,a=u.index)}}))}while(null!==a);return o._found=r,null==n||l<=n*n?i.site:null}};var nu=Math.SQRT2;function ru(e){return((e=Math.exp(e))+1/e)/2}var iu=function(e,t){var n,r,i=e[0],o=e[1],a=e[2],u=t[0],s=t[1],c=t[2],l=u-i,f=s-o,h=l*l+f*f;if(h<1e-12)r=Math.log(c/a)/nu,n=function(e){return[i+e*l,o+e*f,a*Math.exp(nu*e*r)]};else{var d=Math.sqrt(h),p=(c*c-a*a+4*h)/(2*a*2*d),v=(c*c-a*a-4*h)/(2*c*2*d),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);r=(m-g)/nu,n=function(e){var t,n=e*r,u=ru(g),s=a/(2*d)*(u*(t=nu*n+g,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(g));return[i+s*l,o+s*f,a*u/ru(nu*n+g)]}}return n.duration=1e3*r,n},ou=function(e){return function(){return e}};function au(e,t,n){this.target=e,this.type=t,this.transform=n}function uu(e,t,n){this.k=e,this.x=t,this.y=n}uu.prototype={constructor:uu,scale:function(e){return 1===e?this:new uu(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new uu(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var su=new uu(1,0,0);function cu(){qe.stopImmediatePropagation()}uu.prototype;var lu=function(){qe.preventDefault(),qe.stopImmediatePropagation()};function fu(){return!qe.ctrlKey&&!qe.button}function hu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function du(){return this.__zoom||su}function pu(){return-qe.deltaY*(1===qe.deltaMode?.05:qe.deltaMode?1:.002)}function vu(){return navigator.maxTouchPoints||"ontouchstart"in this}function gu(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}var mu=function(){function e(){f(this,e)}return u(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t),this}},{key:"dispatchEvent",value:function(e){var t=this;if(void 0===this._listeners)return this;var n=this._listeners[e.type];return void 0!==n&&(e.target=this,n.slice().forEach((function(n){n.call(t,e)}))),this}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0===this._listeners)return this;var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}return this}}]),e}(),yu=function(e){function t(e,n,r){var i;f(this,t),(i=s(this,c(t).call(this)))._canvas=e,i._quadtree=$r(),i._renderers=new Map,i._transform=su,i._x=n,i._y=r;var a=function(){var e,t,n,r,i=Sr,o=jr,a=Mr,u=Or,s={},c=W("start","drag","end"),l=0,f=0;function h(e){e.on("mousedown.drag",d).filter(u).on("touchstart.drag",g).on("touchmove.drag",m).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!r&&i.apply(this,arguments)){var a=_("mouse",o.apply(this,arguments),tn,this,arguments);a&&(nt(qe.view).on("mousemove.drag",p,!0).on("mouseup.drag",v,!0),ot(qe.view),rt(),n=!1,e=qe.clientX,t=qe.clientY,a("start"))}}function p(){if(it(),!n){var r=qe.clientX-e,i=qe.clientY-t;n=r*r+i*i>f}s.mouse("drag")}function v(){nt(qe.view).on("mousemove.drag mouseup.drag",null),at(qe.view,n),it(),s.mouse("end")}function g(){if(i.apply(this,arguments)){var e,t,n=qe.changedTouches,r=o.apply(this,arguments),a=n.length;for(e=0;e<a;++e)(t=_(n[e].identifier,r,en,this,arguments))&&(rt(),t("start"))}}function m(){var e,t,n=qe.changedTouches,r=n.length;for(e=0;e<r;++e)(t=s[n[e].identifier])&&(it(),t("drag"))}function y(){var e,t,n=qe.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),e=0;e<i;++e)(t=s[n[e].identifier])&&(rt(),t("end"))}function _(e,t,n,r,i){var o,u,f,d=n(t,e),p=c.copy();if(Ye(new Er(h,"beforestart",o,e,l,d[0],d[1],0,0,p),(function(){return null!=(qe.subject=o=a.apply(r,i))&&(u=o.x-d[0]||0,f=o.y-d[1]||0,!0)})))return function a(c){var v,g=d;switch(c){case"start":s[e]=a,v=l++;break;case"end":delete s[e],--l;case"drag":d=n(t,e),v=l}Ye(new Er(h,c,o,e,v,d[0]+u,d[1]+f,d[0]-g[0],d[1]-g[1],p),p.apply,p,[c,r,i])}}return h.filter=function(e){return arguments.length?(i="function"==typeof e?e:kr(!!e),h):i},h.container=function(e){return arguments.length?(o="function"==typeof e?e:kr(e),h):o},h.subject=function(e){return arguments.length?(a="function"==typeof e?e:kr(e),h):a},h.touchable=function(e){return arguments.length?(u="function"==typeof e?e:kr(!!e),h):u},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,h):Math.sqrt(f)},h}().container(e).subject(i._dragSubject.bind(o(i))).on("start",i._dragStart.bind(o(i))).on("drag",i._drag.bind(o(i))).on("end",i._dragEnd.bind(o(i)));return nt(e).call(a),i}return l(t,e),u(t,[{key:"boundingBox",value:function(){return this._quadtree.extent()}},{key:"setShapes",value:function(e){var t=this;this._renderers=new Map;var n=e.map((function(e){return e.nodes()})).reduce((function(e,t){return e.concat(t)}),[]);return e.forEach((function(e){e.nodes().forEach((function(n){t._renderers.set(n,e)}))})),this._quadtree=$r().x((function(e){return e.x})).y((function(e){return e.y})).addAll(n),this}},{key:"setTransform",value:function(e){return this._transform=e,this}},{key:"_drag",value:function(){var e=tn(this._canvas),t=qe.subject,n=this._transform.invertX(e[0]),r=this._transform.invertY(e[1]),i=this._x.invert(n),o=this._y.invert(r);t.x=i,t.y=o,this.dispatchEvent({type:"drag",node:t})}},{key:"_dragEnd",value:function(){this._quadtree.add(qe.subject),this.dispatchEvent({type:"end"})}},{key:"_dragStart",value:function(){this._quadtree.remove(qe.subject)}},{key:"_dragSubject",value:function(e,t,n){var r=this._transform.invertX(qe.x),i=this._transform.invertY(qe.y),o=this._x.invert(r),a=this._y.invert(i);return this._findNode(o,a)||e}},{key:"_findNode",value:function(e,t){var n=this._quadtree.find(e,t);if(n){var r=this._renderers.get(n);if(r&&r.containsPoint(n,e,t,this._transform.k))return n}}}]),t}(mu),_u=n(12),bu=function(e){function t(){var e;return f(this,t),(e=s(this,c(t).call(this)))._linkMap=new Map,e._placement="spread",e}return l(t,e),u(t,[{key:"getPlacement",value:function(){return this._placement}},{key:"setLinkMap",value:function(e){this._linkMap=e}},{key:"setPlacement",value:function(e){this._placement=e}},{key:"update",value:function(){"center"===this._placement&&this._buildCenterLabels(),"join"===this._placement&&this._buildJoinLabels(),"spread"===this._placement&&this._buildSpreadLabels()}},{key:"_bezierBounds",value:function(e){if(e<1)return[.5,0];var t=Math.min(.8/(e-1),.1);return[.5-Math.min(t*(e-1),.8)/2,t]}},{key:"_buildCenterLabels",value:function(){this._linkMap.forEach((function(e,t){t.labels=e.filter((function(e){return Object(_u.isDefined)(e.label)})).map((function(e){return{t:.5,text:e.label}}))}))}},{key:"_buildJoinLabels",value:function(){this._linkMap.forEach((function(e,t){t.labels=[{text:wu(e),t:.5}]}))}},{key:"_buildSpreadLabels",value:function(){var e=this;this._linkMap.forEach((function(t,n){if(t.length){var r=e._bezierBounds(t.length),i=a(r,2),o=i[0],u=i[1];n.labels=t.filter((function(e){return Object(_u.isDefined)(e.label)})).map((function(e,t){return{t:o+t*u,text:e.label}}))}}))}}]),t}(function(){return function e(){f(this,e)}}());function wu(e){return e.map((function(e){return e.label})).filter(_u.isDefined).join(", ")}var xu=function(e){function t(e){var n;return f(this,t),(n=s(this,c(t).call(this)))._links=[],n._color=t.defaultColor,n._font=t.defaultFont,n._highlight=null,e&&(e.color&&(n._color=e.color),e.font&&(n._font=e.font)),n}return l(t,e),u(t,[{key:"highlight",value:function(e){this._highlight=e}},{key:"links",value:function(e){return arguments.length?(this._links=e,this):this._links}},{key:"render",value:function(e,t,n){var r=this;if(this._links.length){var i=null===this._highlight?this._links:this._links.includes(this._highlight)?[this._highlight]:[];i.length&&(e.save(),e.beginPath(),this._color&&(e.fillStyle=this._color),e.font=this._font,e.textAlign="center",e.textBaseline="middle",i.forEach((function(i){var o=i.path;o&&i.labels.forEach((function(i){var a=o.pointAlong(i.t,t,n),u=r._filter?r._filter(i.text):i.text;e.fillText(u,a.x,a.y)}))})))}}},{key:"setAlphaRename",value:function(e){return this._filter=e,this}}]),t}(k);xu.defaultColor="#333333",xu.defaultFont="14px sans-serif";var ku=function(e){function t(e){var n;return f(this,t),(n=s(this,c(t).call(this)))._links=[],n.stroke="#333333",n.strokeDash=null,n.strokeWidth=null,n.lowlightStroke="#777777",n.lowlightWidth=1,e&&(e.stroke&&(n.stroke=e.stroke),e.strokeDash&&(n.strokeDash=e.strokeDash),e.strokeWidth&&(n.strokeWidth=e.strokeWidth)),n}return l(t,e),u(t,[{key:"links",value:function(e){return arguments.length?(this._links=e,this):this._links}},{key:"_doFill",value:function(e){this.stroke&&(e.fillStyle=this.stroke),e.fill()}},{key:"_doFillHighlight",value:function(e){this._doFill(e)}},{key:"_doFillLowlight",value:function(e){e.fillStyle=this.lowlightStroke,e.fill()}},{key:"_doStroke",value:function(e){this.strokeDash&&e.setLineDash(this.strokeDash),this.strokeWidth&&(e.lineWidth=this.strokeWidth),e.strokeStyle=this.stroke,e.stroke()}},{key:"_doStrokeHighlight",value:function(e){this.strokeDash&&e.setLineDash(this.strokeDash),this.strokeWidth&&(e.lineWidth=2*this.strokeWidth),e.strokeStyle=this.stroke,e.stroke()}},{key:"_doStrokeLowlight",value:function(e){this.strokeDash&&e.setLineDash(this.strokeDash),this.strokeWidth&&(e.lineWidth=this.strokeWidth),e.strokeStyle=this.lowlightStroke,e.lineWidth=this.lowlightWidth,e.stroke()}}]),t}(k),Eu=Math.PI/6,Su=function(e){function t(e){var n;return f(this,t),(n=s(this,c(t).call(this,e)))._arrowheadSize=10,n._highlight=null,n}return l(t,e),u(t,[{key:"render",value:function(e,t,n){var r=this;e.save();var i=Object(v.partition)(this._links,(function(e){return e===r._highlight})),o=a(i,2),u=o[0],s=o[1];if(u.length){e.beginPath();var c=this._drawLinks(u,e,t,n),l=a(c,2),f=l[0],h=l[1];this._doStrokeHighlight(e),e.beginPath(),this._drawArrows(f,h,e),this._doStrokeHighlight(e),this._doFillHighlight(e),e.beginPath();var d=this._drawLinks(s,e,t,n),p=a(d,2),g=p[0],m=p[1];this._doStroke(e),e.beginPath(),this._drawArrows(g,m,e),this._doStroke(e),this._doFill(e)}else{e.beginPath();var y=this._drawLinks(s,e,t,n),_=a(y,2),b=_[0],w=_[1];null===this._highlight?(this._doStroke(e),e.beginPath(),this._drawArrows(b,w,e),this._doStroke(e),this._doFill(e)):(this._doStrokeLowlight(e),e.beginPath(),this._drawArrows(b,w,e),this._doStrokeLowlight(e),this._doFillLowlight(e))}e.restore()}},{key:"highlight",value:function(e){this._highlight=e}},{key:"_arrow",value:function(e,t,n,r,i){var o=this._arrowheadSize;r.push(e-o*Math.sin(n-Eu)),i.push(t-o*Math.cos(n-Eu)),r.push(e),i.push(t),r.push(e-o*Math.sin(n+Eu)),i.push(t-o*Math.cos(n+Eu))}},{key:"_drawArrows",value:function(e,t,n){for(var r=e.length,i=0;i<r;i+=3)n.moveTo(e[i],t[i]),n.lineTo(e[i+1],t[i+1]),n.lineTo(e[i+2],t[i+2]),n.closePath()}},{key:"_drawLinks",value:function(e,t,n,r){var i=this,o=[],a=[];return e.forEach((function(e){var u=e.path;if(u){u.apply(t,n,r);var s=u.angleAlong(1,n,r)+Math.PI,c=u.pointAlong(1,n,r);i._arrow(c.x,c.y,s,o,a)}})),[o,a]}}]),t}(ku),ju=function e(){f(this,e)};function Mu(e,t,n){return{x:t(e.x)+(e.dx?e.dx:0),y:n(e.y)+(e.dy?e.dy:0)}}var Ou=function(e){function t(e,n,r,i){var o;return f(this,t),(o=s(this,c(t).call(this)))._start=e,o._c1=n,o._c2=r,o._end=i,o}return l(t,e),u(t,[{key:"angleAlong",value:function(e,t,n){var r=Mu(this._start,t,n),i=Mu(this._c1,t,n),o=Mu(this._c2,t,n),a=Mu(this._end,t,n),u=1-e,s=u*u*(i.x-r.x)+2*e*u*(o.x-i.x)+e*e*(a.x-o.x),c=u*u*(i.y-r.y)+2*e*u*(o.y-i.y)+e*e*(a.y-o.y);return Math.atan2(s,c)-Math.PI}},{key:"apply",value:function(e,t,n){var r=Mu(this._start,t,n),i=Mu(this._c1,t,n),o=Mu(this._c2,t,n),a=Mu(this._end,t,n);e.moveTo(r.x,r.y),e.bezierCurveTo(i.x,i.y,o.x,o.y,a.x,a.y)}},{key:"pointAlong",value:function(e,t,n){var r=Mu(this._start,t,n),i=Mu(this._c1,t,n),o=Mu(this._c2,t,n),a=Mu(this._end,t,n),u=1-e;return{x:u*u*u*r.x+3*e*u*u*i.x+3*e*e*u*o.x+e*e*e*a.x,y:u*u*u*r.y+3*e*u*u*i.y+3*e*e*u*o.y+e*e*e*a.y}}},{key:"points",value:function(){return[this._start,this._c1,this._c2,this._end]}}]),t}(ju),Au=function(e){function t(e,n){var r;return f(this,t),(r=s(this,c(t).call(this)))._start=e,r._end=n,r}return l(t,e),u(t,[{key:"angleAlong",value:function(e,t,n){var r=Mu(this._start,t,n),i=Mu(this._end,t,n);return Math.atan2(r.x-i.x,r.y-i.y)}},{key:"apply",value:function(e,t,n){var r=Mu(this._start,t,n),i=Mu(this._end,t,n);e.moveTo(r.x,r.y),e.lineTo(i.x,i.y)}},{key:"pointAlong",value:function(e,t,n){var r=Mu(this._start,t,n),i=Mu(this._end,t,n);return{x:r.x+e*(i.x-r.x),y:r.y+e*(i.y-r.y)}}},{key:"points",value:function(){return[this._start,this._end]}}]),t}(ju),Cu=function(e){function t(e,n,r){var i;return f(this,t),(i=s(this,c(t).call(this)))._start=e,i._control=n,i._end=r,i}return l(t,e),u(t,[{key:"angleAlong",value:function(e,t,n){var r=Mu(this._start,t,n),i=Mu(this._control,t,n),o=Mu(this._end,t,n),a=1-e,u=2*a*(i.x-r.x)+2*e*(o.x-i.x),s=2*a*(i.y-r.y)+2*e*(o.y-i.y);return Math.atan2(u,s)-Math.PI}},{key:"apply",value:function(e,t,n){var r=Mu(this._start,t,n),i=Mu(this._control,t,n),o=Mu(this._end,t,n);e.moveTo(r.x,r.y),e.quadraticCurveTo(i.x,i.y,o.x,o.y)}},{key:"pointAlong",value:function(e,t,n){var r=Mu(this._start,t,n),i=Mu(this._control,t,n),o=Mu(this._end,t,n),a=1-e;return{x:a*a*r.x+2*a*e*i.x+e*e*o.x,y:a*a*r.y+2*a*e*i.y+e*e*o.y}}},{key:"points",value:function(){return[this._start,this._control,this._end]}}]),t}(ju),Tu=function(){function e(){f(this,e),this._all=new Map,this._map=new Map,this._ind=new Map}return u(e,[{key:"add",value:function(e,t,n){this._addDirectional(e,t,n),this._addNonDirectional(e,t,n)}},{key:"allBetween",value:function(e,t){return this._getNonDirectional(e,t)}},{key:"between",value:function(e,t){var n=this._map.get(e);return n&&n.get(t)||[]}},{key:"forEach",value:function(e){var t=this;this._map.forEach((function(n,r){n.forEach((function(n,i){var o=t._getNonDirectional(r,i);n.forEach((function(t){return e(t,r,i,o)}))}))}))}},{key:"indexOf",value:function(e){return this._ind.get(e)}},{key:"_addDirectional",value:function(e,t,n){this._map.has(e)||this._map.set(e,new Map);var r=this._map.get(e);r.has(t)||r.set(t,[]),r.get(t).push(n)}},{key:"_addNonDirectional",value:function(e,t,n){if(this._all.has(e)){var r=this._all.get(e);r.has(t)||r.set(t,[]);var i=r.get(t).push(n);this._ind.set(n,i-1)}else if(this._all.has(t)){var o=this._all.get(t);o.has(e)||o.set(e,[]);var a=o.get(e).push(n);this._ind.set(n,1-a)}else this._all.set(e,new Map([[t,[n]]])),this._ind.set(n,0)}},{key:"_getNonDirectional",value:function(e,t){if(this._all.has(e)){var n=this._all.get(e);if(n.has(t))return n.get(t)}if(this._all.has(t)){var r=this._all.get(t);if(r.has(e))return r.get(e)}return[]}}]),e}();function Lu(e,t,n){var r=Math.atan2(e.y-t.y,t.x-e.x),i=n.intersect(r);e.dx=i.x,e.dy=i.y}var Nu=function(e){function t(){var e;return f(this,t),(e=s(this,c(t).call(this)))._collapse=!0,e._factor=.25,e}return l(t,e),u(t,[{key:"calculateLink",value:function(e,t,n,r){var i={x:t.x,y:t.y},o={x:n.x,y:n.y},a=this._nodeShapeMap.get(t),u=this._nodeShapeMap.get(n);if(t===n&&a){var s=a.selfLoopPoints(t);e.path=new Ou(s[0],s[1],s[2],s[3])}else{var c=this._bundleMap.indexOf(e),l=void 0!==c&&r.length>1?this._bundlePoints(i,o,c,r.length):[i,o];2===l.length&&(e.path=new Au(l[0],l[1])),3===l.length&&(e.path=new Cu(l[0],l[1],l[2])),this._calcalateShapeOffsets(e,a,u)}}},{key:"getFactor",value:function(){return this._factor}},{key:"setFactor",value:function(e){this._factor=e}},{key:"_bundlePoints",value:function(e,t,n,r){if(this._factor<.005)return[e,t];var i=this._factor*function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}(e,t),o=Math.sign(n)||1,a=Math.atan2(t.y-e.y,t.x-e.x)+o*Math.PI/2,u=(e.x+t.x)/2,s=(e.y+t.y)/2,c=u+i/2*Math.cos(a),l=s+i/2*Math.sin(a);a-=Math.PI;var f=Math.abs(n)/(r-1);return[e,{x:c+f*i*Math.cos(a),y:l+f*i*Math.sin(a)},t]}}]),t}(function(){function e(){f(this,e),this._bundleMap=new Tu,this._edgeLinkMap=new Map,this._groupLinkMap=new Map,this._linkEdgeMap=new Map,this._nameNodeMap=new Map,this._nodeEdgeMap=new Map,this._ungroupedLinks=[],this._collapse=!1,this._nodeShapeMap=new Map}return u(e,[{key:"getLinks",value:function(e){var t=this;return e?e.map((function(e){return t._groupLinkMap.get(e)})).filter(_u.isDefined).reduce((function(e,t){return e.concat(t)}),[]):Array.from(this._linkEdgeMap.keys())}},{key:"getLinkMap",value:function(){return this._linkEdgeMap}},{key:"getUngroupedLinks",value:function(){return this._ungroupedLinks}},{key:"setData",value:function(e,t,n){var r=this;this._bundleMap=new Tu,this._edgeLinkMap=new Map,this._groupLinkMap=new Map,this._linkEdgeMap=new Map,this._nameNodeMap=new Map(e.map((function(e){return[e.id,e]}))),this._nodeEdgeMap=function(e,t){var n=new Map;return t.forEach((function(t){var r=e.get(t.source),i=e.get(t.target);r&&i&&(n.has(r)||n.set(r,[]),n.has(i)||n.set(i,[]),n.get(r).push(t),n.get(i).push(t))})),n}(this._nameNodeMap,t),this._ungroupedLinks=[],this._nodeShapeMap=new Map,n.forEach((function(e){return e.nodes().forEach((function(t){return r._nodeShapeMap.set(t,e)}))})),(this._collapse?function(e){var t=new Map,n=[];e.forEach((function(e){e.group?(t.has(e.group)||t.set(e.group,[]),t.get(e.group).push(e)):n.push(e)}));var r=[n].concat(i(Array.from(t.values()))),o=[];return r.forEach((function(e){var t=new Map;e.forEach((function(e){var n=e.source+e.target;t.has(n)||t.set(n,[]),t.get(n).push(e)})),o.push.apply(o,i(Array.from(t.values())))})),o}(t):t.map((function(e){return[e]}))).forEach((function(e){if(e.length){var t=e[0].group,n=e[0].source,i=e[0].target,o=r._nameNodeMap.get(n),a=r._nameNodeMap.get(i);if(o&&a){var u={path:void 0,labels:[]};r._linkEdgeMap.set(u,e),e.forEach((function(e){r._edgeLinkMap.set(e,u)})),r._bundleMap.add(o,a,u),t?(r._groupLinkMap.has(t)||r._groupLinkMap.set(t,[]),r._groupLinkMap.get(t).push(u)):r._ungroupedLinks.push(u)}}})),this.updateLinks()}},{key:"updateLinks",value:function(){this._bundleMap.forEach(this.calculateLink.bind(this))}},{key:"updateLinksConnectedTo",value:function(e){var t=this,n=this._nodeEdgeMap.get(e);if(n){var r=new Set;return n.forEach((function(e){var n=t._edgeLinkMap.get(e);if(n&&!r.has(n)){var i=t._nameNodeMap.get(e.source),o=t._nameNodeMap.get(e.target);if(i&&o){var a=t._bundleMap.allBetween(i,o);t.calculateLink(n,i,o,a)}r.add(n)}})),Array.from(r)}return[]}},{key:"_calcalateShapeOffsets",value:function(e,t,n){var r=e.path?e.path.points():[];r.length<2||(t&&Lu(r[0],r[1],t),n&&Lu(r[r.length-1],r[r.length-2],n))}}]),e}());function Iu(e,t){g(e,t,["font","color"])}function Ru(e){var t={};return Iu(t,e),t}function Du(e,t){g(e,t,["stroke","strokeDash","strokeWidth"])}function Fu(e){var t={};return Du(t,e),t}function Pu(e){var t=new Map;return function e(n,r){var i=Ru(n.label||{});r&&Iu(i,r),n.children&&n.children.forEach((function(t){e(t,i)})),t.set(i,function(e){return function(e){return void 0!==e.groups}(e)?e.groups:function(e){return void 0!==e.nodes}(e)?e.nodes:[]}(n))}(e),t}var zu=function(){function e(){f(this,e),this._labeller=new bu,this._router=new Nu,this._nodes=[],this._edges=[],this._shapes=[],this._styles=[],this._links=[],this._labels=[]}return u(e,[{key:"getEdges",value:function(){return this._edges}},{key:"getLabelPlacement",value:function(){return this._labeller.getPlacement()}},{key:"getRouter",value:function(){return this._router}},{key:"labelRenderers",value:function(){return this._labels}},{key:"linkRenderers",value:function(){return this._links}},{key:"setEdges",value:function(e){return this._edges=e,this}},{key:"setLabelPlacement",value:function(e){return this._labeller.setPlacement(e),this}},{key:"setNodes",value:function(e){return this._nodes=e,this}},{key:"setShapes",value:function(e){return this._shapes=e,this}},{key:"setStyles",value:function(e){return this._styles=e,this}},{key:"update",value:function(){this._router.setData(this._nodes,this._edges,this._shapes),this._recalculateRenderers()}},{key:"updateEdgesConnectedTo",value:function(e){this._router.updateLinksConnectedTo(e)}},{key:"_calculateLabelRenderers",value:function(){var e=this;this._labeller.setLinkMap(this._router.getLinkMap()),this._labeller.update();var t=[],n=new Set(this._router.getLinks());if(this._styles.forEach((function(r){Pu(r).forEach((function(r,i){var o=new xu(i),a=e._router.getLinks(r);a.forEach((function(e){return n.delete(e)})),o.links(a),t.push(o)}))})),n.size>0){var r=new xu,i=Array.from(n.values());r.links(i),t.push(r)}return t}},{key:"_calculateLinkRenderers",value:function(){var e=this,t=[],n=new Set;this._edges.forEach((function(e){e.group&&n.add(e.group)})),this._styles.forEach((function(r){(function(e){var t=new Map;return function e(n,r){var i=Fu(n.link||{});r&&Du(i,r),n.children&&n.children.forEach((function(t){e(t,i)})),t.set(i,n.groups)}(e),t})(r).forEach((function(r,i){var o=new Su(i),a=e._router.getLinks(r);o.links(a),t.push(o),r.forEach((function(e){return n.delete(e)}))}))}));var r=new Su,i=this._router.getLinks(Array.from(n)).concat(this._router.getUngroupedLinks());return r.links(i),t.push(r),t}},{key:"_recalculateRenderers",value:function(){this._links=this._calculateLinkRenderers(),this._labels=this._calculateLabelRenderers()}}]),e}(),Vu=Math.pow(2,-52),Uu=new Uint32Array(512),qu=function(){function e(t){f(this,e);var n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;var r=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}return u(e,null,[{key:"from",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zu,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ku,i=t.length,o=new Float64Array(2*i),a=0;a<i;a++){var u=t[a];o[2*a]=n(u),o[2*a+1]=r(u)}return new e(o)}}]),u(e,[{key:"update",value:function(){for(var e=this.coords,t=this._hullPrev,n=this._hullNext,r=this._hullTri,i=this._hullHash,o=e.length>>1,a=1/0,u=1/0,s=-1/0,c=-1/0,l=0;l<o;l++){var f=e[2*l],h=e[2*l+1];f<a&&(a=f),h<u&&(u=h),f>s&&(s=f),h>c&&(c=h),this._ids[l]=l}for(var d,p,v,g=(a+s)/2,m=(u+c)/2,y=1/0,_=0;_<o;_++){var b=Bu(g,m,e[2*_],e[2*_+1]);b<y&&(d=_,y=b)}var w=e[2*d],x=e[2*d+1];y=1/0;for(var k=0;k<o;k++)if(k!==d){var E=Bu(w,x,e[2*k],e[2*k+1]);E<y&&E>0&&(p=k,y=E)}for(var S=e[2*p],j=e[2*p+1],M=1/0,O=0;O<o;O++)if(O!==d&&O!==p){var A=$u(w,x,S,j,e[2*O],e[2*O+1]);A<M&&(v=O,M=A)}var C=e[2*v],T=e[2*v+1];if(M===1/0){for(var L=0;L<o;L++)this._dists[L]=e[2*L]-e[0]||e[2*L+1]-e[1];Yu(this._ids,this._dists,0,o-1);for(var N=new Uint32Array(o),I=0,R=0,D=-1/0;R<o;R++){var F=this._ids[R];this._dists[F]>D&&(N[I++]=F,D=this._dists[F])}return this.hull=N.subarray(0,I),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Hu(w,x,S,j,C,T)){var P=p,z=S,V=j;p=v,S=C,j=T,v=P,C=z,T=V}var U=function(e,t,n,r,i,o){var a=n-e,u=r-t,s=i-e,c=o-t,l=a*a+u*u,f=s*s+c*c,h=.5/(a*c-u*s);return{x:e+(c*l-u*f)*h,y:t+(a*f-s*l)*h}}(w,x,S,j,C,T);this._cx=U.x,this._cy=U.y;for(var q=0;q<o;q++)this._dists[q]=Bu(e[2*q],e[2*q+1],U.x,U.y);Yu(this._ids,this._dists,0,o-1),this._hullStart=d;var B=3;n[d]=t[v]=p,n[p]=t[d]=v,n[v]=t[p]=d,r[d]=0,r[p]=1,r[v]=2,i.fill(-1),i[this._hashKey(w,x)]=d,i[this._hashKey(S,j)]=p,i[this._hashKey(C,T)]=v,this.trianglesLen=0,this._addTriangle(d,p,v,-1,-1,-1);for(var W,H,G=0;G<this._ids.length;G++){var $=this._ids[G],Y=e[2*$],X=e[2*$+1];if(!(G>0&&Math.abs(Y-W)<=Vu&&Math.abs(X-H)<=Vu)&&(W=Y,H=X,$!==d&&$!==p&&$!==v)){for(var Z=0,K=0,Q=this._hashKey(Y,X);K<this._hashSize&&(-1===(Z=i[(Q+K)%this._hashSize])||Z===n[Z]);K++);for(var J=void 0,ee=Z=t[Z];J=n[ee],!Hu(Y,X,e[2*ee],e[2*ee+1],e[2*J],e[2*J+1]);)if((ee=J)===Z){ee=-1;break}if(-1!==ee){var te=this._addTriangle(ee,$,n[ee],-1,-1,r[ee]);r[$]=this._legalize(te+2),r[ee]=te,B++;for(var ne=n[ee];J=n[ne],Hu(Y,X,e[2*ne],e[2*ne+1],e[2*J],e[2*J+1]);)te=this._addTriangle(ne,$,J,r[$],-1,r[ne]),r[$]=this._legalize(te+2),n[ne]=ne,B--,ne=J;if(ee===Z)for(;Hu(Y,X,e[2*(J=t[ee])],e[2*J+1],e[2*ee],e[2*ee+1]);)te=this._addTriangle(J,$,ee,-1,r[ee],r[J]),this._legalize(te+2),r[J]=te,n[ee]=ee,B--,ee=J;this._hullStart=t[$]=ee,n[ee]=t[ne]=$,n[$]=ne,i[this._hashKey(Y,X)]=$,i[this._hashKey(e[2*ee],e[2*ee+1])]=ee}}}this.hull=new Uint32Array(B);for(var re=0,ie=this._hullStart;re<B;re++)this.hull[re]=ie,ie=n[ie];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(e,t){return Math.floor(function(e,t){var n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function(e){for(var t=this._triangles,n=this._halfedges,r=this.coords,i=0,o=0;;){var a=n[e],u=e-e%3;if(o=u+(e+2)%3,-1!==a){var s=a-a%3,c=u+(e+1)%3,l=s+(a+2)%3,f=t[o],h=t[e],d=t[c],p=t[l];if(Gu(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){t[e]=p,t[a]=f;var v=n[l];if(-1===v){var g=this._hullStart;do{if(this._hullTri[g]===l){this._hullTri[g]=e;break}g=this._hullPrev[g]}while(g!==this._hullStart)}this._link(e,v),this._link(a,n[o]),this._link(o,l);var m=s+(a+1)%3;i<Uu.length&&(Uu[i++]=m)}else{if(0===i)break;e=Uu[--i]}}else{if(0===i)break;e=Uu[--i]}}return o}},{key:"_link",value:function(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}},{key:"_addTriangle",value:function(e,t,n,r,i,o){var a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}]),e}();function Bu(e,t,n,r){var i=e-n,o=t-r;return i*i+o*o}function Wu(e,t,n,r,i,o){var a=(r-t)*(i-e),u=(n-e)*(o-t);return Math.abs(a-u)>=33306690738754716e-32*Math.abs(a+u)?a-u:0}function Hu(e,t,n,r,i,o){return(Wu(i,o,e,t,n,r)||Wu(e,t,n,r,i,o)||Wu(n,r,i,o,e,t))<0}function Gu(e,t,n,r,i,o,a,u){var s=e-a,c=t-u,l=n-a,f=r-u,h=i-a,d=o-u,p=l*l+f*f,v=h*h+d*d;return s*(f*v-p*d)-c*(l*v-p*h)+(s*s+c*c)*(l*d-f*h)<0}function $u(e,t,n,r,i,o){var a=n-e,u=r-t,s=i-e,c=o-t,l=a*a+u*u,f=s*s+c*c,h=.5/(a*c-u*s),d=(c*l-u*f)*h,p=(a*f-s*l)*h;return d*d+p*p}function Yu(e,t,n,r){if(r-n<=20)for(var i=n+1;i<=r;i++){for(var o=e[i],a=t[o],u=i-1;u>=n&&t[e[u]]>a;)e[u+1]=e[u--];e[u+1]=o}else{var s=n+1,c=r;Xu(e,n+r>>1,s),t[e[n]]>t[e[r]]&&Xu(e,n,r),t[e[s]]>t[e[r]]&&Xu(e,s,r),t[e[n]]>t[e[s]]&&Xu(e,n,s);for(var l=e[s],f=t[l];;){do{s++}while(t[e[s]]<f);do{c--}while(t[e[c]]>f);if(c<s)break;Xu(e,s,c)}e[n+1]=e[c],e[c]=l,r-s+1>=c-n?(Yu(e,t,s,r),Yu(e,t,n,c-1)):(Yu(e,t,n,c-1),Yu(e,t,s,r))}}function Xu(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Zu(e){return e[0]}function Ku(e){return e[1]}var Qu=function(){function e(){f(this,e),this._x0=this._y0=this._x1=this._y1=null,this._=""}return u(e,[{key:"moveTo",value:function(e,t){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function(e,t){this._+="L".concat(this._x1=+e,",").concat(this._y1=+t)}},{key:"arc",value:function(e,t,n){var r=(e=+e)+(n=+n),i=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(i):(Math.abs(this._x1-r)>1e-6||Math.abs(this._y1-i)>1e-6)&&(this._+="L"+r+","+i),n&&(this._+="A".concat(n,",").concat(n,",0,1,1,").concat(e-n,",").concat(t,"A").concat(n,",").concat(n,",0,1,1,").concat(this._x1=r,",").concat(this._y1=i))}},{key:"rect",value:function(e,t,n,r){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t,"h").concat(+n,"v").concat(+r,"h").concat(-n,"Z")}},{key:"value",value:function(){return this._||null}}]),e}(),Ju=function(){function e(){f(this,e),this._=[]}return u(e,[{key:"moveTo",value:function(e,t){this._.push([e,t])}},{key:"closePath",value:function(){this._.push(this._[0].slice())}},{key:"lineTo",value:function(e,t){this._.push([e,t])}},{key:"value",value:function(){return this._.length?this._:null}}]),e}(),es=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],r=a(n,4),i=r[0],o=r[1],u=r[2],s=r[3];if(f(this,e),!((u=+u)>=(i=+i)&&(s=+s)>=(o=+o)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=u,this.xmin=i,this.ymax=s,this.ymin=o,this._init()}return u(e,[{key:"update",value:function(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function(){for(var e,t,n=this.delaunay,r=n.points,i=n.hull,o=n.triangles,a=this.vectors,u=this.circumcenters=this._circumcenters.subarray(0,o.length/3*2),s=0,c=0,l=o.length;s<l;s+=3,c+=2){var f=2*o[s],h=2*o[s+1],d=2*o[s+2],p=r[f],v=r[f+1],g=r[h],m=r[h+1],y=r[d],_=r[d+1],b=g-p,w=m-v,x=y-p,k=_-v,E=b*b+w*w,S=x*x+k*k,j=2*(b*k-w*x);if(j)if(Math.abs(j)<1e-8)e=(p+y)/2,t=(v+_)/2;else{var M=1/j;e=p+(k*E-w*S)*M,t=v+(b*S-x*E)*M}else e=(p+y)/2-1e8*k,t=(v+_)/2+1e8*x;u[c]=e,u[c+1]=t}var O,A,C,T=i[i.length-1],L=4*T,N=r[2*T],I=r[2*T+1];a.fill(0);for(var R=0;R<i.length;++R)O=L,A=N,C=I,L=4*(T=i[R]),N=r[2*T],I=r[2*T+1],a[O+2]=a[L]=C-I,a[O+3]=a[L+1]=N-A}},{key:"render",value:function(e){var t=null==e?e=new Qu:void 0,n=this.delaunay,r=n.halfedges,i=n.inedges,o=n.hull,a=this.circumcenters,u=this.vectors;if(o.length<=1)return null;for(var s=0,c=r.length;s<c;++s){var l=r[s];if(!(l<s)){var f=2*Math.floor(s/3),h=2*Math.floor(l/3),d=a[f],p=a[f+1],v=a[h],g=a[h+1];this._renderSegment(d,p,v,g,e)}}for(var m,y=o[o.length-1],_=0;_<o.length;++_){m=y,y=o[_];var b=2*Math.floor(i[y]/3),w=a[b],x=a[b+1],k=4*m,E=this._project(w,x,u[k+2],u[k+3]);E&&this._renderSegment(w,x,E[0],E[1],e)}return t&&t.value()}},{key:"renderBounds",value:function(e){var t=null==e?e=new Qu:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}},{key:"renderCell",value:function(e,t){var n=null==t?t=new Qu:void 0,r=this._clip(e);if(null!==r){t.moveTo(r[0],r[1]);for(var i=r.length;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(var o=2;o<i;o+=2)r[o]===r[o-2]&&r[o+1]===r[o-1]||t.lineTo(r[o],r[o+1]);return t.closePath(),n&&n.value()}}},{key:"cellPolygons",value:r.mark((function e(){var t,n,i,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.delaunay.points,n=0,i=t.length/2;case 2:if(!(n<i)){e.next=11;break}if(o=this.cellPolygon(n),e.t0=o,!e.t0){e.next=8;break}return e.next=8,o;case 8:++n,e.next=2;break;case 11:case"end":return e.stop()}}),e,this)}))},{key:"cellPolygon",value:function(e){var t=new Ju;return this.renderCell(e,t),t.value()}},{key:"_renderSegment",value:function(e,t,n,r,i){var o,a=this._regioncode(e,t),u=this._regioncode(n,r);0===a&&0===u?(i.moveTo(e,t),i.lineTo(n,r)):(o=this._clipSegment(e,t,n,r,a,u))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}},{key:"contains",value:function(e,t,n){return(t=+t)==t&&(n=+n)==n&&this.delaunay._step(e,t,n)===e}},{key:"neighbors",value:r.mark((function e(t){var n,i,o,a,u,s,c,l,f,h,d,p;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._clip(t))){e.next=42;break}i=!0,o=!1,a=void 0,e.prev=5,u=this.delaunay.neighbors(t)[Symbol.iterator]();case 7:if(i=(s=u.next()).done){e.next=28;break}if(c=s.value,!(l=this._clip(c))){e.next=25;break}f=0,h=n.length;case 12:if(!(f<h)){e.next=25;break}d=0,p=l.length;case 14:if(!(d<p)){e.next=22;break}if(n[f]!=l[d]||n[f+1]!=l[d+1]||n[(f+2)%h]!=l[(d+p-2)%p]||n[(f+3)%h]!=l[(d+p-1)%p]){e.next=19;break}return e.next=18,c;case 18:return e.abrupt("break",25);case 19:d+=2,e.next=14;break;case 22:f+=2,e.next=12;break;case 25:i=!0,e.next=7;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(5),o=!0,a=e.t0;case 34:e.prev=34,e.prev=35,i||null==u.return||u.return();case 37:if(e.prev=37,!o){e.next=40;break}throw a;case 40:return e.finish(37);case 41:return e.finish(34);case 42:case"end":return e.stop()}}),e,this,[[5,30,34,42],[35,,37,41]])}))},{key:"_cell",value:function(e){var t=this.circumcenters,n=this.delaunay,r=n.inedges,i=n.halfedges,o=n.triangles,a=r[e];if(-1===a)return null;var u=[],s=a;do{var c=Math.floor(s/3);if(u.push(t[2*c],t[2*c+1]),o[s=s%3==2?s-2:s+1]!==e)break;s=i[s]}while(s!==a&&-1!==s);return u}},{key:"_clip",value:function(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var t=this._cell(e);if(null===t)return null;var n=this.vectors,r=4*e;return n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t)}},{key:"_clipFinite",value:function(e,t){for(var n,r,i,o,u,s=t.length,c=null,l=t[s-2],f=t[s-1],h=this._regioncode(l,f),d=0;d<s;d+=2)if(n=l,r=f,l=t[d],f=t[d+1],i=h,h=this._regioncode(l,f),0===i&&0===h)o=u,u=0,c?c.push(l,f):c=[l,f];else{var p=void 0,v=void 0,g=void 0,m=void 0,y=void 0;if(0===i){if(null===(p=this._clipSegment(n,r,l,f,i,h)))continue;var _=a(p,4);v=_[0],g=_[1],m=_[2],y=_[3]}else{var b;if(null===(p=this._clipSegment(l,f,n,r,h,i)))continue;m=(b=a(p,4))[0],y=b[1],v=b[2],g=b[3],o=u,u=this._edgecode(v,g),o&&u&&this._edge(e,o,u,c,c.length),c?c.push(v,g):c=[v,g]}o=u,u=this._edgecode(m,y),o&&u&&this._edge(e,o,u,c,c.length),c?c.push(m,y):c=[m,y]}if(c)o=u,u=this._edgecode(c[0],c[1]),o&&u&&this._edge(e,o,u,c,c.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return c}},{key:"_clipSegment",value:function(e,t,n,r,i,o){for(;;){if(0===i&&0===o)return[e,t,n,r];if(i&o)return null;var a=void 0,u=void 0,s=i||o;8&s?(a=e+(n-e)*(this.ymax-t)/(r-t),u=this.ymax):4&s?(a=e+(n-e)*(this.ymin-t)/(r-t),u=this.ymin):2&s?(u=t+(r-t)*(this.xmax-e)/(n-e),a=this.xmax):(u=t+(r-t)*(this.xmin-e)/(n-e),a=this.xmin),i?(e=a,t=u,i=this._regioncode(e,t)):(n=a,r=u,o=this._regioncode(n,r))}}},{key:"_clipInfinite",value:function(e,t,n,r,i,o){var a,u=Array.from(t);if((a=this._project(u[0],u[1],n,r))&&u.unshift(a[0],a[1]),(a=this._project(u[u.length-2],u[u.length-1],i,o))&&u.push(a[0],a[1]),u=this._clipFinite(e,u))for(var s,c=0,l=u.length,f=this._edgecode(u[l-2],u[l-1]);c<l;c+=2)s=f,f=this._edgecode(u[c],u[c+1]),s&&f&&(c=this._edge(e,s,f,u,c),l=u.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}},{key:"_edge",value:function(e,t,n,r,i){for(;t!==n;){var o=void 0,a=void 0;switch(t){case 5:t=4;continue;case 4:t=6,o=this.xmax,a=this.ymin;break;case 6:t=2;continue;case 2:t=10,o=this.xmax,a=this.ymax;break;case 10:t=8;continue;case 8:t=9,o=this.xmin,a=this.ymax;break;case 9:t=1;continue;case 1:t=5,o=this.xmin,a=this.ymin}r[i]===o&&r[i+1]===a||!this.contains(e,o,a)||(r.splice(i,0,o,a),i+=2)}if(r.length>4)for(var u=0;u<r.length;u+=2){var s=(u+2)%r.length,c=(u+4)%r.length;(r[u]===r[s]&&r[s]===r[c]||r[u+1]===r[s+1]&&r[s+1]===r[c+1])&&(r.splice(s,2),u-=2)}return i}},{key:"_project",value:function(e,t,n,r){var i,o,a,u=1/0;if(r<0){if(t<=this.ymin)return null;(i=(this.ymin-t)/r)<u&&(a=this.ymin,o=e+(u=i)*n)}else if(r>0){if(t>=this.ymax)return null;(i=(this.ymax-t)/r)<u&&(a=this.ymax,o=e+(u=i)*n)}if(n>0){if(e>=this.xmax)return null;(i=(this.xmax-e)/n)<u&&(o=this.xmax,a=t+(u=i)*r)}else if(n<0){if(e<=this.xmin)return null;(i=(this.xmin-e)/n)<u&&(o=this.xmin,a=t+(u=i)*r)}return[o,a]}},{key:"_edgecode",value:function(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}},{key:"_regioncode",value:function(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}]),e}(),ts=2*Math.PI;function ns(e){return e[0]}function rs(e){return e[1]}function is(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}var os=function(){function e(t){f(this,e),this._delaunator=new qu(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}return u(e,null,[{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ns,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rs,o=arguments.length>3?arguments[3]:void 0;return new e("length"in t?function(e,t,n,r){for(var i=e.length,o=new Float64Array(2*i),a=0;a<i;++a){var u=e[a];o[2*a]=t.call(r,u,a,e),o[2*a+1]=n.call(r,u,a,e)}return o}(t,n,i,o):Float64Array.from(r.mark((function e(t,n,i,o){var a,u,s,c,l,f,h;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0,u=!0,s=!1,c=void 0,e.prev=4,l=t[Symbol.iterator]();case 6:if(u=(f=l.next()).done){e.next=16;break}return h=f.value,e.next=10,n.call(o,h,a,t);case 10:return e.next=12,i.call(o,h,a,t);case 12:++a;case 13:u=!0,e.next=6;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),s=!0,c=e.t0;case 22:e.prev=22,e.prev=23,u||null==l.return||l.return();case 25:if(e.prev=25,!s){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:case"end":return e.stop()}}),e,null,[[4,18,22,30],[23,,25,29]])}))(t,n,i,o)))}}]),u(e,[{key:"update",value:function(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function(){var e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){for(var t=e.triangles,n=e.coords,r=0;r<t.length;r+=3){var i=2*t[r],o=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},(function(e,t){return t})).sort((function(e,n){return t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]}));for(var n=this.collinear[0],r=this.collinear[this.collinear.length-1],i=[t[2*n],t[2*n+1],t[2*r],t[2*r+1]],o=1e-8*Math.sqrt(Math.pow(i[3]-i[1],2)+Math.pow(i[2]-i[0],2)),a=0,u=t.length/2;a<u;++a){var s=is(t[2*a],t[2*a+1],o);t[2*a]=s[0],t[2*a+1]=s[1]}this._delaunator=new qu(t)}else delete this.collinear;for(var c=this.halfedges=this._delaunator.halfedges,l=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,h=this.inedges.fill(-1),d=this._hullIndex.fill(-1),p=0,v=c.length;p<v;++p){var g=f[p%3==2?p-2:p+1];-1!==c[p]&&-1!==h[g]||(h[g]=p)}for(var m=0,y=l.length;m<y;++m)d[l[m]]=m;l.length<=2&&l.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=l[0],this.triangles[1]=l[1],this.triangles[2]=l[1],h[l[0]]=1,2===l.length&&(h[l[1]]=0))}},{key:"voronoi",value:function(e){return new es(this,e)}},{key:"neighbors",value:r.mark((function e(t){var n,i,o,a,u,s,c,l,f,h,d;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.inedges,i=this.hull,o=this._hullIndex,a=this.halfedges,u=this.triangles,!(s=this.collinear)){e.next=13;break}if(c=s.indexOf(t),e.t0=c>0,!e.t0){e.next=7;break}return e.next=7,s[c-1];case 7:if(e.t1=c<s.length-1,!e.t1){e.next=12;break}return e.next=11,s[c+1];case 11:e.t1=e.sent;case 12:return e.abrupt("return",void e.t1);case 13:if(-1!==(l=n[t])){e.next=16;break}return e.abrupt("return");case 16:f=l,h=-1;case 17:return e.next=19,h=u[f];case 19:if(u[f=f%3==2?f-2:f+1]===t){e.next=22;break}return e.abrupt("return");case 22:if(-1!==(f=a[f])){e.next=30;break}if(d=i[(o[t]+1)%i.length],e.t2=d!==h,!e.t2){e.next=29;break}return e.next=28,d;case 28:e.t2=e.sent;case 29:return e.abrupt("return",void e.t2);case 30:if(f!==l){e.next=17;break}case 31:case"end":return e.stop()}}),e,this)}))},{key:"find",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((e=+e)!=e||(t=+t)!=t)return-1;for(var r,i=n;(r=this._step(n,e,t))>=0&&r!==n&&r!==i;)n=r;return r}},{key:"_step",value:function(e,t,n){var r=this.inedges,i=this.hull,o=this._hullIndex,a=this.halfedges,u=this.triangles,s=this.points;if(-1===r[e]||!s.length)return(e+1)%(s.length>>1);var c=e,l=Math.pow(t-s[2*e],2)+Math.pow(n-s[2*e+1],2),f=r[e],h=f;do{var d=u[h],p=Math.pow(t-s[2*d],2)+Math.pow(n-s[2*d+1],2);if(p<l&&(l=p,c=d),u[h=h%3==2?h-2:h+1]!==e)break;if(-1===(h=a[h])){if((h=i[(o[e]+1)%i.length])!==d&&Math.pow(t-s[2*h],2)+Math.pow(n-s[2*h+1],2)<l)return h;break}}while(h!==f);return c}},{key:"render",value:function(e){for(var t=null==e?e=new Qu:void 0,n=this.points,r=this.halfedges,i=this.triangles,o=0,a=r.length;o<a;++o){var u=r[o];if(!(u<o)){var s=2*i[o],c=2*i[u];e.moveTo(n[s],n[s+1]),e.lineTo(n[c],n[c+1])}}return this.renderHull(e),t&&t.value()}},{key:"renderPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=null==e?e=new Qu:void 0,r=this.points,i=0,o=r.length;i<o;i+=2){var a=r[i],u=r[i+1];e.moveTo(a+t,u),e.arc(a,u,t,0,ts)}return n&&n.value()}},{key:"renderHull",value:function(e){var t=null==e?e=new Qu:void 0,n=this.hull,r=this.points,i=2*n[0],o=n.length;e.moveTo(r[i],r[i+1]);for(var a=1;a<o;++a){var u=2*n[a];e.lineTo(r[u],r[u+1])}return e.closePath(),t&&t.value()}},{key:"hullPolygon",value:function(){var e=new Ju;return this.renderHull(e),e.value()}},{key:"renderTriangle",value:function(e,t){var n=null==t?t=new Qu:void 0,r=this.points,i=this.triangles,o=2*i[e*=3],a=2*i[e+1],u=2*i[e+2];return t.moveTo(r[o],r[o+1]),t.lineTo(r[a],r[a+1]),t.lineTo(r[u],r[u+1]),t.closePath(),n&&n.value()}},{key:"trianglePolygons",value:r.mark((function e(){var t,n,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.triangles,n=0,i=t.length/3;case 2:if(!(n<i)){e.next=8;break}return e.next=5,this.trianglePolygon(n);case 5:++n,e.next=2;break;case 8:case"end":return e.stop()}}),e,this)}))},{key:"trianglePolygon",value:function(e){var t=new Ju;return this.renderTriangle(e,t),t.value()}}]),e}(),as=function(e){function t(e,n,r){var i;return f(this,t),(i=s(this,c(t).call(this)))._canvas=e,i._delaunay=null,i._links=[],i._transform=su,i._x=n,i._y=r,i._lastLink=null,i._maxDist=25,i._numsections=25,nt(i._canvas).on("mousemove",i._onHover.bind(o(i))),i}return l(t,e),u(t,[{key:"render",value:function(e){this._delaunay&&(e.save(),this._delaunay.render(e),e.strokeStyle="red",e.lineWidth=2,e.stroke(),e.restore())}},{key:"setData",value:function(e){var t=[];this._links=[];var n=!0,r=!1,i=void 0;try{for(var o,a=e.keys()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,s=u.path;if(s)for(var c=1/this._numsections,l=0;l<=this._numsections;++l)t.push(s.pointAlong(c*l,this._x,this._y)),this._links.push(u)}}catch(f){r=!0,i=f}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return this._delaunay=os.from(t,(function(e){return e.x}),(function(e){return e.y})),this}},{key:"setTransform",value:function(e){return this._transform=e,this}},{key:"_distance",value:function(e,t,n){for(var r,i,o,a,u=1/0,s=0;s<=this._numsections;++s){var c=n.pointAlong(s/this._numsections,this._x,this._y),l=(r=e,i=t,o=c.x,a=c.y,Math.pow(o-r,2)+Math.pow(a-i,2));l<u&&(u=l)}return Math.sqrt(u)}},{key:"_onHover",value:function(){var e=tn(this._canvas),t=this._transform.invertX(e[0]),n=this._transform.invertY(e[1]);if(this._delaunay){var r=this._delaunay.find(t,n);if(r<this._links.length){var i=this._links[r],o=i.path,a=this._distance(t,n,o);this._setHover(i,a)}}}},{key:"_setHover",value:function(e,t){t<this._maxDist?e!==this._lastLink&&(this._lastLink=e,this.dispatchEvent({type:"hover",link:e})):null!==this._lastLink&&(this._lastLink=null,this.dispatchEvent({type:"hover",link:null}))}}]),t}(mu),us=function(e){function t(e){var n;return f(this,t),(n=s(this,c(t).call(this)))._nodes=[],n.color=t.defaultColor,n.font=t.defaultFont,n.filter=void 0,e&&(e.color&&(n.color=e.color),e.font&&(n.font=e.font)),n}return l(t,e),u(t,[{key:"nodes",value:function(e){return arguments.length?(this._nodes=e,this):this._nodes}},{key:"render",value:function(e,t,n){var r=this;this._nodes.length&&(e.save(),e.beginPath(),this.color&&(e.fillStyle=this.color),e.font=this.font,e.textAlign="center",e.textBaseline="middle",this._nodes.forEach((function(o){if(o.labels){var a=r.font.match(/(\d*)px/),u=a&&a.length>1?parseInt(a[1]):12,s=[o.id].concat(i(o.labels)),c=Math.floor(s.length*u/2-u/2)-1;s.forEach((function(r,i){e.fillText(r,t(o.x)+(o.dx?o.dx:0),n(o.y)+(o.dy?o.dy:0)-c+i*u)}))}else{var l=r.filter?r.filter(o.id):o.id;e.fillText(l,t(o.x)+(o.dx?o.dx:0),n(o.y)+(o.dy?o.dy:0))}})),e.restore())}},{key:"setAlphaRename",value:function(e){return this.filter=e,this}}]),t}(k);us.defaultColor="#333333",us.defaultFont="14px sans-serif";var ss=2*Math.PI,cs=Math.PI/6,ls=function(e){function t(e){var n;return f(this,t),(n=s(this,c(t).call(this,e)))._radius=t.defaultRadius,e&&b(e)&&e.radius&&(n._radius=e.radius),n}return l(t,e),u(t,[{key:"bounds",value:function(e,t){var n=this,r=new x;return this._nodes.forEach((function(i){var o=e(i.x),a=t(i.y);r.expand(o+n._radius,a+n._radius),r.expand(o-n._radius,a-n._radius)})),r}},{key:"containsPoint",value:function(e,t,n,r){r=r||1;var i=t-e.x,o=n-e.y,a=i*i+o*o,u=this._radius/r;return a<u*u}},{key:"intersect",value:function(e){return{x:this._radius*Math.cos(e),y:this._radius*Math.sin(e)}}},{key:"radius",value:function(e){return arguments.length?(this._radius=+e,this):this._radius}},{key:"render",value:function(e,t,n){var r=this;this._nodes.length&&(e.save(),e.beginPath(),this._nodes.forEach((function(i){var o=t(i.x),a=n(i.y);e.moveTo(o+r._radius,a),e.arc(o,a,r._radius,0,ss)})),this._doStrokeAndFill(e),e.restore())}},{key:"selfLoopPoints",value:function(e){var t=e.x,n=e.y;return[{x:t,y:n,dx:this._radius*Math.cos(-cs),dy:this._radius*Math.sin(-cs)},{x:t,y:n,dx:3*this._radius*Math.cos(-cs),dy:3*this._radius*Math.sin(-cs)},{x:t,y:n,dx:3*this._radius*Math.cos(cs),dy:3*this._radius*Math.sin(cs)},{x:t,y:n,dx:this._radius*Math.cos(cs),dy:this._radius*Math.sin(cs)}]}}]),t}(E);ls.defaultRadius=60;var fs=function(){function e(){f(this,e),this._nodes=new Map,this._labels=[],this._shapes=[],this._styles=[]}return u(e,[{key:"labelRenderers",value:function(){return this._labels}},{key:"nodes",value:function(e){var t=this;return e?(this._nodes=new Map,e.map((function(e){return"string"==typeof e?{id:e,x:0,y:0}:e})).forEach((function(e){if(t._nodes.has(e.id))throw Error("Duplicate node ".concat(e.id));t._nodes.set(e.id,e)})),this):Array.from(this._nodes.values())}},{key:"shapeRenderers",value:function(){return this._shapes}},{key:"setStyles",value:function(e){return this._styles=e,this}},{key:"update",value:function(){this._shapes=this._calculateShapeRenderers(),this._labels=this._calculateLabelRenderers()}},{key:"_calculateLabelRenderers",value:function(){var e=[],t=new Map(this._nodes);if(this._styles.forEach((function(n){Pu(n).forEach((function(n,r){var i=new us(r),o=hs(n,t);i.nodes(o),e.push(i)}))})),t.size>0){var n=new us,r=Array.from(t.values());n.nodes(r),e.push(n)}return e}},{key:"_calculateShapeRenderers",value:function(){var e=[],t=new Map(this._nodes);if(this._styles.forEach((function(n){(function(e){var t=new Map;return function e(n,r){var i=y(n.shape||{});r&&(function(e,t){if(b(e)&&b(t))g(e,t,["type","radius"]);else if(w(e)&&w(t))g(e,t,["type","width","height"]);else if(!e.type){if(b(t))return void g(e,t,["type","radius"]);w(t)&&g(e,t,["type","width","height"])}}(i,r),m(i,r)),n.children&&n.children.forEach((function(t){e(t,i)})),t.set(i,n.nodes)}(e),t})(n).forEach((function(n,r){var i;i=b(r)?new ls(r):w(r)?new M(r):new ls(r);var o=hs(n,t);i.nodes(o),e.push(i)}))})),t.size>0){var n=new ls,r=Array.from(t.values());n.nodes(r),e.push(n)}return e}}]),e}();function hs(e,t){var n=[];return e.forEach((function(e){t.has(e)&&(n.push(t.get(e)),t.delete(e))})),n}var ds=function(e){function t(){var e;return f(this,t),(e=s(this,c(t).call(this)))._axesVisible=!0,e._gridVisible=!0,e._axisColor="#bbbbbb",e._gridColor="#dddddd",e._ticks=10,e._ticksize=8,e._labelpadding=4,e._gridPattern=[5,5],e}return l(t,e),u(t,[{key:"axesVisible",value:function(e){return this._axesVisible=e,this}},{key:"gridVisible",value:function(e){return this._gridVisible=e,this}},{key:"render",value:function(e,t,n){var r=this,i=ps(t(0)),o=ps(n(0)),a=t.range().map(ps),u=n.range().map(ps),s=Math.abs(a[1]/u[1]),c=this._ticksize/2,l=t.ticks(this._ticks*s),f=n.ticks(this._ticks);e.save(),e.beginPath(),this._gridVisible&&(f.forEach((function(t){if(0!==t||!r._axesVisible){var i=ps(n(t));e.moveTo(a[0],i),e.lineTo(a[1],i)}})),e.setLineDash(this._gridPattern),e.lineDashOffset=-i,e.strokeStyle=this._gridColor,e.stroke(),e.beginPath(),l.forEach((function(n){if(0!==n||!r._axesVisible){var i=ps(t(n));e.moveTo(i,u[0]),e.lineTo(i,u[1])}})),e.lineDashOffset=-o,e.stroke()),this._axesVisible&&(e.beginPath(),e.moveTo(a[0],o),e.lineTo(a[1],o),l.forEach((function(n){if(0!==n){var r=ps(t(n));e.moveTo(r,o-c),e.lineTo(r,o+c)}})),e.moveTo(i,u[0]),e.lineTo(i,u[1]),f.forEach((function(t){if(0!==t){var r=ps(n(t));e.moveTo(i-c,r),e.lineTo(i+c,r)}})),e.setLineDash([]),e.strokeStyle=this._axisColor,e.stroke(),e.font="10px sans-serif",e.textAlign="center",e.textBaseline="top",e.fillStyle=this._axisColor,l.forEach((function(n){if(0!==n){var i=ps(t(n));e.fillText(n.toString(),i,o+c+r._labelpadding)}})),e.textAlign="left",e.textBaseline="middle",f.forEach((function(t){if(0!==t){var o=ps(n(t));e.fillText(t.toString(),i+c+r._labelpadding,o)}}))),e.restore()}}]),t}(k);function ps(e){return Math.round(e)+.5}var vs=function(){function e(t){f(this,e),this._canvas=t||null,this._context=null,this._axes=new ds,this._linkLabelRenderers=[],this._linkRenderers=[],this._nodeLabelRenderers=[],this._nodeRenderers=[],this._rename=void 0,this._width=0,this._height=0,this._x=Ci(),this._y=Ci(),this._transform=su,this._zoom=function(){var e,t,n=fu,r=hu,i=gu,o=pu,a=vu,u=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,l=iu,f=W("start","zoom","end"),h=0;function d(e){e.property("__zoom",du).on("wheel.zoom",b).on("mousedown.zoom",w).on("dblclick.zoom",x).filter(a).on("touchstart.zoom",k).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new uu(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new uu(e.k,r,i)}function g(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function m(e,t,n){e.on("start.zoom",(function(){y(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){y(this,arguments).end()})).tween("zoom",(function(){var e=this,i=arguments,o=y(e,i),a=r.apply(e,i),u=null==n?g(a):"function"==typeof n?n.apply(e,i):n,s=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=e.__zoom,f="function"==typeof t?t.apply(e,i):t,h=l(c.invert(u).concat(s/c.k),f.invert(u).concat(s/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=s/t[2];e=new uu(n,u[0]-t[0]*n,u[1]-t[1]*n)}o.zoom(null,e)}}))}function y(e,t,n){return!n&&e.__zooming||new _(e,t)}function _(e,t){this.that=e,this.args=t,this.active=0,this.extent=r.apply(e,t),this.taps=0}function b(){if(n.apply(this,arguments)){var e=y(this,arguments),t=this.__zoom,r=Math.max(u[0],Math.min(u[1],t.k*Math.pow(2,o.apply(this,arguments)))),a=tn(this);if(e.wheel)e.mouse[0][0]===a[0]&&e.mouse[0][1]===a[1]||(e.mouse[1]=t.invert(e.mouse[0]=a)),clearTimeout(e.wheel);else{if(t.k===r)return;e.mouse=[a,t.invert(a)],An(this),e.start()}lu(),e.wheel=setTimeout(c,150),e.zoom("mouse",i(v(p(t,r),e.mouse[0],e.mouse[1]),e.extent,s))}function c(){e.wheel=null,e.end()}}function w(){if(!t&&n.apply(this,arguments)){var e=y(this,arguments,!0),r=nt(qe.view).on("mousemove.zoom",c,!0).on("mouseup.zoom",l,!0),o=tn(this),a=qe.clientX,u=qe.clientY;ot(qe.view),cu(),e.mouse=[o,this.__zoom.invert(o)],An(this),e.start()}function c(){if(lu(),!e.moved){var t=qe.clientX-a,n=qe.clientY-u;e.moved=t*t+n*n>h}e.zoom("mouse",i(v(e.that.__zoom,e.mouse[0]=tn(e.that),e.mouse[1]),e.extent,s))}function l(){r.on("mousemove.zoom mouseup.zoom",null),at(qe.view,e.moved),lu(),e.end()}}function x(){if(n.apply(this,arguments)){var e=this.__zoom,t=tn(this),o=e.invert(t),a=e.k*(qe.shiftKey?.5:2),u=i(v(p(e,a),t,o),r.apply(this,arguments),s);lu(),c>0?nt(this).transition().duration(c).call(m,u,t):nt(this).call(d.transform,u)}}function k(){if(n.apply(this,arguments)){var t,r,i,o,a=qe.touches,u=a.length,s=y(this,arguments,qe.changedTouches.length===u);for(cu(),r=0;r<u;++r)i=a[r],o=[o=en(this,a,i.identifier),this.__zoom.invert(o),i.identifier],s.touch0?s.touch1||s.touch0[2]===o[2]||(s.touch1=o,s.taps=0):(s.touch0=o,t=!0,s.taps=1+!!e);e&&(e=clearTimeout(e)),t&&(s.taps<2&&(e=setTimeout((function(){e=null}),500)),An(this),s.start())}}function E(){if(this.__zooming){var t,n,r,o,a=y(this,arguments),u=qe.changedTouches,c=u.length;for(lu(),e&&(e=clearTimeout(e)),a.taps=0,t=0;t<c;++t)n=u[t],r=en(this,u,n.identifier),a.touch0&&a.touch0[2]===n.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===n.identifier&&(a.touch1[0]=r);if(n=a.that.__zoom,a.touch1){var l=a.touch0[0],f=a.touch0[1],h=a.touch1[0],d=a.touch1[1],g=(g=h[0]-l[0])*g+(g=h[1]-l[1])*g,m=(m=d[0]-f[0])*m+(m=d[1]-f[1])*m;n=p(n,Math.sqrt(g/m)),r=[(l[0]+h[0])/2,(l[1]+h[1])/2],o=[(f[0]+d[0])/2,(f[1]+d[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],o=a.touch0[1]}a.zoom("touch",i(v(n,r,o),a.extent,s))}}function S(){if(this.__zooming){var e,n,r=y(this,arguments),i=qe.changedTouches,o=i.length;for(cu(),t&&clearTimeout(t),t=setTimeout((function(){t=null}),500),e=0;e<o;++e)n=i[e],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var a=nt(this).on("dblclick.zoom");a&&a.apply(this,arguments)}}}return d.transform=function(e,t,n){var r=e.selection?e.selection():e;r.property("__zoom",du),e!==r?m(e,t,n):r.interrupt().each((function(){y(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},d.scaleBy=function(e,t,n){d.scaleTo(e,(function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n}),n)},d.scaleTo=function(e,t,n){d.transform(e,(function(){var e=r.apply(this,arguments),o=this.__zoom,a=null==n?g(e):"function"==typeof n?n.apply(this,arguments):n,u=o.invert(a),c="function"==typeof t?t.apply(this,arguments):t;return i(v(p(o,c),a,u),e,s)}),n)},d.translateBy=function(e,t,n){d.transform(e,(function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),s)}))},d.translateTo=function(e,t,n,o){d.transform(e,(function(){var e=r.apply(this,arguments),a=this.__zoom,u=null==o?g(e):"function"==typeof o?o.apply(this,arguments):o;return i(su.translate(u[0],u[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,s)}),o)},_.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){Ye(new au(d,e,this.that.__zoom),f.apply,f,[e,this.that,this.args])}},d.wheelDelta=function(e){return arguments.length?(o="function"==typeof e?e:ou(+e),d):o},d.filter=function(e){return arguments.length?(n="function"==typeof e?e:ou(!!e),d):n},d.touchable=function(e){return arguments.length?(a="function"==typeof e?e:ou(!!e),d):a},d.extent=function(e){return arguments.length?(r="function"==typeof e?e:ou([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),d):r},d.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],d):[u[0],u[1]]},d.translateExtent=function(e){return arguments.length?(s[0][0]=+e[0][0],s[1][0]=+e[1][0],s[0][1]=+e[0][1],s[1][1]=+e[1][1],d):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},d.constrain=function(e){return arguments.length?(i=e,d):i},d.duration=function(e){return arguments.length?(c=+e,d):c},d.interpolate=function(e){return arguments.length?(l=e,d):l},d.on=function(){var e=f.on.apply(f,arguments);return e===f?d:e},d.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,d):Math.sqrt(h)},d}(),this._nodeManager=new fs,this._edgeManager=new zu,this._dragManager=null,this._hoverManager=null,this._axesVisible=!0,this._initializeCanvas()}return u(e,[{key:"axesVisible",value:function(e){return this._axes.axesVisible(e),this}},{key:"boundingBox",value:function(){var e=this._transform.invertY(0),t=this._transform.invertX(this._width),n=this._transform.invertY(this._height),r=this._transform.invertX(0);return[this._y.invert(e),this._x.invert(t),this._y.invert(n),this._x.invert(r)]}},{key:"bundleFactor",value:function(e){var t=this._edgeManager.getRouter();return arguments.length?(t instanceof Nu&&t.setFactor(e),this):t instanceof Nu?t.getFactor():void 0}},{key:"canvas",value:function(e){return this._canvas=e,this._initializeCanvas(),this}},{key:"edgeLabelPlacement",value:function(e){return arguments.length?(this._edgeManager.setLabelPlacement(e),this):this._edgeManager.getLabelPlacement()}},{key:"edges",value:function(e){return e?(this._edgeManager.setEdges(e),this):this._edgeManager.getEdges()}},{key:"edgeStyles",value:function(e){return this._edgeManager.setStyles(e),this}},{key:"gridVisible",value:function(e){return this._axes.gridVisible(e),this}},{key:"resize",value:function(){if(this._canvas){var e=getComputedStyle(this._canvas),t=parseInt(e.getPropertyValue("width")),n=parseInt(e.getPropertyValue("height"));this._setDimensions(t,n),this._updateHoverManager(),this._render()}}},{key:"nodes",value:function(e){if(!e)return this._nodeManager.nodes();this._nodeManager.nodes(e);var t=this._nodeManager.nodes();return this._edgeManager.setNodes(t),this}},{key:"nodeStyles",value:function(e){return this._nodeManager.setStyles(e),this}},{key:"setAlphaRename",value:function(e){return this._rename=e,this}},{key:"update",value:function(){var e=this;this._nodeManager.update(),this._nodeRenderers=this._nodeManager.shapeRenderers(),this._edgeManager.setShapes(this._nodeRenderers),this._edgeManager.update(),this._updateDragManager(),this._updateHoverManager(),this._linkRenderers=this._edgeManager.linkRenderers(),this._linkLabelRenderers=this._edgeManager.labelRenderers(),this._nodeLabelRenderers=this._nodeManager.labelRenderers(),this._nodeLabelRenderers.forEach((function(t){return t.setAlphaRename(e._rename)})),this._linkLabelRenderers.forEach((function(t){return t.setAlphaRename(e._rename)})),this._render()}},{key:"zoomToFit",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:750,n=arguments.length>1?arguments[1]:void 0;if(this._canvas&&this._nodeRenderers.length){var r=this._width,i=this._height,o=new x;this._nodeRenderers.forEach((function(t){o.expand(t.bounds(e._x,e._y))}));var u=o.bounds(),s=a(u,2),c=a(s[0],2),l=c[0],f=c[1],h=a(s[1],2),d=h[0],p=h[1];n&&(l+=n[0][0],f+=n[0][1],d+=n[1][0],p+=n[1][1]),nt(this._canvas).transition().duration(t).call(this._zoom.transform,su.translate(this._x(0),this._y(0)).scale(Math.min(8,.9/Math.max((d-l)/r,(p-f)/i))).translate(-(l+d)/2,-(f+p)/2))}}},{key:"zoomToHome",value:function(){this._canvas&&nt(this._canvas).transition().duration(750).call(this._zoom.transform,su)}},{key:"_initializeCanvas",value:function(){var e=this,t=this._canvas;if(t){var n=t.getContext("2d");if(null===n)throw Error("Unable to initialize canvas");this._context=n,this._dragManager=new yu(t,this._x,this._y),this._hoverManager=new as(t,this._x,this._y),this._zoom.scaleExtent([.1,500]).on("zoom",this._zoomed.bind(this)),nt(t).call(this._zoom).on("dblclick.zoom",null).call(this._zoom.transform,this._transform),this._dragManager.addEventListener("drag",(function(t){e._edgeManager.updateEdgesConnectedTo(t.node),e._render()})).addEventListener("end",(function(){e._hoverManager&&(e._updateHoverManager(),e._render())})),this._hoverManager.addEventListener("hover",(function(t){e._linkRenderers.forEach((function(e){return e.highlight(t.link)})),e._linkLabelRenderers.forEach((function(e){return e.highlight(t.link)})),e._render()})),this.update(),this.resize()}else this._context=null,this._dragManager=null}},{key:"_render",value:function(){var e=this,t=this._context;t&&window.requestAnimationFrame((function(){var n=e._transform.rescaleX(e._x),r=e._transform.rescaleY(e._y);t.clearRect(0,0,e._width,e._height),e._axesVisible&&e._axes.render(t,n,r),e._linkRenderers.forEach((function(e){e.render(t,n,r)})),e._linkLabelRenderers.forEach((function(e){e.render(t,n,r)})),e._nodeRenderers.forEach((function(e){e.render(t,n,r)})),e._nodeLabelRenderers.forEach((function(e){e.render(t,n,r)}))}))}},{key:"_setDimensions",value:function(e,t){this._canvas&&(this._canvas.setAttribute("width",e.toString()),this._canvas.setAttribute("height",t.toString()),this._width=e,this._height=t,this._x.domain([-e/2,e/2]).range([0,e]),this._y.domain([t/2,-t/2]).range([0,t]))}},{key:"_setTransform",value:function(e){this._transform=e,this._dragManager&&this._dragManager.setTransform(e),this._hoverManager&&this._hoverManager.setTransform(e)}},{key:"_updateDragManager",value:function(){this._dragManager&&this._dragManager.setShapes(this._nodeRenderers)}},{key:"_updateHoverManager",value:function(){this._hoverManager&&this._hoverManager.setData(this._edgeManager.getRouter().getLinkMap())}},{key:"_zoomed",value:function(){this._setTransform(qe.transform),this._render()}}]),e}(),gs=function(e){function t(){return f(this,t),s(this,c(t).apply(this,arguments))}return l(t,e),u(t,[{key:"apply",value:function(e){for(var t=e.boundingBox(),n=(t[1]+t[3])/2,r=(t[0]+t[2])/2,i=.8*Math.abs(t[1]-t[3]),o=.8*Math.abs(t[0]-t[2]),a=e.nodes(),u=i/o,s=0,c=0;s*c<a.length;)c/s<u?++c:++s;var l=r+o/2,f=n-i/2,h=i/c,d=o/s,p=0,v=0;a.forEach((function(e){e.x=f+v*h,e.y=l-p*d,v++===c&&(v=0,p++)}))}}]),t}(h),ms=function(e){function t(){var e;return f(this,t),(e=s(this,c(t).call(this)))._groups=[],e}return l(t,e),u(t,[{key:"apply",value:function(e){var t=e.boundingBox(),n=(t[1]+t[3])/2,r=(t[0]+t[2])/2,o=.8*Math.abs(t[1]-t[3]),a=.8*Math.abs(t[0]-t[2]),u=[],s=new Map(e.nodes().map((function(e){return[e.id,e]})));this._groups.forEach((function(e){var t=e.map((function(e){var t=s.get(e);return s.delete(e),t})).filter(_u.isDefined);t.length&&u.push(t)})),u.push(Array.from(s.values()));var c=u.length||1,l=r+a/2,f=n-o/2,h=o/Math.max.apply(Math,i(u.map((function(e){return e.length})))),d=a/(c-1||1);u.forEach((function(e,t){var n=l-t*d;e.forEach((function(e,t){e.x=f+h*t,e.y=n}))}))}},{key:"groups",value:function(e){return this._groups=e,this}}]),t}(h);n.d(t,"CircleLayout",(function(){return d})),n.d(t,"DagreLayout",(function(){return O})),n.d(t,"Graph",(function(){return vs})),n.d(t,"GridLayout",(function(){return gs})),n.d(t,"RowLayout",(function(){return ms})),n.d(t,"cloneLabelStyle",(function(){return Ru})),n.d(t,"cloneLinkStyle",(function(){return Fu})),n.d(t,"cloneShapeStyle",(function(){return y})),n.d(t,"convertToShape",(function(){return _})),n.d(t,"isCircleStyle",(function(){return b})),n.d(t,"isRectangleStyle",(function(){return w}))}])},418:function(e,t,n){},419:function(e,t,n){"use strict";n.r(t);var r,i=n(37),o=n(0),a=n.n(o),u=n(27),s=n.n(u),c=n(12),l=n(5),f=n(7),h=n(8),d=n(10),p=n(6);!function(e){e.Atom="atom",e.Field="field",e.Signature="signature",e.Skolem="skolem",e.Tuple="tuple"}(r||(r={}));var v,g=function(){function e(t){Object(l.a)(this,e),this._name=t}return Object(p.a)(e,[{key:"name",value:function(){return this._name}}]),e}(),m=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e)))._skolems=[],n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"skolems",value:function(){return this._skolems.slice()}}],[{key:"addSkolem",value:function(e,t){e._skolems.push(t)}}]),t}(g),y=function(e){function t(e,n,r){var i;return Object(l.a)(this,t),(i=Object(f.a)(this,Object(h.a)(t).call(this,"{".concat(n.map((function(e){return e.name()})).join("->"),"}"))))._id=e,i._atoms=n,i._attributes=r||{},i}return Object(d.a)(t,e),Object(p.a)(t,[{key:"arity",value:function(){return this._atoms.length}},{key:"atoms",value:function(){return this._atoms.slice()}},{key:"attributes",value:function(){return this._attributes}},{key:"equals",value:function(e){var t=e.atoms();return this.arity()===e.arity()&&this.atoms().map((function(e,n){return t[n]===e})).reduce((function(e,t){return e&&t}),!0)}},{key:"expressionType",value:function(){return r.Tuple}},{key:"id",value:function(){return this._id}},{key:"size",value:function(){return 1}},{key:"toString",value:function(){return this.name()}},{key:"types",value:function(){return this._atoms.map((function(e){return e.type()}))}}],[{key:"buildFieldTuple",value:function(e,n){var r=t._getTupleAtoms(e,n),i=n[0].id()+"<:"+r.map((function(e){return e.name()})).join("->"),o=t._getTupleAttributes(e);return new t(i,r,o)}},{key:"buildSkolemTuple",value:function(e,n,r){var i=t._getTupleAtoms(n,r),o=e+"<:"+i.map((function(e){return e.name()})).join("->"),a=t._getTupleAttributes(n);return new t(o,i,a)}},{key:"_getTupleAtoms",value:function(e,t){var n=Array.from(e.querySelectorAll("atom")).map((function(e){return e.getAttribute("label")}));if(n.includes(null))throw Error("Atom has no label attribute");var r=n.map((function(e,n){return t[n].findAtom(e)}));if(r.includes(null))throw Error("Unable to find all atoms in tuple");return r}},{key:"_getTupleAttributes",value:function(e){var t={};return e.getAttributeNames().forEach((function(n){t[n]=e.getAttribute(n)})),t}}]),t}(m),_=function(e){function t(e,n){var r;return Object(l.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,n)))._type=e,r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"expressionType",value:function(){return r.Atom}},{key:"id",value:function(){return this._type.id()+":"+this.name()}},{key:"isType",value:function(e){return this.typeHierarchy().includes(e)}},{key:"join",value:function(e){var t=this,n=e.tuples().filter((function(e){return e.atoms()[0]===t})).map((function(e){return new y("",e.atoms().slice(1))})),r={};return n.filter((function(e){return!r.hasOwnProperty(e.name())&&(r[e.name()]=!0)}))}},{key:"size",value:function(){return 1}},{key:"toString",value:function(){return this.name()}},{key:"type",value:function(){return this._type}},{key:"typeHierarchy",value:function(){return this._type.typeHierarchy()}}]),t}(m),b=function(e){function t(e,n,r,i,o){var a;if(Object(l.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e)))._types=n,a._tuples=r,a._is_meta=i||!1,a._is_private=o||!1,n.length<2)throw Error("Field ".concat(e," has arity less than two."));return r.forEach((function(e){e.atoms().forEach((function(t,r){if(!t.isType(n[r]))throw Error("Tuple ".concat(e," has incorrect types."))}))})),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"arity",value:function(){return this._types.length}},{key:"expressionType",value:function(){return r.Field}},{key:"id",value:function(){return this._types[0].name()+"<:"+this.name()}},{key:"is_meta",value:function(){return this._is_meta}},{key:"is_private",value:function(){return this._is_private}},{key:"join",value:function(e){var t=this.arity(),n=this.types()[t-1];if("string"===typeof e)if(n.name()===e||n.name()==="this/"+e)e=n;else{var r=n.atoms(!0).find((function(t){return t.name()===e}));r&&(e=r)}if("string"===typeof e)return[];if("signature"===e.expressionType()){if(n!==e)return[];var i=this.tuples().map((function(e){return new y("",e.atoms().slice(0,-1))})),o={};return i.filter((function(e){return!o.hasOwnProperty(e.name())&&(o[e.name()]=!0)}))}var a=this.tuples().filter((function(t){var n=t.atoms();return n[n.length-1]===e})).map((function(e){return new y("",e.atoms().slice(0,-1))})),u={};return a.filter((function(e){return!u.hasOwnProperty(e.name())&&(u[e.name()]=!0)}))}},{key:"parent",value:function(){return this._types[0]}},{key:"size",value:function(){return this._tuples.length}},{key:"toString",value:function(){return this.name()}},{key:"tuples",value:function(e){return e?this._tuples.slice():this._tuples.slice().filter((function(e){return"false"!==e.attributes().LN}))}},{key:"types",value:function(){return this._types.slice()}}],[{key:"buildFields",value:function(e,n){var r=new Map;return e.map((function(e){return t._buildField(e,n)})).forEach((function(e){return r.set(e.id,e.field)})),r}},{key:"_buildField",value:function(e,n){var r=e.getAttribute("ID"),i=e.getAttribute("parentID"),o=e.getAttribute("label"),a=e.querySelector("types"),u="yes"===e.getAttribute("meta"),s="yes"===e.getAttribute("private");if(!r)throw Error("Field has no ID attribute");if(!i)throw Error("Field has no parentID attribute");if(!o)throw Error("Field has no label attribute");if(!a)throw Error("Field has no types");if(!n.get(parseInt(i)))throw Error("Field parent type has not been created");var c=Array.from(a.querySelectorAll("type")).map((function(e){return e.getAttribute("ID")}));if(c.includes(null))throw Error("Undefined type in field");var l=c.map((function(e){return n.get(parseInt(e))}));if(l.includes(void 0))throw Error("A field type has not been created");var f=Array.from(e.querySelectorAll("tuple")).map((function(e){return y.buildFieldTuple(e,l)})),h=new t(o,l,f,u,s);return{id:parseInt(r),field:h}}}]),t}(g);!function(e){function t(e){var t=e.querySelector("type");if(!t)throw Error("Element is not a subset signature");var n=t.getAttribute("ID");if(!n)throw Error("Element is not a subset signature");return parseInt(n)}e.filterExcludeLabels=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=e.getAttribute("label");return!!n&&!t.includes(n)}},e.isSubset=function(e){return"sig"===e.tagName&&!!e.querySelector("type")},e.sortSubset=function(e,n){var r=e.getAttribute("ID"),i=n.getAttribute("ID"),o=t(e),a=t(n);if(!r||!i)throw Error("Element has no ID");return a===parseInt(r)?-1:o===parseInt(i)?1:0},e.subsetTypeID=t}(v||(v={}));var w,x,k,E,S=v.filterExcludeLabels,j=v.isSubset,M=v.sortSubset,O=v.subsetTypeID,A=function(e){function t(e,n,r,i,o,a){var u;return Object(l.a)(this,t),(u=Object(f.a)(this,Object(h.a)(t).call(this,e)))._type=null,u._subtypes=[],u._atoms=[],u._fields=[],u._is_builtin=n||!1,u._is_meta=r||!1,u._is_one=i||!1,u._is_private=o||!1,u._is_subset=a||!1,u}return Object(d.a)(t,e),Object(p.a)(t,[{key:"atom",value:function(e){return this._atoms.find((function(t){return t.name()===e}))||null}},{key:"atoms",value:function(e){return e?this.atoms().concat(this.subTypes(!0).reduce((function(e,t){return e.concat(t.atoms())}),[])):this._atoms.slice()}},{key:"depth",value:function(){return this.typeHierarchy().length-1}},{key:"each",value:function(e){var t,n,r,i,o=this,a=[o];do{for(t=a.reverse(),a=[];o=t.pop();)if(e(o),n=o.subTypes())for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this}},{key:"eachAfter",value:function(e){return this._subtypes.forEach((function(t){t.eachAfter(e)})),e(this),this}},{key:"eachBefore",value:function(e){return e(this),this._subtypes.forEach((function(t){t.eachBefore(e)})),this}},{key:"expressionType",value:function(){return r.Signature}},{key:"fields",value:function(){return this._fields.slice()}},{key:"findAtom",value:function(e){var t,n,r,i,o,a=this,u=[a];do{for(t=u.reverse(),u=[];a=t.pop();){if(o=a._atoms.find((function(t){return t.name()===e})))return o;if(n=a.subTypes())for(r=0,i=n.length;r<i;++r)u.push(n[r])}}while(u.length);return null}},{key:"id",value:function(){return this.name()}},{key:"isBuiltin",value:function(){return this._is_builtin}},{key:"isMeta",value:function(){return this._is_meta}},{key:"isOne",value:function(){return this._is_one}},{key:"isPrivate",value:function(){return this._is_private}},{key:"isSubset",value:function(){return this._is_subset}},{key:"join",value:function(e){var t=this,n=e.tuples().filter((function(e){return e.atoms()[0].isType(t)})).map((function(e){return new y("",e.atoms().slice(1))})),r={};return n.filter((function(e){return!r.hasOwnProperty(e.name())&&(r[e.name()]=!0)}))}},{key:"size",value:function(){return this.atoms().length}},{key:"subTypes",value:function(e){return e?this.subTypes().concat(this._subtypes.map((function(e){return e.subTypes(!0)})).reduce((function(e,t){return e.concat(t)}),[])):this._subtypes.slice()}},{key:"toString",value:function(){return this.name()}},{key:"typeHierarchy",value:function(){var e=this._type?this._type.typeHierarchy():[];return e.push(this),e}}],[{key:"assignFields",value:function(e){e.forEach((function(e){e.parent()._fields.push(e)}))}},{key:"buildSigs",value:function(e,n,r){var i=new Map,o=new Map,a=r.find((function(e){return"Int"===e.getAttribute("label")})),u=r.find((function(e){return"seq/Int"===e.getAttribute("label")}));if(!a)throw Error("No Int signature found in XML");if(!u)throw Error("No seq/Int signature found in XML");var s=t._buildInt(e,a),c=t._buildSeq(n,u,s.sig);return i.set(s.id,s.sig),i.set(c.id,c.sig),o.set(s.id,s.parentID),r.filter(S("Int","seq/Int")).filter((function(e){return!j(e)})).forEach((function(e){var n=t._buildSig(e);i.set(n.id,n.sig),n.parentID&&o.set(n.id,n.parentID)})),o.forEach((function(e,t){var n=i.get(e),r=i.get(t);if(!n||!r)throw Error("Error parsing parents");r._type=n,n._subtypes.push(r)})),r.filter((function(e){return j(e)})).sort(M).forEach((function(e){var n=t._buildSub(e,i);i.set(n.id,n.sig),n.parentID&&o.set(n.id,n.parentID)})),i}},{key:"_buildInt",value:function(e,n){if(!n)throw Error("Instance contains no Int element");if(e<1)throw Error("Invalid bitwidth ".concat(e));var r=n.getAttribute("ID"),i=n.getAttribute("parentID");if(!r)throw Error("Invalid Int element");if(!i)throw Error("Int is not part of the universe");for(var o=new t("Int",!0),a=Math.pow(2,e),u=-a/2;u<a/2;++u)o._atoms.push(new _(o,u.toString()));return{id:parseInt(r),parentID:parseInt(i),sig:o}}},{key:"_buildSeq",value:function(e,n,r){if(!n)throw Error("Instance contains no seq/Int element");var i=n.getAttribute("ID");if(!i)throw Error("Invalid seq/Int element");var o=new t("seq/Int",!0,!1,!1,!1,!0);o._type=r;for(var a=0;a<e;++a){var u=r.findAtom(a.toString());if(!u)throw Error("The maxseq value is invalid");o._atoms.push(u)}return{id:parseInt(i),sig:o}}},{key:"_buildSig",value:function(e){if(!e)throw Error("Signature element does not exist");var n=e.getAttribute("ID");if(!n)throw Error("Signature element has no ID attribute");var r=e.getAttribute("label");if(!r)throw Error("Signature element has no label attribute");var i=e.getAttribute("parentID"),o="yes"===e.getAttribute("builtin"),a="yes"===e.getAttribute("meta"),u="yes"===e.getAttribute("one"),s="yes"===e.getAttribute("private"),c=j(e);if(c)throw Error("Subset signature must be built using AlloySignature._buildSub()");var l=new t(r,o,a,u,s,c);return e.querySelectorAll("atom").forEach((function(e){var t=e.getAttribute("label");if(!t)throw Error("Atom does not have a label");l._atoms.push(new _(l,t))})),i?{id:parseInt(n),parentID:parseInt(i),sig:l}:{id:parseInt(n),sig:l}}},{key:"_buildSub",value:function(e,n){if(!e)throw Error("Signature element does not exist");var r=e.getAttribute("ID");if(!r)throw Error("Signature element has no ID attribute");var i=e.getAttribute("label");if(!i)throw Error("Signature element has no label attribute");var o=O(e),a="yes"===e.getAttribute("builtin"),u="yes"===e.getAttribute("meta"),s="yes"===e.getAttribute("one"),c="yes"===e.getAttribute("private"),l=j(e);if(!l)throw Error("Signatures must be built using AlloySignature._buildSig()");var f=n.get(o);if(!f)throw Error("Unable to find parent of subset signature");var h=new t(i,a,u,s,c,l);return e.querySelectorAll("atom").forEach((function(e){var t=e.getAttribute("label");if(!t)throw Error("Atom does not have a label");var n=f.findAtom(t);if(!n)throw Error("Parent signature does not contain atom ".concat(t));h._atoms.push(n)})),{id:parseInt(r),parentID:o,sig:h}}}]),t}(g),C=function(e){function t(e,n,r){var i;return Object(l.a)(this,t),(i=Object(f.a)(this,Object(h.a)(t).call(this,e)))._types=n,i._tuples=r,i}return Object(d.a)(t,e),Object(p.a)(t,[{key:"arity",value:function(){return this._types.length}},{key:"expressionType",value:function(){return r.Skolem}},{key:"id",value:function(){return this.name()}},{key:"size",value:function(){return this._tuples.length}},{key:"toString",value:function(){return this.name()}},{key:"tuples",value:function(){return this._tuples.slice()}},{key:"types",value:function(){return this._types.slice()}}],[{key:"buildSkolem",value:function(e,n,r){var i=new Map;return e.map((function(e){return t._buildSkolem(e,n,r)})).forEach((function(e){return i.set(e.id,e.skolem)})),i}},{key:"_buildSkolem",value:function(e,n,r){var i=e.getAttribute("ID"),o=e.getAttribute("label"),a=e.querySelector("types");if(!i)throw Error("Skolem has no ID attribute");if(!o)throw Error("Skolem has no label attribute");if(!a)throw Error("Skolem has no type(s)");var u=Array.from(a.querySelectorAll("type")).map((function(e){return e.getAttribute("ID")}));if(u.includes(null))throw Error("Undefined type in skolem");var s=u.map((function(e){return n.get(parseInt(e))}));if(s.includes(void 0))throw Error("A skolem type has not been created");var c=Array.from(e.querySelectorAll("tuple")).map((function(e){return y.buildSkolemTuple(o,e,s)})),l=new t(o,s,c);return 1===s.length?c.forEach((function(e){e.atoms().forEach((function(e){_.addSkolem(e,l)}))})):s.length>1&&Array.from(r.values()).forEach((function(e){e.tuples().forEach((function(e){c.find((function(t){return e.equals(t)}))&&y.addSkolem(e,l)}))})),{id:parseInt(i),skolem:l}}}]),t}(g),T=function(){function e(t,n){Object(l.a)(this,e),this._filename=t,this._source=n}return Object(p.a)(e,[{key:"filename",value:function(){return this._filename}},{key:"source",value:function(){return this._source}}],[{key:"fromElement",value:function(t){var n=t.getAttribute("filename"),r=t.getAttribute("content");if(!n)throw Error("No filename attribute in XML file");if(!r)throw Error("No source attribute in XML file");return new e(n,r)}}]),e}(),L=function(){function e(t){Object(l.a)(this,e),this._bitwidth=0,this._builddate=new Date(0),this._command="",this._filename="",this._maxseq=0,this._sources=[];var n=(new DOMParser).parseFromString(t,"application/xml");this._parseAlloyAttributes(n.querySelector("alloy")),this._parseInstanceAttributes(n.querySelector("instance")),this._parseSourceCode(Array.from(n.querySelectorAll("source")));var r=Array.from(n.querySelectorAll("sig")),i=Array.from(n.querySelectorAll("field")),o=Array.from(n.querySelectorAll("skolem")),a=A.buildSigs(this._bitwidth,this._maxseq,r),u=b.buildFields(i,a),s=C.buildSkolem(o,a,u);A.assignFields(Array.from(u.values())),this._signatures=Array.from(a.values()),this._fields=Array.from(u.values()),this._skolems=Array.from(s.values()),this._xml=new T("XML",t)}return Object(p.a)(e,[{key:"atoms",value:function(){return this.signatures().filter((function(e){return!e.isSubset()})).map((function(e){return e.atoms()})).reduce((function(e,t){return e.concat(t)}),[])}},{key:"bidwidth",value:function(){return this._bitwidth}},{key:"builddate",value:function(){return new Date(this._builddate.getTime())}},{key:"command",value:function(){return this._command}},{key:"field",value:function(e,t){var n=e.split(".");if(2===n.length){if(1!==arguments.length)throw Error("Do not use dot syntax and provide a signature");t=n[0],e=n[1]}else{if(1!==n.length)throw Error("Provided dot syntax is invalid");e=n[0]}var r=this.fields().filter((function(t){return t.name()===e}));if(0===r.length)return null;if(1===r.length)return r[0];if(!t){var i=r.map((function(t){return t.types()[0].name()+" <: "+e})).join("\n");throw Error("The name is ambiguous due to multiple matches:\n"+i)}var o="string"===typeof t?this.signature(t):t;return null===o?null:r.find((function(e){return e.types()[0]===o}))||null}},{key:"fields",value:function(){return this._fields.slice()}},{key:"filename",value:function(){return this._filename}},{key:"maxseq",value:function(){return this._maxseq}},{key:"signature",value:function(e){return this._signatures.find((function(t){return t.name()===e}))||this._signatures.find((function(t){return t.name()==="this/"+e}))||null}},{key:"signatures",value:function(){return this._signatures.slice()}},{key:"skolems",value:function(){return this._skolems.slice()}},{key:"sources",value:function(){return this._sources.slice()}},{key:"tuples",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?this.skolems().map((function(e){return e.tuples()})).reduce((function(e,t){return e.concat(t)}),[]):[],n=this.fields().map((function(e){return e.tuples()})).reduce((function(e,t){return e.concat(t)}),[]);return n.concat(t)}},{key:"univ",value:function(){return this._signatures.find((function(e){return"univ"===e.name()}))}},{key:"xml",value:function(){return this._xml}},{key:"_parseAlloyAttributes",value:function(e){if(!e)throw Error("Instance does not contain Alloy info");var t=e.getAttribute("builddate");if(!t)throw Error("Instance does not contain an Alloy build date");this._builddate=new Date(Date.parse(t))}},{key:"_parseInstanceAttributes",value:function(e){if(!e)throw Error("Instance does not contain attribute info");var t=e.getAttribute("bitwidth");if(!t)throw Error("Instance does not contain a bit width");this._setBitWidth(parseInt(t));var n=e.getAttribute("maxseq");if(!n)throw Error("Instance does not contain a max seq");this._setMaxSeq(parseInt(n));var r=e.getAttribute("command");if(!r)throw Error("Instance does not contain a command");this._setCommand(r);var i=e.getAttribute("filename");if(!i)throw Error("Instance does not contain a filename");this._setFilename(i)}},{key:"_parseSourceCode",value:function(e){this._sources=e.map((function(e){return T.fromElement(e)}))}},{key:"_setBitWidth",value:function(e){this._bitwidth=e}},{key:"_setCommand",value:function(e){this._command=e}},{key:"_setFilename",value:function(e){this._filename=e}},{key:"_setMaxSeq",value:function(e){this._maxseq=e}}]),e}();(x=w||(w={})).keepAtoms=function(e){return e.expressionType()===r.Atom},x.keepBuiltins=function(e){return e.expressionType()===r.Signature&&e.isBuiltin()},x.keepEmptys=function(e){return 0===e.size()},x.keepFields=function(e){return e.expressionType()===r.Field},x.keepSignatures=function(e){return e.expressionType()===r.Signature},x.keepSkolems=function(e){return e.expressionType()===r.Skolem},x.keepTuples=function(e){return e.expressionType()===r.Tuple},x.removeAtoms=function(e){return e.expressionType()!==r.Atom},x.removeBuiltins=function(e){return!(e.expressionType()===r.Signature&&e.isBuiltin())},x.removeEmptys=function(e){return e.size()>0},x.removeFields=function(e){return e.expressionType()!==r.Field},x.removeSignatures=function(e){return e.expressionType()!==r.Signature},x.removeSkolems=function(e){return e.expressionType()!==r.Skolem},x.removeTuples=function(e){return e.expressionType()!==r.Tuple},(E=k||(k={})).alphabeticalSort=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?1:-1;return e=e||function(e){return e.name()},function(t,r){var i=e(t),o=e(r);return i<o?-n:o<i?n:0}},E.builtinSort=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?1:-1;return function(e,n){var r="signature"===e.expressionType(),i="signature"===n.expressionType();if(r===i){if(!r)return 0;var o=e.isBuiltin();return o===n.isBuiltin()?0:o?t:-t}var a=r&&e.isBuiltin(),u=i&&n.isBuiltin();return a?t:u?-t:0}},E.groupSort=function(e){return e=e||[r.Signature,r.Atom,r.Field,r.Tuple,r.Skolem],function(t,n){return e.indexOf(t.expressionType())-e.indexOf(n.expressionType())}},E.sizeSort=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?1:-1;return function(e,n){return(e.size()-n.size())*t}};var N=function(){function e(){Object(l.a)(this,e),this._listeners=void 0}return Object(p.a)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t),this}},{key:"dispatchEvent",value:function(e){var t=this;if(void 0===this._listeners)return this;var n=this._listeners[e.type];void 0!==n&&(e.target=this,n.slice().forEach((function(n){n.call(t,e)})));return this}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0===this._listeners)return this;var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}return this}}]),e}(),I=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this)))._url=void 0,n._ws=void 0,n._auto_reconnect=void 0,n._auto_reconnect_interval=void 0,n._connected=void 0,n._heartbeat_count=void 0,n._heartbeat_id=void 0,n._heartbeat_interval=void 0,n._heartbeat_latency=void 0,n._heartbeat_timestamp=void 0,n._url=e,n._ws=null,n._auto_reconnect=!1,n._auto_reconnect_interval=5e3,n._connected=!1,n._heartbeat_count=0,n._heartbeat_id=0,n._heartbeat_interval=15e3,n._heartbeat_latency=0,n._heartbeat_timestamp=0,n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"connect",value:function(){this._ws&&(this._ws.onclose=null,this._ws.close()),this._initializeConnection()}},{key:"requestCurrentInstance",value:function(){return this._request("current")}},{key:"requestEvaluateExpression",value:function(e,t){return this._request("EVL:".concat(e,":").concat(t))}},{key:"requestNextInstance",value:function(){return this._request("next")}},{key:"_handleEval",value:function(e){this.dispatchEvent({type:"eval",data:e})}},{key:"_handlePong",value:function(){this._heartbeat_latency+=performance.now()-this._heartbeat_timestamp,this._heartbeat_count+=1}},{key:"_handleXML",value:function(e){if(e.length)try{console.log(e),this.dispatchEvent({type:"instance",instance:new L(e)})}catch(t){console.error(t),this.dispatchEvent({type:"error",message:"Invalid instance data"})}}},{key:"_initializeConnection",value:function(){this._ws=new WebSocket(this._url),this._ws.onopen=this._onOpen.bind(this),this._ws.onclose=this._onClose.bind(this),this._ws.onerror=this._onError.bind(this),this._ws.onmessage=this._onMessage.bind(this)}},{key:"_onClose",value:function(e){this._connected=!1,this._ws=null,this._auto_reconnect&&this._reconnect(),this.dispatchEvent({type:"disconnect"})}},{key:"_onError",value:function(e){this.dispatchEvent({type:"error"})}},{key:"_onMessage",value:function(e){this._resetHeartbeat();var t=e.data.slice(0,4),n=e.data.slice(4);switch(t){case"pong":this._handlePong();break;case"EVL:":this._handleEval(n);break;case"XML:":this._handleXML(n);break;default:this.dispatchEvent({type:"error",message:"Unknown response header: ".concat(t)})}}},{key:"_onOpen",value:function(e){this._connected=!0,this._resetHeartbeat(),this.dispatchEvent({type:"connect"})}},{key:"_ping",value:function(){this._ws&&(this._heartbeat_timestamp=performance.now(),this._ws.send("ping"))}},{key:"_reconnect",value:function(){window.setTimeout(this._initializeConnection.bind(this),this._auto_reconnect_interval)}},{key:"_request",value:function(e){return!(!this._connected||!this._ws)&&(this._ws.send(e),!0)}},{key:"_resetHeartbeat",value:function(){clearTimeout(this._heartbeat_id),this._heartbeat_id=window.setTimeout(this._ping.bind(this),this._heartbeat_interval)}}]),t}(N),R=function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(h.a)(t).call(this,"ws://"+window.location.hostname+":"+window.location.port+"/alloy"))}return Object(d.a)(t,e),t}(I),D=n(19),F=n(23),P=n(18),z=n(15),V=Object(F.a)({name:"sterling",initialState:{instance:null,mainView:"graph",tableView:null,graphView:null,scriptView:"projections",sourceView:"files",welcomeDescription:"Use Alloy to generate an instance.",welcomeTitle:"Welcome to Sterling"},reducers:{setGraphView:function(e,t){e.graphView=t.payload===e.graphView?null:t.payload},setInstance:function(e,t){e.instance=t.payload},setMainView:function(e,t){e.mainView=t.payload},setScriptView:function(e,t){e.scriptView=t.payload===e.scriptView?null:t.payload},setSourceView:function(e,t){e.sourceView=t.payload===e.sourceView?null:t.payload},setTableView:function(e,t){e.tableView=t.payload===e.tableView?null:t.payload}}}),U=V.actions,q=U.setGraphView,B=U.setInstance,W=U.setMainView,H=U.setScriptView,G=U.setSourceView,$=U.setTableView,Y=V.reducer,X={asAttribute:Object(z.b)(),atoms:Object(z.b)(),collapseProjections:!1,projections:Object(z.b)(),unprojected:Object(z.a)()},Z=Object(F.a)({name:"graphdata",initialState:X,reducers:{addProjection:function(e,t){var n=t.payload,r=e.atoms.get(n);if(r&&r.length){var i=r[0];e.projections=e.projections.set(n,i);var o=e.unprojected.indexOf(n);-1!==o&&(e.unprojected=e.unprojected.delete(o))}},nextAtom:function(e,t){var n=t.payload,r=e.projections.get(n),i=e.atoms.get(n);if(r&&i){var o=i.indexOf(r),a=o+1;-1!==o&&a<i.length&&(e.projections=e.projections.set(n,i[a]))}},previousAtom:function(e,t){var n=t.payload,r=e.projections.get(n),i=e.atoms.get(n);if(r&&i){var o=i.indexOf(r),a=o-1;-1!==o&&a>=0&&(e.projections=e.projections.set(n,i[a]))}},removeProjection:function(e,t){var n=t.payload;e.projections=e.projections.delete(n),e.unprojected=e.unprojected.push(n).sort(K)},setProjection:function(e,t){var n=t.payload,r=n.sig,i=n.atom;e.projections.has(r)&&e.projections.get(r)!==i&&(e.projections=e.projections.set(r,i))},toggleAsAttribute:function(e,t){var n=t.payload;if(n){var r=e.asAttribute.get(n);e.asAttribute=e.asAttribute.set(n,!r)}},toggleCollapseProjections:function(e){e.collapseProjections=!e.collapseProjections}},extraReducers:function(e){return e.addCase(B,(function(e,t){var n=t.payload;if(n){var r=n.signatures().find((function(e){return"univ"===e.id()}));if(r){var i=r.subTypes(),o=n.fields(),a=n.skolems().filter((function(e){return e.arity()>1})),u=[].concat(Object(P.a)(o),Object(P.a)(a));e.projections=Object(z.b)().withMutations((function(t){i.forEach((function(n){var r=e.projections.get(n.id());r&&n.findAtom(r)&&t.set(n.id(),r)}))})),e.asAttribute=Object(z.b)(u.map((function(t){var n=t.id();return e.asAttribute.has(n)?[n,e.asAttribute.get(n)]:[n,!1]}))),e.unprojected=Object(z.a)().withMutations((function(t){i.forEach((function(n){var r=n.id();n.atoms(!0).length&&!e.projections.has(r)&&t.push(r)}))})).sort(K),e.atoms=Object(z.b)(i.map((function(e){return[e.id(),e.atoms(!0).map((function(e){return e.name()}))]})))}else e.asAttribute=Object(z.b)(),e.atoms=Object(z.b)(),e.projections=Object(z.b)(),e.unprojected=Object(z.a)()}else e.atoms=Object(z.b)(),e.projections=Object(z.b)(),e.unprojected=Object(z.a)()}))}});function K(e,t){return e.localeCompare(t)}var Q=Z.actions,J=Q.addProjection,ee=Q.nextAtom,te=Q.previousAtom,ne=Q.removeProjection,re=Q.setProjection,ie=Q.toggleAsAttribute,oe=Q.toggleCollapseProjections,ae=Z.reducer,ue=n(434),se=n(424),ce=n(425),le=n(426),fe=n(427),he=n(428),de={preventOverflow:{enabled:!1},hide:{enabled:!1}},pe=[["Tableu",function(e){var t=e.length/6|0,n=new Array(t),r=0;for(;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab")],["Turbo",[0,1,2,4,5,6,7].map((function(e){return t=e/8,t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")";var t})).map((function(e){return ue.b(e).hex()}))],["Categorical",se.a.slice()],["Accent",ce.a.slice()],["Dark",le.a.slice()],["Pastel",fe.a.slice()],["Paired",he.a.slice()]],ve=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffc107","#ff9800","#ff5722","#795548","#607d8b","#333333","#777777","#bbbbbb","#ffffff"];function ge(e){if(e){var t=ue.a(e);return t?t.hex():void 0}}function me(e){if(!e.length)return"";var t=100/e.length,n=e.map((function(e,n){return"".concat(e," ").concat(n*t,"% ").concat((n+1)*t,"%")}));return"linear-gradient(to right, ".concat(n.join(","),")")}function ye(e){if(e){var t=ue.a(e);if(t){var n=t.rgb();return(299*n.r+587*n.g+114*n.b)/1e3>125?"#000000":"#ffffff"}}}var _e=n(431),be=function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,n="string"===typeof e.signature?e.signature:e.nameFunction?e.nameFunction(e.signature):e.signature.name();return o.createElement(_e.A,{className:t.className,fill:e.fill},n)}}]),t}(o.Component);be.className="sig-tag";var we=function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=("string"===typeof this.props.field?this.props.field:this.props.nameFunction?this.props.nameFunction(this.props.field):this.props.field.name()).split("<:");return o.createElement(_e.A,{className:t.className,fill:!0},t.FieldTagEls(e))}}],[{key:"FieldTagEls",value:function(e){return 2!==e.length?o.createElement(o.Fragment,null,e.join("")):o.createElement(o.Fragment,null,e[0],o.createElement(_e.k,{icon:"symbol-triangle-down",iconSize:14,style:{padding:"1px",transform:"rotate(90deg)"}}),e[1])}}]),t}(o.Component);we.className="field-tag";var xe=function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,n="string"===typeof e.skolem?e.skolem:e.nameFunction?e.nameFunction(e.skolem):e.skolem.name();return o.createElement(_e.A,{className:t.className,fill:!0},n)}}]),t}(o.Component);function ke(e,t){return{id:"Fields",children:(t?e.filter((function(e){return e.tuples().length})):e).map((function(e){return{id:e.id(),label:we.FieldTagEls(e.id().split("<:")),icon:"flows",children:[]}}))}}xe.className="skolem-tag";var Ee={collapsed:Object(z.b)({Fields:!1,Skolems:!1}),collapseEdgeStyle:!1,collapseScheme:!1,fields:[],hideEmptyFields:!0,labelStyles:Object(z.b)(),linkStyles:Object(z.b)(),selected:null,skolems:[],treeField:null,treeSkolem:null},Se=Object(F.a)({name:"edgestyles",initialState:Ee,reducers:{clearAll:function(e){e.labelStyles=e.labelStyles.map((function(){return{}})),e.linkStyles=e.linkStyles.map((function(){return{}}))},clearCurrent:function(e){e.selected&&(e.labelStyles=e.labelStyles.set(e.selected,{}),e.linkStyles=e.linkStyles.set(e.selected,{}))},collapseTreeNode:function(e,t){var n=t.payload;e.collapsed=e.collapsed.set(n,!0)},expandTreeNode:function(e,t){var n=t.payload;e.collapsed=e.collapsed.set(n,!1)},selectTreeNode:function(e,t){var n=t.payload;(e.linkStyles.has(n)||"Fields"===n||"Skolems"===n)&&(e.selected=n)},setColorScheme:function(e,t){var n=t.payload;n.length&&(e.linkStyles=e.linkStyles.withMutations((function(t){[].concat(Object(P.a)(e.fields),Object(P.a)(e.skolems)).forEach((function(r,i){var o=r.id(),a=n[i%n.length],u=e.linkStyles.get(o);if(u){var s=Object(D.cloneLinkStyle)(u);s.stroke=a,t.set(o,s)}}))})),e.labelStyles=e.labelStyles.withMutations((function(t){[].concat(Object(P.a)(e.fields),Object(P.a)(e.skolems)).forEach((function(r,i){var o=r.id(),a=n[i%n.length],u=e.labelStyles.get(o);if(u){var s=Object(D.cloneLabelStyle)(u);s.color=a,t.set(o,s)}}))})))},setLabelColor:function(e,t){if(e.selected){var n=e.labelStyles.get(e.selected);if(n){var r=t.payload,i=n?Object(D.cloneLabelStyle)(n):{};null===r?delete i.color:i.color=r,e.labelStyles=e.labelStyles.set(e.selected,i)}}},setLabelSize:function(e,t){if(e.selected){var n=e.labelStyles.get(e.selected);if(n){var r=parseInt(t.payload),i=n?Object(D.cloneLabelStyle)(n):{};isNaN(r)||0===r?delete i.font:i.font="".concat(r,"px sans-serif"),e.labelStyles=e.labelStyles.set(e.selected,i)}}},setStroke:function(e,t){if(e.selected){var n=e.linkStyles.get(e.selected);if(n){var r=t.payload,i=Object(D.cloneLinkStyle)(n);null===r?delete i.stroke:i.stroke=r,e.linkStyles=e.linkStyles.set(e.selected,i)}}},setStrokeWidth:function(e,t){if(e.selected){var n=e.linkStyles.get(e.selected);if(n){var r=parseInt(t.payload),i=Object(D.cloneLinkStyle)(n);isNaN(r)||0===r?delete i.strokeWidth:i.strokeWidth=r,e.linkStyles=e.linkStyles.set(e.selected,i)}}},toggleCollapseEdgeStyle:function(e){e.collapseEdgeStyle=!e.collapseEdgeStyle},toggleCollapseScheme:function(e){e.collapseScheme=!e.collapseScheme},toggleHideEmptyFields:function(e){e.hideEmptyFields=!e.hideEmptyFields,e.treeField=ke(e.fields,e.hideEmptyFields)}},extraReducers:function(e){return e.addCase(B,(function(e,t){var n=t.payload;if(n){var r=n.fields(),i=n.skolems().filter((function(e){return e.arity()>1})),o=[].concat(Object(P.a)(r),Object(P.a)(i));e.fields=r,e.skolems=i,e.treeField=ke(r,e.hideEmptyFields),e.treeSkolem=function(e){return{id:"Skolems",children:e.map((function(e){return{id:e.id(),icon:"flows",children:[]}}))}}(i),e.labelStyles=Object(z.b)(o.map((function(t){var n=t.id();return e.labelStyles.has(n)?[n,Object(D.cloneLabelStyle)(e.labelStyles.get(n))]:[n,{}]}))),e.linkStyles=Object(z.b)(o.map((function(t){var n=t.id();return e.linkStyles.has(n)?[n,Object(D.cloneLinkStyle)(e.linkStyles.get(n))]:[n,{}]}))),e.labelStyles.has("Fields")||(e.labelStyles=e.labelStyles.set("Fields",{})),e.labelStyles.has("Skolems")||(e.labelStyles=e.labelStyles.set("Skolems",{})),e.linkStyles.has("Fields")||(e.linkStyles=e.linkStyles.set("Fields",{strokeWidth:2})),e.linkStyles.has("Skolems")||(e.linkStyles=e.linkStyles.set("Skolems",{strokeWidth:2}));var a=pe[2][1].concat(pe[1][1]).concat(pe[0][1]),u=0;e.linkStyles=e.linkStyles.withMutations((function(t){[].concat(Object(P.a)(e.fields),Object(P.a)(e.skolems)).forEach((function(n){var r=n.id(),i=e.linkStyles.get(r);if(i&&!i.stroke&&n.tuples().length){var o=Object(D.cloneLinkStyle)(i);o.stroke=a[u%a.length],t.set(r,o),u+=1}}))})),u=0,e.labelStyles=e.labelStyles.withMutations((function(t){[].concat(Object(P.a)(e.fields),Object(P.a)(e.skolems)).forEach((function(n){var r=n.id(),i=e.labelStyles.get(r);if(i&&!i.color&&n.tuples().length){var o=Object(D.cloneLabelStyle)(i);o.color=a[u%a.length],t.set(r,o),u+=1}}))}))}else e.fields=[],e.labelStyles=Object(z.b)(),e.linkStyles=Object(z.b)(),e.selected=null,e.skolems=[],e.treeField=null,e.treeSkolem=null}))}}),je=Se.actions,Me=je.clearAll,Oe=je.clearCurrent,Ae=je.collapseTreeNode,Ce=je.expandTreeNode,Te=je.selectTreeNode,Le=je.setColorScheme,Ne=je.setLabelColor,Ie=je.setLabelSize,Re=je.setStroke,De=je.setStrokeWidth,Fe=je.toggleCollapseEdgeStyle,Pe=je.toggleCollapseScheme,ze=je.toggleHideEmptyFields,Ve=Se.reducer,Ue=Object(F.a)({name:"graphsettings",initialState:{axesVisible:!1,bundleFactor:.35,collapseEdgeSettings:!1,collapseGraphSettings:!1,gridVisible:!1,edgeLabelPlacement:"spread"},reducers:{setBundleFactor:function(e,t){var n=t.payload;n>=0&&(e.bundleFactor=n)},setLabelPlacement:function(e,t){e.edgeLabelPlacement=t.payload},toggleAxesVisible:function(e){e.axesVisible=!e.axesVisible},toggleCollapseEdgeSettings:function(e){e.collapseEdgeSettings=!e.collapseEdgeSettings},toggleCollapseGraphSettings:function(e){e.collapseGraphSettings=!e.collapseGraphSettings},toggleGridVisible:function(e){e.gridVisible=!e.gridVisible}}}),qe=Ue.actions,Be=qe.setBundleFactor,We=qe.setLabelPlacement,He=qe.toggleAxesVisible,Ge=qe.toggleCollapseEdgeSettings,$e=qe.toggleCollapseGraphSettings,Ye=qe.toggleGridVisible,Xe=Ue.reducer,Ze={align:void 0,collapseLayout:!1,collapseQuickLayout:!1,collapseZoom:!1,nodesep:100,rankdir:"BT",ranker:"network-simplex",ranksep:200},Ke=Object(F.a)({name:"layout",initialState:Ze,reducers:{setAlign:function(e,t){e.align=t.payload},setNodeSep:function(e,t){e.nodesep=t.payload},setRankDir:function(e,t){e.rankdir=t.payload},setRanker:function(e,t){e.ranker=t.payload},setRankSep:function(e,t){e.ranksep=t.payload},toggleCollapseLayout:function(e){e.collapseLayout=!e.collapseLayout},toggleCollapseQuickLayout:function(e){e.collapseQuickLayout=!e.collapseQuickLayout},toggleCollapseZoom:function(e){e.collapseZoom=!e.collapseZoom}}}),Qe=Ke.actions,Je=Qe.setAlign,et=Qe.setNodeSep,tt=Qe.setRankDir,nt=Qe.setRanker,rt=Qe.setRankSep,it=Qe.toggleCollapseLayout,ot=Qe.toggleCollapseQuickLayout,at=Qe.toggleCollapseZoom,ut=Ke.reducer;function st(e,t){if(!e)return null;return function e(n){var r=(t?n.subTypes().filter((function(e){return e.atoms().length||e.subTypes().length})):n.subTypes()).map(e);return{id:n.id(),icon:"group-objects",children:r}}(e)}var ct={collapsed:Object(z.b)(),collapseNodeStyle:!1,collapseScheme:!1,hideDisconnected:Object(z.b)(),hideEmptySets:!0,labels:Object(z.b)(),nodeTree:null,selected:null,shapes:Object(z.b)(),signatures:[],univ:null},lt=Object(F.a)({name:"nodestyles",initialState:ct,reducers:{clearAll:function(e){e.labels=e.labels.map((function(){return{}})),e.shapes=e.shapes.map((function(){return{}}))},clearCurrent:function(e){e.selected&&(e.labels=e.labels.set(e.selected,{}),e.shapes=e.shapes.set(e.selected,{}))},collapseTreeNode:function(e,t){var n=t.payload;e.collapsed=e.collapsed.set(n,!0)},expandTreeNode:function(e,t){var n=t.payload;e.collapsed=e.collapsed.set(n,!1)},selectTreeNode:function(e,t){var n=t.payload;e.shapes.has(n)&&(e.selected=n)},setColorScheme:function(e,t){var n=t.payload;n.length&&(e.shapes=e.shapes.withMutations((function(t){var r=0;e.signatures.forEach((function(i){var o=i.id(),a=e.shapes.get(o);if(a&&i.atoms().length){var u=Object(D.cloneShapeStyle)(a);u.fill=n[r++%n.length],t.set(o,u)}}))})),e.labels=e.labels.withMutations((function(t){e.signatures.forEach((function(n){var r=n.id(),i=e.shapes.get(r),o=e.labels.get(r);if(o&&i&&i.fill){var a=Object(D.cloneLabelStyle)(o);a.color=ye(i.fill),t.set(r,a)}}))})))},setFill:function(e,t){if(e.selected){var n=e.shapes.get(e.selected);if(n){var r=t.payload,i=n?Object(D.cloneShapeStyle)(n):{};null===r?delete i.fill:i.fill=r,e.shapes=e.shapes.set(e.selected,i)}}},setHeight:function(e,t){if(e.selected){var n=e.shapes.get(e.selected);if(n&&"rectangle"===n.type){var r=parseInt(t.payload),i=Object(D.cloneShapeStyle)(n);isNaN(r)||0===r?delete i.height:i.height=r,e.shapes=e.shapes.set(e.selected,i)}}},setLabelColor:function(e,t){if(e.selected){var n=e.labels.get(e.selected);if(n){var r=t.payload,i=n?Object(D.cloneLabelStyle)(n):{};null===r?delete i.color:i.color=r,e.labels=e.labels.set(e.selected,i)}}},setLabelSize:function(e,t){if(e.selected){var n=e.labels.get(e.selected);if(n){var r=n?Object(D.cloneLabelStyle)(n):{},i=parseInt(t.payload);isNaN(i)||0===i?delete r.font:r.font="".concat(i,"px sans-serif"),e.labels=e.labels.set(e.selected,r)}}},setRadius:function(e,t){if(e.selected){var n=e.shapes.get(e.selected);if(n&&"circle"===n.type){var r=parseInt(t.payload),i=Object(D.cloneShapeStyle)(n);isNaN(r)||0===r?delete i.radius:i.radius=r,e.shapes=e.shapes.set(e.selected,i)}}},setShape:function(e,t){if(e.selected){var n=e.shapes.get(e.selected),r=t.payload;if(void 0===n)return;if(n&&n.type!==r||n!==r){var i=Object(D.convertToShape)(n,r);e.shapes=e.shapes.set(e.selected,i)}}},setStroke:function(e,t){if(e.selected){var n=e.shapes.get(e.selected);if(n){var r=t.payload,i=Object(D.cloneShapeStyle)(n);null===r?delete i.stroke:i.stroke=r,e.shapes=e.shapes.set(e.selected,i)}}},setStrokeWidth:function(e,t){if(e.selected){var n=e.shapes.get(e.selected);if(n){var r=parseInt(t.payload),i=Object(D.cloneShapeStyle)(n);isNaN(r)||-1===r?delete i.strokeWidth:i.strokeWidth=r,e.shapes=e.shapes.set(e.selected,i)}}},setWidth:function(e,t){if(e.selected){var n=e.shapes.get(e.selected);if(n&&"rectangle"===n.type){var r=parseInt(t.payload),i=Object(D.cloneShapeStyle)(n);isNaN(r)||0===r?delete i.width:i.width=r,e.shapes=e.shapes.set(e.selected,i)}}},toggleCollapseNodeStyle:function(e){e.collapseNodeStyle=!e.collapseNodeStyle},toggleCollapseScheme:function(e){e.collapseScheme=!e.collapseScheme},toggleHideDisconnected:function(e){var t=e.selected;if(t){var n=!e.hideDisconnected.get(t);e.hideDisconnected=e.hideDisconnected.set(t,n)}},toggleHideEmptySets:function(e){e.hideEmptySets=!e.hideEmptySets,e.nodeTree=st(e.univ,e.hideEmptySets)}},extraReducers:function(e){return e.addCase(B,(function(e,t){var n=t.payload;if(null!==n){var r=n.signatures(),i=r.find((function(e){return"univ"===e.id()}))||null;e.signatures=r,e.univ=i,e.nodeTree=st(i,e.hideEmptySets),e.collapsed=Object(z.b)(r.map((function(t){var n=t.id();return e.collapsed.has(n)?[n,!!e.collapsed.get(n)]:[n,!1]}))),e.hideDisconnected=Object(z.b)(r.map((function(t){var n=t.id();return e.hideDisconnected.has(n)?[n,!!e.hideDisconnected.get(n)]:[n,!0]}))),e.labels=Object(z.b)(r.map((function(t){var n=t.id();return e.labels.has(n)?[n,Object(D.cloneLabelStyle)(e.labels.get(n))]:[n,{}]}))),e.shapes=Object(z.b)(r.map((function(t){var n=t.id();return e.shapes.has(n)?[n,Object(D.cloneShapeStyle)(e.shapes.get(n))]:[n,{}]}))),e.shapes=e.shapes.withMutations((function(t){r.forEach((function(n){var r=n.id(),i=e.shapes.get(r);if(i&&!i.fill){var o=Object(D.cloneShapeStyle)(i);o.fill="#ecd12e",t.set(r,o)}}))})),e.labels=e.labels.withMutations((function(t){r.forEach((function(n){var r=n.id(),i=e.shapes.get(r),o=e.labels.get(r);if(o&&i&&i.fill){var a=Object(D.cloneLabelStyle)(o);a.color=ye(i.fill),t.set(r,a)}}))})),e.selected&&!e.shapes.has(e.selected)&&(e.selected=null)}else e.collapsed=Object(z.b)(),e.hideDisconnected=Object(z.b)(),e.labels=Object(z.b)(),e.nodeTree=null,e.shapes=Object(z.b)(),e.selected=null,e.univ=null}))}}),ft=lt.actions,ht=ft.clearAll,dt=ft.clearCurrent,pt=ft.collapseTreeNode,vt=ft.expandTreeNode,gt=ft.selectTreeNode,mt=ft.setColorScheme,yt=ft.setFill,_t=ft.setHeight,bt=ft.setLabelColor,wt=ft.setLabelSize,xt=ft.setRadius,kt=ft.setShape,Et=ft.setStroke,St=ft.setStrokeWidth,jt=ft.setWidth,Mt=ft.toggleCollapseNodeStyle,Ot=ft.toggleCollapseScheme,At=ft.toggleHideDisconnected,Ct=ft.toggleHideEmptySets,Tt=lt.reducer,Lt={graph:new D.Graph},Nt=Object(F.a)({name:"graph",initialState:Lt,reducers:{}}),It=Object(i.combineReducers)({dataSlice:ae,edgeStylingSlice:Ve,graphSlice:Nt.reducer,graphSettingsSlice:Xe,layoutSlice:ut,nodeStylingSlice:Tt}),Rt=n(30),Dt=function(){function e(){Object(l.a)(this,e)}return Object(p.a)(e,null,[{key:"error",value:function(e,t){return Error("[".concat(e,"] ").concat(t))}},{key:"missingAttribute",value:function(e,t){return Error("[".concat(e,"] Missing attribute: ").concat(t))}},{key:"missingElement",value:function(e,t){return Error("[".concat(e,"] Missing element: <").concat(t,">"))}}]),e}(),Ft=n(29),Pt=function(){function e(t){Object(l.a)(this,e),this._tuples=void 0,this._tuples=t||[]}return Object(p.a)(e,[{key:"empty",value:function(){return 0===this._tuples.length}},{key:"equals",value:function(e){return this.toString()===e.toString()}},{key:"in",value:function(e){var t=new Set(e.tuples().map((function(e){return e.toString()})));return this.tuples().every((function(e){return t.has(e.toString())}))}},{key:"join",value:function(t){if(!this.tuples().length||!t.tuples().length)return new e;var n=function(e,t){var n=new Map;return t.forEach((function(t){var r=t.atoms()[e];n.has(r)||n.set(r,[]),n.get(r).push(t)})),n}(0,t.tuples()),r=[],i=this._tuples[0].atoms().length-1;return this.tuples().forEach((function(e){var t=e.atoms()[i],o=n.get(t);o&&o.forEach((function(t){var n,i=(n=e.atoms().slice(0,-1)).concat.apply(n,Object(P.a)(t.atoms().slice(1)));r.push(new zt(i))}))})),new e(function(e){var t=new Set;return e.filter((function(e){var n=e.atoms().map((function(e){return e.id()})).join();return!t.has(n)&&(t.add(n),!0)}))}(r))}},{key:"toString",value:function(){return this._tuples.map((function(e){return e.toString()})).join("\n")}},{key:"tuples",value:function(){return this._tuples.slice()}}]),e}(),zt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this)))._atoms=void 0,n._tuples=[Object(Ft.a)(n)],n._atoms=e,n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"atoms",value:function(){return this._atoms.slice()}},{key:"toString",value:function(){return this._atoms.map((function(e){return e.id()})).join(", ")}}],[{key:"tuplesFromXML",value:function(e,n){return Array.from(e).map((function(e){return new t(Array.from(e.querySelectorAll("atom")).map((function(e,t){var r=n[t],i=e.getAttribute("label");if(!i)throw Dt.missingAttribute("AlloyField","label");var o=r.atom(i);if(!o)throw Dt.error("AlloyField","No atom: ".concat(i));return o})))}))}}]),t}(Pt);var Vt=function(e){function t(e,n){var r;Object(l.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this)))._id=void 0;var i=n?n.applyProxy(Object(Ft.a)(r),function(e){return e.replace("/","$").replace("-","$")}(e)):Object(Ft.a)(r);return r._id=e,r._tuples=[new zt([i])],Object(f.a)(r,i)}return Object(d.a)(t,e),Object(p.a)(t,[{key:"clone",value:function(e){return new t(this.id(),e)}},{key:"id",value:function(){return this._id}}],[{key:"fromElement",value:function(e,n){var r=e.getAttribute("label");if(!r)throw Dt.missingAttribute("AlloyAtom","label");return new t(r,n)}}]),t}(Pt);var Ut=function(e){function t(e,n,r){var i;return Object(l.a)(this,t),(i=Object(f.a)(this,Object(h.a)(t).call(this)))._id=void 0,i._atoms=void 0,i._subsignatures=void 0,i._id=e,i._atoms=n,i._subsignatures=[],i._tuples=n.map((function(e){return new zt([e])})),Object(f.a)(i,r?r.applyProxy(Object(Ft.a)(i),function(e){return e.replace(/^this\//,"").replace("/","$").replace("-","$")}(e)):Object(Ft.a)(i))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"atom",value:function(e){return this.atoms(!0).find((function(t){return t.id()===e}))||null}},{key:"atoms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?this.atoms().concat(this.subSignatures().map((function(e){return e.atoms(!0)})).reduce((function(e,t){return e.concat(t)}),[])):this._atoms.slice()}},{key:"clone",value:function(e){var n=new t(this.id(),this.atoms().map((function(t){return t.clone(e)})),e);return n._subsignatures=this.subSignatures().map((function(t){return t.clone(e)})),n}},{key:"id",value:function(){return this._id}},{key:"subSignatures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?this.subSignatures().concat(this.subSignatures().map((function(e){return e.subSignatures(!0)})).reduce((function(e,t){return e.concat(t)}),[])):this._subsignatures.slice()}}],[{key:"fromElement",value:function(e,n){var r=e.getAttribute("label");if(!r)throw Dt.missingAttribute("AlloySignature","label");return new t(r,Array.from(e.querySelectorAll("atom")).map((function(e){return Vt.fromElement(e,n)})),n)}},{key:"intSignature",value:function(e,n){if(e<0)throw Dt.error("AlloySignature","Invalid bitwidth");for(var r=[],i=Math.pow(2,e),o=-i/2;o<i/2;++o){var a=new Vt(o.toString(),n);r.push(a)}return new t("Int",r,n)}},{key:"seqIntSignature",value:function(e,n){return new t("seq/Int",e.atoms(),n)}},{key:"signaturesFromXML",value:function(e,n){var r=+(e.getAttribute("bitwidth")||-1),i=t.intSignature(r,n),o=Array.from(e.querySelectorAll("sig")),a=new Map,u=new Map;return o.map((function(e){var r=e.getAttribute("ID"),o=e.getAttribute("parentID"),s=e.getAttribute("label");if(!r)throw Dt.missingAttribute("AlloySignature","ID");if(!o&&"univ"!==s)throw Dt.missingAttribute("AlloySignature","parentID");var c="Int"===s||"seq/Int"===s?i:t.fromElement(e,n);return u.set(r,c),o&&"seq/Int"!==s&&(a.has(o)||a.set(o,[]),a.get(o).push(r)),c})),u.forEach((function(e,t){var n=a.get(t)||[];e._subsignatures=n.map((function(e){return u.get(e)})).filter(Rt.isDefined)})),u}},{key:"typesFromXML",value:function(e,t){var n=e.querySelector("types");if(!n)throw Dt.missingElement("AlloyField","types");return Array.from(n.querySelectorAll("type")).map((function(e){var n=e.getAttribute("ID");if(!n)throw Dt.missingAttribute("AlloyField","ID");var r=t.get(n);if(!r)throw Dt.error("Alloy Field","No signature with ID: ".concat(n));return r}))}}]),t}(Pt);var qt=function(e){function t(e,n){var r;return Object(l.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,n)))._types=void 0,r._types=e,r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"project",value:function(e){var t=this.types().map((function(t){return e.get(t)}));t.some(Rt.isDefined)&&(this._tuples=this.tuples().filter((function(e){return e.atoms().every((function(e,n){return void 0===t[n]||t[n]===e}))})).map((function(e){return new zt(e.atoms().filter((function(e,n){return void 0===t[n]})))})))}},{key:"types",value:function(){return this._types.slice()}}]),t}(Pt),Bt=function(e){function t(e,n,r,i,o){var a;return Object(l.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,n,r)))._id=void 0,a._id=e,Object(f.a)(a,i?i.applyProxy(Object(Ft.a)(a),o?function(e){return e.replace(/-/g,"$").replace("/","$")}(o):e):Object(Ft.a)(a))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"clone",value:function(e,n){var r=this.types().map((function(t){return e.find((function(e){return e.id()===t.id()}))}));if(!r.every(Rt.isDefined))throw Dt.error("AlloyField","Missing type, cannot clone field");var i=this.tuples().map((function(e){return new zt(e.atoms().map((function(e,t){var n=r[t].atom(e.id());if(!n)throw Dt.error("AlloyField","Missing atom, cannot clone field");return n})))}));if(n){var o=Reflect.get(this,"__var__");if(!o)throw Dt.error("AlloyField","Cannot use proxy to clone non-proxied field");return new t(this.id(),r,i,n,o)}return new t(this.id(),r,i)}},{key:"id",value:function(){return this._id}}],[{key:"fieldsFromXML",value:function(e,n,r){var i=Array.from(e.querySelectorAll("field")),o=new Map;return i.forEach((function(e){var t=e.getAttribute("label");if(!t)throw Dt.missingAttribute("AlloyField","label");o.set(t,(o.get(t)||0)+1)})),i.map((function(e){var i=e.getAttribute("label"),a=e.getAttribute("parentID"),u=Ut.typesFromXML(e,n);if(!i)throw Dt.missingAttribute("AlloyField","label");if(!a)throw Dt.missingAttribute("AlloyField","parentID");var s=o.get(i)||0,c=n.get(a);if(!c)throw Dt.error("AlloyField","Field parent type does not exist");var l,f,h=s>1?(l=i,f=c,"".concat(Reflect.get(f,"__var__"),"$").concat(l)):i;return new t(i,u,zt.tuplesFromXML(e.querySelectorAll("tuple"),u),r,h)}))}}]),t}(qt);var Wt=function(){function e(){Object(l.a)(this,e),this._sets=void 0,this._sets=new Map}return Object(p.a)(e,[{key:"applyProxy",value:function(e,t){var n=this._sets,r=t||"".concat(n.size),i=this._finalize.bind(this);if(n.has(r))throw Error("Cannot apply proxy, ID already exists: ".concat(r));var o=new Proxy(e,{get:function(e,t){if("symbol"===typeof t||t in e)return Reflect.get(e,t);if("number"!==typeof t&&isNaN(+t)){var r,o=t.match(/\[(.*)]/);if(o){var a=n.get(o[1]);if(!a)throw Dt.error("Join","No set ".concat(o[1]));r=a.join(e)}else{var u=n.get(t);if(!u)throw Dt.error("Join","No set ".concat(t));r=e.join(u)}return i(r)}var s=n.get("".concat(t));if(!s)throw Dt.error("Join","Integer atom does not exist: ".concat(t));return i(s.join(e))}});return Reflect.set(o,Symbol.toPrimitive,(function(){return"[".concat(r,"]")})),Reflect.set(o,"__var__",r),this._sets.set(r,o),o}},{key:"_finalize",value:function(e){if(1===e.tuples().length&&1===e.tuples()[0].atoms().length){var t=e.tuples()[0].atoms()[0];return this._sets.get(t.id())||this.applyProxy(t,t.id())}return this.applyProxy(e)}}]),e}(),Ht=function(e){function t(e,n,r,i){var o;return Object(l.a)(this,t),(o=Object(f.a)(this,Object(h.a)(t).call(this,n,r)))._id=void 0,o._id=e,Object(f.a)(o,i?i.applyProxy(Object(Ft.a)(o),function(e){return e.replace(/^\$this\//,"$").replace("/","$").replace(/'/g,"$")}(e)):Object(Ft.a)(o))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"clone",value:function(e,n){var r=this.types().map((function(t){return e.find((function(e){return e.id()===t.id()}))}));if(!r.every(Rt.isDefined))throw Dt.error("AlloySkolem","Missing type, cannot clone field");var i=this.tuples().map((function(e){return new zt(e.atoms().map((function(e,t){var n=r[t].atom(e.id());if(!n)throw Dt.error("AlloySkolem","Missing atom, cannot clone field");return n})))}));return new t(this.id(),r,i,n)}},{key:"id",value:function(){return this._id}}],[{key:"skolemsFromXML",value:function(e,n,r){return Array.from(e.querySelectorAll("skolem")).map((function(e){var i=e.getAttribute("label"),o=Ut.typesFromXML(e,n),a=zt.tuplesFromXML(e.querySelectorAll("tuple"),o);if(!i)throw Dt.missingAttribute("AlloySkolem","label");return new t(i,o,a,r)}))}}]),t}(qt);var Gt,$t=function(){function e(t){Object(l.a)(this,e),this._proxy=void 0,this._atoms=void 0,this._fields=void 0,this._signatures=void 0,this._skolems=void 0,this._projections=void 0,this._bitwidth=void 0,this._command=void 0,this._filename=void 0,this._sources=void 0,this._proxy=new Wt,this._atoms=[],this._fields=[],this._signatures=[],this._skolems=[],this._projections=new Map,this._bitwidth=0,this._command="",this._filename="",this._sources=new Map,t&&this._buildFromXML(t)}return Object(p.a)(e,[{key:"atom",value:function(e){return this._atoms.find((function(t){return t.id()===e}))||null}},{key:"atoms",value:function(){return this._atoms.slice()}},{key:"bitwidth",value:function(){return this._bitwidth}},{key:"clone",value:function(){var t=new Wt,n=this.univ();if(!n)throw Dt.error("AlloyInstance","Cannot clone an instance without univ signature");var r=n.clone(t),i=[r].concat(Object(P.a)(r.subSignatures(!0))),o=r.atoms(!0),a=this.fields().map((function(e){return e.clone(i,t)})),u=this.skolems().map((function(e){return e.clone(i,t)})),s=new e;return s._proxy=t,s._fields=a,s._signatures=i,s._atoms=o,s._skolems=u,s._bitwidth=this.bitwidth(),s._command=this.command(),s._filename=this.filename(),s}},{key:"command",value:function(){return this._command}},{key:"field",value:function(e){return this._fields.find((function(t){return t.id()===e}))||null}},{key:"fields",value:function(){return this._fields}},{key:"filename",value:function(){return this._filename}},{key:"project",value:function(e){var t=this.clone(),n=e.map((function(e){return t.atom(e.id())}));if(!n.every(Rt.isDefined))throw Dt.error("AlloyInstance","Error cloning instance");var r=t.univ();if(!r)throw Dt.error("AlloyInstance","No univ signature");var i=r.subSignatures(),o=new Map;return n.forEach((function(e){i.forEach((function(t){if(t.atoms(!0).includes(e)){if(o.has(t))throw Dt.error("AlloyInstance","Cannot project over multiple atoms from the same signature");o.set(t,e)}}))})),this._projections=o,t.fields().forEach((function(e){return e.project(o)})),t.skolems().forEach((function(e){return e.project(o)})),t}},{key:"projections",value:function(){return new Map(this._projections)}},{key:"signature",value:function(e){return this.signatures().find((function(t){return t.id()===e}))||null}},{key:"signatures",value:function(){return this._signatures.slice()}},{key:"skolem",value:function(e){return this.skolems().find((function(t){return t.id()===e}))||null}},{key:"skolems",value:function(){return this._skolems.slice()}},{key:"sources",value:function(){return new Map(this._sources)}},{key:"toCytoscape",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Set;this.fields().forEach((function(e){e.tuples().forEach((function(e){e.atoms().forEach((function(e){t.add(e.id())}))}))}));var n=[];if(e){var r=this.univ();r&&o(r)}else n=this.atoms().filter((function(e){return t.has(e.id())})).map((function(e){return{data:{id:e.id()}}}));var i=this.fields().map((function(e){return e.tuples().map((function(t){var n=t.atoms(),r=n[0],i=n[n.length-1],o=n.slice(1,-1);return{data:{id:e.id()+t.toString(),source:r.id(),target:i.id(),label:e.id()+(o.length?"[".concat(o.map((function(e){return e.id()})).join(","),"]"):"")}}}))})).reduce((function(e,t){return e.concat(t)}),[]);return{elements:{nodes:n,edges:i},style:[{selector:"node",style:{label:"data(id)"}},{selector:"edge",style:{label:"data(label)","curve-style":"bezier","target-arrow-shape":"triangle"}}]};function o(e,r){e.atoms(!0).some((function(e){return t.has(e.id())}))&&(n.push({data:{id:e.id(),parent:r?r.id():void 0}}),e.atoms().filter((function(e){return t.has(e.id())})).forEach((function(t){n.push({data:{id:t.id(),parent:e.id()}})})),e.subSignatures().forEach((function(t){return o(t,e)})))}}},{key:"univ",value:function(){return this._signatures.find((function(e){return"univ"===e.id()}))||null}},{key:"_buildFromXML",value:function(e){var t=this,n=(new DOMParser).parseFromString(e,"application/xml"),r=n.querySelector("instance");if(!r)throw Dt.missingElement("AlloyInstance","instance");var i=r.getAttribute("bitwidth"),o=r.getAttribute("command"),a=r.getAttribute("filename"),u=r.getAttribute("maxseq");if(!i)throw Dt.missingAttribute("AlloyInstance","bitwidth");if(!o)throw Dt.missingAttribute("AlloyInstance","command");if(!a)throw Dt.missingAttribute("AlloyInstance","filename");if(!u)throw Dt.missingAttribute("AlloyInstance","maxseq");if(+i<1)throw Dt.error("AlloyInstance","Invalid bitwidth ".concat(i));this._bitwidth=+i,this._command=o,this._filename=a,this._atoms=[],this._fields=[],this._signatures=[],this._skolems=[];var s=Ut.signaturesFromXML(r,this._proxy);this._signatures=Array.from(s.values()),this._fields=Bt.fieldsFromXML(r,s,this._proxy),this._skolems=Ht.skolemsFromXML(r,s,this._proxy),this._atoms=this._signatures.map((function(e){return e.atoms()})).reduce((function(e,t){return e.concat(t)}),[]),this._sources=new Map,Array.from(n.querySelectorAll("source")).forEach((function(e){var n=e.getAttribute("filename"),r=e.getAttribute("content");if(!n)throw Dt.missingAttribute("AlloyInstance","filename");if(!r)throw Dt.missingAttribute("AlloyInstance","content");t._sources.set(n,r)}))}}]),e}();!function(e){e.SUCCESS="success",e.PENDING="pending",e.ERROR="error"}(Gt||(Gt={}));var Yt={atoms:Object(z.b)(),autorun:!0,collapseInstanceVariables:!1,collapseLibraries:!1,collapseStageVariables:!1,height:null,instance:null,libraries:Object(z.a)(["d3","cytoscape","lodash"]),overlay:!0,projections:Object(z.b)(),stage:"svg",script:"",status:Gt.PENDING,unprojected:Object(z.a)(),width:null},Xt=Object(F.a)({name:"script",initialState:Yt,reducers:{addLibrary:function(e,t){e.libraries.includes(t.payload)||(e.libraries=e.libraries.push(t.payload))},addProjection:function(e,t){var n=t.payload,r=e.atoms.get(n);if(r&&r.length){var i=r[0];e.projections=e.projections.set(n,i);var o=e.unprojected.indexOf(n);-1!==o&&(e.unprojected=e.unprojected.delete(o))}},nextAtom:function(e,t){var n=t.payload,r=e.projections.get(n),i=e.atoms.get(n);if(r&&i){var o=i.indexOf(r),a=o+1;-1!==o&&a<i.length&&(e.projections=e.projections.set(n,i[a]))}},previousAtom:function(e,t){var n=t.payload,r=e.projections.get(n),i=e.atoms.get(n);if(r&&i){var o=i.indexOf(r),a=o-1;-1!==o&&a>=0&&(e.projections=e.projections.set(n,i[a]))}},removeLibrary:function(e,t){var n=e.libraries.indexOf(t.payload);n>-1&&(e.libraries=e.libraries.delete(n))},removeProjection:function(e,t){var n=t.payload;e.projections=e.projections.delete(n),e.unprojected=e.unprojected.push(n).sort(Zt)},setProjection:function(e,t){var n=t.payload,r=n.sig,i=n.atom;e.projections.has(r)&&e.projections.get(r)!==i&&(e.projections=e.projections.set(r,i))},setScript:function(e,t){e.script=t.payload},setSize:function(e,t){e.width=t.payload[0],e.height=t.payload[1]},setStage:function(e,t){t.payload!==e.stage&&(e.stage=t.payload,e.status=Gt.PENDING)},setStatus:function(e,t){e.status!==t.payload&&(e.status=t.payload)},setValue:function(e,t){e.script=t.payload},toggleAutorun:function(e){e.autorun=!e.autorun},toggleCollapseInstanceVariables:function(e){e.collapseInstanceVariables=!e.collapseInstanceVariables},toggleCollapseLibraries:function(e){e.collapseLibraries=!e.collapseLibraries},toggleCollapseStageVariables:function(e){e.collapseStageVariables=!e.collapseStageVariables}},extraReducers:function(e){e.addCase(B,(function(e,t){var n=t.payload?t.payload.xml():null;if(n){var r=new $t(n.source()),i=r.univ(),o=i?i.subSignatures():[];e.instance=r,e.projections=Object(z.b)().withMutations((function(t){o.forEach((function(n){var r=e.projections.get(n.id());r&&n.atoms(!0).find((function(e){return e.id()===r}))&&t.set(n.id(),r)}))})),e.unprojected=Object(z.a)().withMutations((function(t){o.forEach((function(n){var r=n.id();n.atoms(!0).length&&!e.projections.has(r)&&t.push(r)}))})),e.atoms=Object(z.b)(o.map((function(e){return[e.id(),e.atoms(!0).map((function(e){return e.id()}))]})))}else e.atoms=Object(z.b)(),e.instance=null,e.projections=Object(z.b)(),e.unprojected=Object(z.a)()}))}});function Zt(e,t){return e.localeCompare(t)}var Kt,Qt,Jt,en,tn,nn=Xt.actions,rn=nn.addLibrary,on=nn.addProjection,an=nn.removeLibrary,un=nn.nextAtom,sn=nn.previousAtom,cn=nn.removeProjection,ln=nn.setProjection,fn=nn.setScript,hn=nn.setSize,dn=nn.setStage,pn=nn.setStatus,vn=nn.setValue,gn=nn.toggleCollapseInstanceVariables,mn=nn.toggleCollapseLibraries,yn=nn.toggleCollapseStageVariables,_n=Xt.reducer,bn=Object(F.a)({name:"source",initialState:{selected:null},reducers:{setSelected:function(e,t){e.selected=t.payload}},extraReducers:function(e){return e.addCase(B,(function(e){e.selected=null}))}}),wn=bn.actions.setSelected,xn=bn.reducer;!function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(Kt||(Kt={})),function(e){e[e.Row=0]="Row",e[e.Column=1]="Column"}(Qt||(Qt={})),function(e){e[e.Ascending=0]="Ascending",e[e.Descending=1]="Descending"}(Jt||(Jt={})),function(e){e[e.Alphabetical=0]="Alphabetical",e[e.Builtin=1]="Builtin",e[e.Group=2]="Group",e[e.Size=3]="Size"}(en||(en={})),function(e){e[e.All=0]="All",e[e.Signatures=1]="Signatures",e[e.Fields=2]="Fields",e[e.Skolems=3]="Skolems",e[e.Select=4]="Select"}(tn||(tn={}));var kn=["#2965CC","#29A634","#D99E0B","#D13913","#8F398F","#00B3A4","#DB2C6F","#9BBF30","#96622D","#7157D9"];function En(e){return function(t){return e?t.id().replace(/^this\//,""):t.id()}}function Sn(e,t){return e.method===en.Size?k.sizeSort(e.direction===Jt.Ascending):e.method===en.Alphabetical?k.alphabeticalSort(t,e.direction===Jt.Ascending):e.method===en.Group?k.groupSort():function(){return 0}}var jn={alignment:Kt.Left,collapseData:!1,collapseLayout:!1,collapseTables:!1,data:[],dataSelected:[],highlightSkolems:!0,layoutDirection:Qt.Row,removeBuiltin:!0,removeEmpty:!0,removeThis:!0,primarySort:{method:en.Group,direction:Jt.Descending},secondarySort:{method:en.Size,direction:Jt.Descending},skolemColors:new Map,tablesType:tn.All},Mn=Object(F.a)({name:"table",initialState:jn,reducers:{clearSelectedData:function(e){e.dataSelected=[]},deselectData:function(e,t){var n=e.dataSelected.indexOf(t.payload);-1!==n&&e.dataSelected.splice(n,1),e.tablesType=tn.Select},selectData:function(e,t){e.dataSelected.includes(t.payload)||e.dataSelected.push(t.payload),e.tablesType=tn.Select},setAlignment:function(e,t){e.alignment=t.payload},setLayoutDirection:function(e,t){e.layoutDirection=t.payload},setSort:function(e,t){e.primarySort.method!==t.payload.method&&(e.secondarySort=e.primarySort),e.primarySort=t.payload},setTableTypes:function(e,t){e.tablesType=t.payload},toggleCollapseData:function(e){e.collapseData=!e.collapseData},toggleCollapseLayout:function(e){e.collapseLayout=!e.collapseLayout},toggleCollapseTables:function(e){e.collapseTables=!e.collapseTables},toggleHighlightSkolems:function(e){e.highlightSkolems=!e.highlightSkolems,e.highlightSkolems&&e.tablesType===tn.Skolems&&(e.tablesType=tn.All)},toggleRemoveBuiltin:function(e){e.removeBuiltin=!e.removeBuiltin},toggleRemoveEmpty:function(e){e.removeEmpty=!e.removeEmpty},toggleRemoveThis:function(e){e.removeThis=!e.removeThis}},extraReducers:function(e){return e.addCase(B,(function(e,t){var n=t.payload;if(n){var r=n.skolems();e.data=[].concat(Object(P.a)(n.signatures()),Object(P.a)(n.fields()),Object(P.a)(r)),e.skolemColors=new Map(r.map((function(e,t){return[e,kn[t%r.length]]}))),e.dataSelected=e.dataSelected.filter((function(t){return void 0!==e.data.find((function(e){return e.id()===t.id()}))}))}}))}}),On=Mn.actions,An=On.clearSelectedData,Cn=On.deselectData,Tn=On.selectData,Ln=On.setAlignment,Nn=On.setLayoutDirection,In=On.setSort,Rn=On.setTableTypes,Dn=On.toggleCollapseData,Fn=On.toggleCollapseLayout,Pn=On.toggleCollapseTables,zn=On.toggleHighlightSkolems,Vn=On.toggleRemoveBuiltin,Un=On.toggleRemoveEmpty,qn=On.toggleRemoveThis,Bn=Mn.reducer,Wn=Object(i.combineReducers)({graphSlice:It,scriptSlice:_n,sourceSlice:xn,sterlingSlice:Y,tableSlice:Bn}),Hn=n(21),Gn=n(433),$n=n(75),Yn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this)))._connection=void 0,n._expressions=void 0,n._pending=void 0,n._connection=e,n._expressions=[],n._pending=null,e.addEventListener("eval",(function(e){n._parse(e.data)})),n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"clear",value:function(){this._expressions=[]}},{key:"evaluate",value:function(e){this._request({id:t._nextid++,error:!1,expression:e,result:null})}},{key:"expressions",value:function(){return this._expressions}},{key:"_parse",value:function(e){var t=this._pending,n=e.match(/(-?\d+):(.*)/);if(null!==n){var r=parseInt(n[1]);if(t&&t.id===r){var i=n[2].trim();"ERR:"===i.slice(0,4)?(t.result=i.slice(4),t.error=!0):(t.result=i,t.error=!1),this._expressions.push(t),this._setPending(null)}}}},{key:"_request",value:function(e){this._setPending(e),this._connection.requestEvaluateExpression(e.id,e.expression)||this._parse("".concat(e.id,":ERR:Error: Not Connected"))}},{key:"_setPending",value:function(e){this._pending=e,null!==e?this.dispatchEvent({type:"pending"}):this.dispatchEvent({type:"ready"})}}]),t}(N);Yn._nextid=0;var Xn=n(45);var Zn=function(e){return a.a.createElement("table",{className:"bp3-html-table bp3-html-table-condensed bp3-html-table-striped .bp3-interactive"},a.a.createElement("tbody",null,function(e){if("{"===e[0]&&"}"===e[e.length-1]){return e.slice(1,-1).split(",").map((function(e){return e.split("->")}))}return[]}(e.result).map((function(e,t){return a.a.createElement("tr",{key:t},e.map((function(e,t){return a.a.createElement("td",{key:t},e)})))}))))};var Kn=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e)))._botRef=void 0,n._textRef=void 0,n._onDown=function(){var e=n._textRef.current;if(e&&e.selectionStart===e.value.length){var t=n.state.history<n.state.count?n.state.history+1:n.state.count;n.setState({history:t})}},n._onEnter=function(){var e=n._textRef.current;if(e){var t=e.value;e.value="",t.length&&n.props.evaluator.evaluate(t)}},n._onKeyDown=function(e){switch(e.key){case"Enter":e.preventDefault(),n._onEnter();break;case"ArrowUp":n._onUp();break;case"ArrowDown":n._onDown()}},n._onPending=function(){n._setActive(!1)},n._onReady=function(){n._setActive(!0);var e=n.props.evaluator.expressions();n.setState({count:e.length,expressions:e,history:e.length})},n._onUp=function(){var e=n._textRef.current;if(e&&0===e.selectionStart){var t=n.state.history>0?n.state.history-1:0;n.setState({history:t})}},n._scrollDown=function(){var e=n._botRef.current;e&&e.scrollIntoView()},n._setActive=function(e){var t=n._textRef.current;t&&(t.readOnly=!e)},n._setText=function(e){var t=n._textRef.current;t&&(t.value=e)};var r=e.evaluator;r.addEventListener("pending",n._onPending),r.addEventListener("ready",n._onReady),n._botRef=a.a.createRef(),n._textRef=a.a.createRef();var i=e.evaluator.expressions();return n.state={count:i.length,expressions:i,history:i.length,table:!1},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._scrollDown()}},{key:"componentDidUpdate",value:function(e,t){t.count!==this.state.count&&this._scrollDown()}},{key:"componentWillUnmount",value:function(){var e=this.props.evaluator;e.removeEventListener("pending",this._onPending),e.removeEventListener("ready",this._onReady)}},{key:"render",value:function(){var e=this,t=this.state,n=a.a.createElement(_e.k,{icon:"blank",iconSize:12}),r=a.a.createElement(_e.k,{icon:"cross",iconSize:12});return t.history<t.count?this._setText(t.expressions[t.history].expression):this._setText(""),a.a.createElement("div",{className:"evaluator"},a.a.createElement("div",{className:"evaluator-bar bp3-dark"},a.a.createElement(_e.E,{content:"Clear",hoverOpenDelay:500,intent:Xn.a.PRIMARY},a.a.createElement(_e.a,{small:!0,minimal:!0,icon:"clean",onClick:function(){e.props.evaluator.clear();var t=e.props.evaluator.expressions();e.setState({expressions:t,count:t.length,history:t.length})}})),a.a.createElement(_e.E,{content:t.table?"Display Text":"Display Tables",hoverOpenDelay:500,intent:Xn.a.PRIMARY},a.a.createElement(_e.a,{small:!0,minimal:!0,icon:t.table?"align-left":"th",onClick:function(){return e.setState({table:!t.table})}}))),a.a.createElement("div",{className:"evaluator-output"},t.expressions.length?t.expressions.map((function(e){return a.a.createElement(_e.c,{key:e.id,icon:e.error?r:n,title:e.expression,intent:e.error?Xn.a.DANGER:Xn.a.NONE},t.table&&function(e){var t=e.result;return!e.error&&"string"===typeof t&&t.length>0&&"{"===t[0]&&"}"===t[t.length-1]}(e)&&"string"===typeof e.result?a.a.createElement(Zn,{result:e.result}):e.result)})):a.a.createElement(_e.s,{title:"Evaluator",description:"The evaluator allows you to type in Alloy expressions and see their values. For example, 'univ' shows the list of atoms. Type an expression below and press Enter to evaluate (you can press the up and down arrow keys to recall old inputs).",icon:"console"}),a.a.createElement("div",{ref:this._botRef})),a.a.createElement("div",{className:"evaluator-input"},a.a.createElement("textarea",{autoComplete:"off",placeholder:"Enter an expression...",spellCheck:"false",onKeyDown:this._onKeyDown,ref:this._textRef})))}}]),t}(a.a.Component),Qn=function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"drawer"},this.props.children)}}]),t}(a.a.Component);Qn.Section=function(e){var t=e.collapsed?"expand-all":"collapse-all";return a.a.createElement("div",{className:"section ".concat(e.collapsed?"collapsed":""),style:e.style},!!e.title&&a.a.createElement("div",{className:"header"},a.a.createElement("div",{className:"title"},e.title.toUpperCase()),e.onToggle&&a.a.createElement(_e.a,{icon:t,minimal:!0,onClick:e.onToggle})),a.a.createElement(_e.e,{isOpen:!e.collapsed,keepChildrenMounted:!0},a.a.createElement("div",{className:"body"},e.children)))};var Jn=Qn,er=n(39),tr=function(e){return a.a.createElement(_e.b,{minimal:!0,style:{flexWrap:"wrap",maxHeight:"15px",overflow:"hidden"}},pe.map((function(t){var n=Object(er.a)(t,2),r=n[0],i=n[1];return a.a.createElement(_e.E,{content:r,key:r},a.a.createElement(_e.a,{minimal:!0,style:{background:me(i.slice(0,6)),margin:"0 5px",minWidth:"40px",minHeight:"15px"},onClick:function(){return e.onClick(i)}}))})))},nr={setColorScheme:Le,toggleCollapseScheme:Pe},rr=Object(c.b)((function(e){return{collapse:e.graphSlice.edgeStylingSlice.collapseScheme}}),nr)((function(e){return a.a.createElement(Jn.Section,{collapsed:e.collapse,onToggle:e.toggleCollapseScheme,title:"Quick Color Scheme"},a.a.createElement(tr,{onClick:e.setColorScheme}))})),ir=[{value:"center",label:"Center"},{value:"join",label:"Join"},{value:"spread",label:"Spread"}],or={setBundleFactor:Be,setLabelPlacement:We,toggleCollapseEdgeSettings:Ge},ar=Object(c.b)((function(e){return Object(Hn.a)({},e.graphSlice.graphSettingsSlice)}),or)((function(e){return a.a.createElement(Jn.Section,{collapsed:e.collapseEdgeSettings,onToggle:e.toggleCollapseEdgeSettings,title:"Edge Settings"},a.a.createElement(_e.h,{inline:!0,label:"Bundle Factor"},a.a.createElement(_e.t,{allowNumericCharactersOnly:!0,fill:!1,value:e.bundleFactor,min:0,minorStepSize:.001,stepSize:.01,majorStepSize:.1,onValueChange:function(t){return e.setBundleFactor(t)}})),a.a.createElement(_e.h,{inline:!0,label:"Label Placement"},a.a.createElement(_e.i,{minimal:!0,options:ir,value:e.edgeLabelPlacement,onChange:function(t){e.setLabelPlacement(t.target.value)}})))})),ur=[{value:"undefined",label:"---"},{value:"UL",label:"Bottom Left"},{value:"UR",label:"Bottom Right"},{value:"DL",label:"Top Left"},{value:"DR",label:"Top Right"}],sr=[{value:"TB",label:"Bottom to Top"},{value:"BT",label:"Top to Bottom"},{value:"LR",label:"Left to Right"},{value:"RL",label:"Right to Left"}],cr=[{value:"network-simplex",label:"Network Simplex"},{value:"tight-tree",label:"Tight Tree"},{value:"longest-path",label:"Longest Path"}],lr={setAlign:Je,setNodeSep:et,setRankDir:tt,setRanker:nt,setRankSep:rt,toggleCollapseLayout:it},fr=Object(c.b)((function(e){return{collapseLayout:e.graphSlice.layoutSlice.collapseLayout,graph:e.graphSlice.graphSlice.graph,options:e.graphSlice.layoutSlice}}),lr)((function(e){var t=Object.assign({},e.options);return a.a.createElement(Jn.Section,{collapsed:e.collapseLayout,onToggle:e.toggleCollapseLayout,title:"Layout"},a.a.createElement(_e.h,{inline:!0,label:"Align"},a.a.createElement(_e.i,{minimal:!0,options:ur,value:void 0===t.align?"undefined":t.align,onChange:function(t){var n="undefined"===t.target.value?void 0:t.target.value;e.setAlign(n)}})),a.a.createElement(_e.h,{inline:!0,label:"Node Separation"},a.a.createElement(_e.t,{allowNumericCharactersOnly:!0,fill:!1,value:t.nodesep,onValueChange:function(t){return e.setNodeSep(t)}})),a.a.createElement(_e.h,{inline:!0,label:"Ranking Method"},a.a.createElement(_e.i,{minimal:!0,options:cr,value:t.ranker,onChange:function(t){return e.setRanker(t.target.value)}})),a.a.createElement(_e.h,{inline:!0,label:"Rank Direction"},a.a.createElement(_e.i,{minimal:!0,options:sr,value:t.rankdir,onChange:function(t){return e.setRankDir(t.target.value)}})),a.a.createElement(_e.h,{inline:!0,label:"Rank Separation"},a.a.createElement(_e.t,{allowNumericCharactersOnly:!0,fill:!1,value:t.ranksep,onValueChange:function(t){return e.setRankSep(t)}})),a.a.createElement(_e.a,{minimal:!0,text:"Apply Layout",onClick:function(){e.graph&&((new D.DagreLayout).apply(e.graph,t),e.graph.update())}}))})),hr={toggleCollapseZoom:at},dr=Object(c.b)((function(e){return{collapseZoom:e.graphSlice.layoutSlice.collapseZoom,graph:e.graphSlice.graphSlice.graph}}),hr)((function(e){return a.a.createElement(Jn.Section,{collapsed:e.collapseZoom,onToggle:e.toggleCollapseZoom,title:"Zoom Settings"},a.a.createElement(_e.a,{icon:"home",text:"Default Zoom",minimal:!0,onClick:function(){e.graph.zoomToHome()}}),a.a.createElement(_e.a,{icon:"zoom-to-fit",text:"Zoom to Fit",minimal:!0,onClick:function(){e.graph.zoomToFit()}}))})),pr={setColorScheme:mt,toggleCollapseScheme:Ot},vr=Object(c.b)((function(e){return{collapse:e.graphSlice.nodeStylingSlice.collapseScheme}}),pr)((function(e){return a.a.createElement(Jn.Section,{collapsed:e.collapse,onToggle:e.toggleCollapseScheme,title:"Quick Color Scheme"},a.a.createElement(tr,{onClick:e.setColorScheme}))})),gr=n(24),mr={addProjection:J,nextAtom:ee,previousAtom:te,removeProjection:ne,setProjection:re,toggleCollapseProjections:oe},yr=Object(c.b)((function(e){return Object(Hn.a)({},e.graphSlice.dataSlice)}),mr)((function(e){var t=e.projections.toArray();return a.a.createElement(Jn.Section,{collapsed:e.collapseProjections,onToggle:e.toggleCollapseProjections,title:"Projections"},a.a.createElement("div",{className:"projections"},t.map((function(t){var n=t[0],r=t[1],i=e.atoms.get(n)||[];return a.a.createElement(a.a.Fragment,{key:n},a.a.createElement(_e.C,{ellipsize:!0},n),a.a.createElement(_e.i,{minimal:!0,onChange:function(t){e.setProjection({sig:n,atom:t.target.value})},options:i,value:r}),a.a.createElement("div",{className:"buttons"},a.a.createElement(_e.a,{icon:"chevron-left",minimal:!0,onClick:function(){return e.previousAtom(n)}}),a.a.createElement(_e.a,{icon:"cross",minimal:!0,onClick:function(){return e.removeProjection(n)}}),a.a.createElement(_e.a,{icon:"chevron-right",minimal:!0,onClick:function(){return e.nextAtom(n)}})))}))),e.unprojected.size>0&&a.a.createElement(_e.u,{className:"centered",hasBackdrop:!0,modifiers:de,position:gr.a.BOTTOM,usePortal:!0,wrapperTagName:"div"},a.a.createElement(_e.a,{icon:"add",minimal:!0,text:"Add Projection"}),a.a.createElement(_e.f,{vertical:!0},e.unprojected.map((function(t){return a.a.createElement(_e.a,{key:t,minimal:!0,onClick:function(){return e.addProjection(t)},text:t})})))))})),_r=n(59),br=n(49),wr=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(_e.h,{inline:!0,label:"Label Size (px)"},a.a.createElement(_e.t,{allowNumericCharactersOnly:!0,fill:!1,min:0,minorStepSize:null,onValueChange:function(t,n){return e.onChangeSize(n)},placeholder:"Inheret",value:e.size})),a.a.createElement(_e.h,{inline:!0,label:"Label Color"},e.color&&a.a.createElement(_e.a,{icon:"small-cross",onClick:function(){return e.onChangeColor(null)},minimal:!0}),a.a.createElement(_e.u,{hasBackdrop:!0,usePortal:!0,modifiers:de,position:gr.a.LEFT},a.a.createElement(_e.a,{style:{backgroundColor:ge(e.color),color:ye(e.color)},text:e.color||"Inheret",minimal:!0}),a.a.createElement(br.TwitterPicker,{color:ge(e.color),colors:ve,onChange:function(t){return e.onChangeColor(t.hex)},triangle:"hide"}))))};function xr(e,t,n){if(null===e)return{id:"error",label:"No Instance",icon:"error"};return function e(r){var i=r.children.map(e);return{id:r.id,label:r.label?r.label:r.id,icon:r.icon,isExpanded:!t.get(r.id),isSelected:r.id===n,hasCaret:!!i.length,childNodes:i}}(e)}var kr=function(e){var t=e.stroke;return a.a.createElement(a.a.Fragment,null,a.a.createElement(_e.h,{inline:!0,label:"Stroke"},e.stroke&&a.a.createElement(_e.a,{icon:"small-cross",onClick:function(){return e.onChangeStroke(null)},minimal:!0}),a.a.createElement(_e.u,{hasBackdrop:!0,usePortal:!0,modifiers:de,position:gr.a.LEFT},a.a.createElement(_e.a,{style:{backgroundColor:ge(t),color:ye(t)},text:t||"Inherit",minimal:!0}),a.a.createElement(br.TwitterPicker,{color:ge(t),colors:ve,onChange:function(t){return e.onChangeStroke(t.hex)},triangle:"hide"}))),a.a.createElement(_e.h,{inline:!0,label:"Stroke Width"},a.a.createElement(_e.t,{allowNumericCharactersOnly:!0,fill:!1,min:0,onValueChange:function(t,n){return e.onChangeStrokeWidth(n)},placeholder:"Inherit",value:e.strokeWidth})))},Er={clearAll:Me,clearCurrent:Oe,collapseTreeNode:Ae,expandTreeNode:Ce,selectTreeNode:Te,setLabelColor:Ne,setLabelSize:Ie,setStroke:Re,setStrokeWidth:De,toggleAsAttribute:ie,toggleCollapseEdgeStyle:Fe,toggleHideEmptyFields:ze},Sr=Object(c.b)((function(e){return Object(Hn.a)({},e.graphSlice.edgeStylingSlice,{asAttribute:e.graphSlice.dataSlice.asAttribute})}),Er)((function(e){var t=e.selected,n=t&&e.linkStyles.get(t)||{},r=!!t&&e.asAttribute.get(t),i=n?n.stroke:void 0,o=n?n.strokeWidth:void 0,u=t&&e.labelStyles.get(t)||{},s=u?u.color:void 0,c=u?u.font:void 0,l=c?c.match(/(\d*)px/):[],f=l&&l.length>1?parseInt(l[1]):void 0,h=xr(e.treeField,e.collapsed,t),d=xr(e.treeSkolem,e.collapsed,t),p="error"===h.id&&"error"===d.id,v=d.childNodes&&d.childNodes.length,g=p||!v?[h]:[h,d],m=e.hideEmptyFields;return h.secondaryLabel=a.a.createElement(_e.E,{content:m?"Show Empty Fields":"Hide Empty Fields"},a.a.createElement(_e.a,{icon:m?"eye-off":"eye-open",minimal:!0,onClick:e.toggleHideEmptyFields})),a.a.createElement(a.a.Fragment,null,a.a.createElement(Jn.Section,{collapsed:e.collapseEdgeStyle,onToggle:e.toggleCollapseEdgeStyle,title:"Edge Styling"},a.a.createElement(_e.F,{contents:g,onNodeClick:function(t){return e.selectTreeNode(t.id.toString())},onNodeCollapse:function(t){return e.collapseTreeNode(t.id.toString())},onNodeExpand:function(t){return e.expandTreeNode(t.id.toString())}}),a.a.createElement(_e.g,null),t?a.a.createElement(a.a.Fragment,null,a.a.createElement(_e.h,null,a.a.createElement(_e.z,{alignIndicator:_r.a.RIGHT,checked:r,label:"Show as Attribute",onChange:function(){return e.toggleAsAttribute(t)}})),a.a.createElement(kr,{stroke:i,strokeWidth:o,onChangeStroke:e.setStroke,onChangeStrokeWidth:e.setStrokeWidth}),a.a.createElement(wr,{color:s,size:f,onChangeColor:e.setLabelColor,onChangeSize:e.setLabelSize}),a.a.createElement(_e.b,{fill:!0,minimal:!0},a.a.createElement(_e.a,{icon:"clean",onClick:e.clearCurrent,text:"Clear Selected"}),a.a.createElement(_e.a,{icon:"clean",onClick:e.clearAll,text:"Clear All"}))):a.a.createElement(_e.s,{title:"Edge Styling",description:"Select a field or skolem from the tree",icon:"style"})))})),jr={toggleAxesVisible:He,toggleCollapseGraphSettings:$e,toggleGridVisible:Ye},Mr=Object(c.b)((function(e){return Object(Hn.a)({},e.graphSlice.graphSettingsSlice)}),jr)((function(e){return a.a.createElement(Jn.Section,{collapsed:e.collapseGraphSettings,onToggle:e.toggleCollapseGraphSettings,title:"Graph Settings"},a.a.createElement(_e.z,{alignIndicator:_r.a.RIGHT,checked:e.axesVisible,label:"Display Axes",onChange:e.toggleAxesVisible}),a.a.createElement(_e.z,{alignIndicator:_r.a.RIGHT,checked:e.gridVisible,label:"Display Grid",onChange:e.toggleGridVisible}))})),Or={toggleCollapseQuickLayout:ot},Ar=Object(c.b)((function(e){return{collapseQuickLayout:e.graphSlice.layoutSlice.collapseQuickLayout,graph:e.graphSlice.graphSlice.graph,instance:e.sterlingSlice.instance}}),Or)((function(e){return a.a.createElement(Jn.Section,{collapsed:e.collapseQuickLayout,onToggle:e.toggleCollapseQuickLayout,title:"Quick Layout"},a.a.createElement(_e.b,{minimal:!0},a.a.createElement(_e.E,{content:"Circle Layout"},a.a.createElement(_e.a,{icon:"layout-circle",onClick:function(){e.graph&&((new D.CircleLayout).apply(e.graph),e.graph.update())}})),a.a.createElement(_e.E,{content:"Grid Layout"},a.a.createElement(_e.a,{icon:"layout-grid",onClick:function(){e.graph&&((new D.GridLayout).apply(e.graph),e.graph.update())}})),a.a.createElement(_e.E,{content:"Grouped Row Layout"},a.a.createElement(_e.a,{icon:"layout-linear",onClick:function(){if(e.graph&&e.instance){var t=new D.RowLayout,n=e.instance.signatures().find((function(e){return"univ"===e.id()}));n&&t.groups(n.subTypes().map((function(e){return e.atoms(!0).map((function(e){return e.name()}))}))),t.apply(e.graph),e.graph.update()}}})),a.a.createElement(_e.E,{content:"Layered Layout"},a.a.createElement(_e.a,{icon:"layout-hierarchy",onClick:function(){e.graph&&((new D.DagreLayout).apply(e.graph),e.graph.update())}}))))})),Cr=function(e){var t=e.style.radius;return a.a.createElement(_e.h,{inline:!0,label:"Radius"},a.a.createElement(_e.t,{allowNumericCharactersOnly:!0,fill:!1,min:0,onValueChange:function(t,n){return e.onSetRadius(n)},placeholder:"Inherit",value:t||void 0}))},Tr=function(e){var t=e.style.width,n=e.style.height;return a.a.createElement(a.a.Fragment,null,a.a.createElement(_e.h,{inline:!0,label:"Width"},a.a.createElement(_e.t,{allowNumericCharactersOnly:!0,fill:!1,min:0,onValueChange:function(t,n){return e.onSetWidth(n)},placeholder:"Inherit",value:t||void 0})),a.a.createElement(_e.h,{inline:!0,label:"Height"},a.a.createElement(_e.t,{allowNumericCharactersOnly:!0,min:0,onValueChange:function(t,n){return e.onSetHeight(n)},placeholder:"Inherit",value:n||void 0})))};var Lr=function(e){var t=e.shape,n=t&&t.type||"inherit";return a.a.createElement(a.a.Fragment,null,a.a.createElement(_e.h,{inline:!0,label:"Shape"},a.a.createElement(_e.i,{minimal:!0,options:[{value:"inherit",label:"Inherit"},{value:"circle",label:"Circle"},{value:"rectangle",label:"Rectangle"}],value:n,onChange:function(t){var n=t.target.value;e.onSetShape(function(e){return"circle"===e||"rectangle"===e?e:null}(n))}})),"circle"===n?a.a.createElement(Cr,{style:t,onSetRadius:e.onSetRadius}):"rectangle"===n?a.a.createElement(Tr,{style:t,onSetWidth:e.onSetWidth,onSetHeight:e.onSetHeight}):null)},Nr=function(e){var t=e.fill,n=e.stroke;return a.a.createElement(a.a.Fragment,null,a.a.createElement(_e.h,{inline:!0,label:"Fill"},t&&a.a.createElement(_e.a,{icon:"small-cross",onClick:function(){return e.onChangeFill(null)},minimal:!0}),a.a.createElement(_e.u,{hasBackdrop:!0,usePortal:!0,modifiers:de,position:gr.a.LEFT},a.a.createElement(_e.a,{style:{backgroundColor:ge(t),color:ye(t)},text:t||"Inherit",minimal:!0}),a.a.createElement(br.TwitterPicker,{color:ge(t),colors:ve,onChange:function(t){return e.onChangeFill(t.hex)},triangle:"hide"}))),a.a.createElement(_e.h,{inline:!0,label:"Stroke"},n&&a.a.createElement(_e.a,{icon:"small-cross",onClick:function(){return e.onChangeStroke(null)},minimal:!0}),a.a.createElement(_e.u,{hasBackdrop:!0,usePortal:!0,modifiers:de,position:gr.a.LEFT},a.a.createElement(_e.a,{style:{backgroundColor:ge(n),color:ye(n)},text:n||"Inherit",minimal:!0}),a.a.createElement(br.TwitterPicker,{color:ge(n),colors:ve,onChange:function(t){return e.onChangeStroke(t.hex)},triangle:"hide"}))),a.a.createElement(_e.h,{inline:!0,label:"Stroke Width"},a.a.createElement(_e.t,{allowNumericCharactersOnly:!0,fill:!1,min:-1,onValueChange:function(t,n){return e.onChangeStrokeWidth(n)},placeholder:"Inherit",value:e.strokeWidth})))},Ir={clearAll:ht,clearCurrent:dt,collapseTreeNode:pt,expandTreeNode:vt,selectTreeNode:gt,setFill:yt,setHeight:_t,setLabelColor:bt,setLabelSize:wt,setRadius:xt,setShape:kt,setStroke:Et,setStrokeWidth:St,setWidth:jt,toggleCollapseNodeStyle:Mt,toggleHideDisconnected:At,toggleHideEmptySets:Ct},Rr=Object(c.b)((function(e){return Object(Hn.a)({},e.graphSlice.nodeStylingSlice)}),Ir)((function(e){var t=e.selected,n=!!e.selected&&e.hideDisconnected.get(e.selected),r=t&&e.shapes.get(t)||{},i=r?r.fill:void 0,o=r?r.stroke:void 0,u=r?r.strokeWidth:void 0,s=t&&e.labels.get(t)||{},c=s?s.color:void 0,l=s?s.font:void 0,f=l?l.match(/(\d*)px/):[],h=f&&f.length>1?parseInt(f[1]):void 0,d=xr(e.nodeTree,e.collapsed,t),p=e.hideEmptySets;return d.secondaryLabel=a.a.createElement(_e.E,{content:p?"Show Empty Sets":"Hide Empty Sets"},a.a.createElement(_e.a,{icon:p?"eye-off":"eye-open",minimal:!0,onClick:e.toggleHideEmptySets})),a.a.createElement(Jn.Section,{collapsed:e.collapseNodeStyle,onToggle:e.toggleCollapseNodeStyle,title:"Node Styling"},a.a.createElement(_e.F,{contents:[d],onNodeClick:function(t){return e.selectTreeNode(t.id.toString())},onNodeCollapse:function(t){return e.collapseTreeNode(t.id.toString())},onNodeExpand:function(t){return e.expandTreeNode(t.id.toString())}}),a.a.createElement(_e.g,null),t?a.a.createElement(a.a.Fragment,null,a.a.createElement(_e.h,{contentClassName:"fill",inline:!0},a.a.createElement(_e.z,{alignIndicator:_r.a.RIGHT,checked:n,onChange:e.toggleHideDisconnected,label:"Hide Disconnected Nodes"})),a.a.createElement(Lr,{shape:r,onSetHeight:e.setHeight,onSetRadius:e.setRadius,onSetShape:e.setShape,onSetWidth:e.setWidth}),a.a.createElement(Nr,{fill:i,stroke:o,strokeWidth:u,onChangeFill:e.setFill,onChangeStroke:e.setStroke,onChangeStrokeWidth:e.setStrokeWidth}),a.a.createElement(wr,{color:c,size:h,onChangeColor:e.setLabelColor,onChangeSize:e.setLabelSize}),a.a.createElement(_e.b,{fill:!0,minimal:!0},a.a.createElement(_e.a,{icon:"clean",onClick:e.clearCurrent,text:"Clear Selected"}),a.a.createElement(_e.a,{icon:"clean",onClick:e.clearAll,text:"Clear All"}))):a.a.createElement(_e.s,{title:"Node Styling",description:"Select a type or set from the tree",icon:"style"}))})),Dr=Object(c.b)((function(e){return{view:e.sterlingSlice.graphView}}))((function(e){return"node"===e.view?a.a.createElement(a.a.Fragment,null,a.a.createElement(yr,null),a.a.createElement(vr,null),a.a.createElement(Rr,null)):"edge"===e.view?a.a.createElement(a.a.Fragment,null,a.a.createElement(rr,null),a.a.createElement(Sr,null)):"layout"===e.view?a.a.createElement(a.a.Fragment,null,a.a.createElement(Ar,null),a.a.createElement(fr,null),a.a.createElement(dr,null)):"settings"===e.view?a.a.createElement(a.a.Fragment,null,a.a.createElement(Mr,null),a.a.createElement(ar,null)):null})),Fr=n(1),Pr={setMainView:W},zr=Object(c.b)((function(e){return{view:e.sterlingSlice.mainView}}),Pr)((function(e){return a.a.createElement(_e.p.Group,null,a.a.createElement(_e.r,{className:"nav-heading"},"Sterling"),a.a.createElement(_e.q,null),a.a.createElement(_e.a,{active:"graph"===e.view,className:Fr.a.MINIMAL,icon:"graph",large:!0,text:"Graph",onClick:function(){return e.setMainView("graph")}}),a.a.createElement(_e.a,{active:"table"===e.view,className:Fr.a.MINIMAL,icon:"th",large:!0,text:"Table",onClick:function(){return e.setMainView("table")}}),a.a.createElement(_e.a,{active:"script"===e.view,className:Fr.a.MINIMAL,icon:"code",large:!0,text:"Script",onClick:function(){return e.setMainView("script")}}),a.a.createElement(_e.a,{active:"source"===e.view,className:Fr.a.MINIMAL,icon:"document",large:!0,text:"Source",onClick:function(){return e.setMainView("source")}}),a.a.createElement(_e.q,null))})),Vr={setInstance:B},Ur=(Object(c.b)((function(e){return{instance:e.sterlingSlice.instance}}),Vr)((function(e){var t=e.instance?e.instance.command():"",n=a.a.createRef(),r=function(t){if("string"===typeof t&&t.length)try{var n=new L(t);e.setInstance(n)}catch(r){e.setInstance(null)}else e.setInstance(null)},i=function(e){fetch(e).then((function(e){return e.text()})).then(r).catch((function(){return r(null)}))};return a.a.createElement(_e.p,{fixedToTop:!0,className:"nav bp3-dark"},a.a.createElement(zr,null),a.a.createElement(_e.p.Group,{className:"collapsing"},t.length>0&&a.a.createElement(_e.A,{minimal:!0},t),a.a.createElement(_e.q,null),a.a.createElement("input",{type:"file",style:{display:"none"},onChange:function(){if(n.current){var e=n.current.files;if(e&&e.length){var t=e[0],i=new FileReader;i.addEventListener("load",(function(e){r(e.target?e.target.result:null)})),i.readAsText(t)}}},ref:n}),a.a.createElement(_e.u,null,a.a.createElement(_e.a,{rightIcon:"caret-down",intent:"success",large:!0,text:"Open"}),a.a.createElement(_e.m,null,a.a.createElement(_e.o,{text:"Open XML...",onClick:function(){n.current&&n.current.click()}}),a.a.createElement(_e.n,{title:"Examples"}),a.a.createElement(_e.o,{text:"Finite Element Mesh",onClick:function(){return i("examples/mesh.xml")}}),a.a.createElement(_e.o,{text:"Geneaology",onClick:function(){return i("examples/genealogy.xml")}}),a.a.createElement(_e.o,{text:"Mathematical Matrix",onClick:function(){return i("examples/matrix.xml")}}),a.a.createElement(_e.o,{text:"River Crossing Puzzle",onClick:function(){return i("examples/river-crossing.xml")}}),a.a.createElement(_e.o,{text:"Wetting and Drying",onClick:function(){return i("examples/wetdry.xml")}})))))})),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e)))._requestNext=function(){n.props.connection.requestNextInstance()},n.state={command:"",connected:!1,ready:!1},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.connection.addEventListener("connect",(function(){e.setState({connected:!0})})).addEventListener("disconnect",(function(){e.setState({connected:!1,ready:!1})})).addEventListener("instance",(function(t){e.setState({command:t.instance.command(),ready:e.state.connected})}))}},{key:"render",value:function(){var e=this.state;return a.a.createElement(_e.p,{fixedToTop:!0,className:"nav bp3-dark"},a.a.createElement(zr,null),a.a.createElement(_e.p.Group,{className:"collapsing"},e.command.length>0&&a.a.createElement(_e.A,{minimal:!0},e.command),a.a.createElement(_e.q,null),a.a.createElement(_e.a,{disabled:!e.ready,intent:e.connected?"success":"danger",large:!0,onClick:this._requestNext,rightIcon:"circle-arrow-right",text:"Next"})))}}]),t}(a.a.Component)),qr=_e.D.create({position:gr.a.BOTTOM_RIGHT});function Br(e){console.error(e),qr.show({intent:Xn.a.DANGER,message:e})}var Wr={addProjection:on,nextAtom:un,previousAtom:sn,removeProjection:cn,setProjection:ln},Hr=Object(c.b)((function(e){return{atoms:e.scriptSlice.atoms,projections:e.scriptSlice.projections,unprojected:e.scriptSlice.unprojected}}),Wr)((function(e){var t=e.projections.toArray();return a.a.createElement(Jn.Section,{title:"Projections"},a.a.createElement("div",{className:"projections"},t.map((function(t){var n=Object(er.a)(t,2),r=n[0],i=n[1],o=e.atoms.get(r)||[];return a.a.createElement(a.a.Fragment,{key:r},a.a.createElement(_e.C,{ellipsize:!0},r),a.a.createElement(_e.i,{minimal:!0,onChange:function(t){e.setProjection({sig:r,atom:t.target.value})},options:o,value:i}),a.a.createElement("div",{className:"buttons"},a.a.createElement(_e.a,{icon:"chevron-left",minimal:!0,onClick:function(){return e.previousAtom(r)}}),a.a.createElement(_e.a,{icon:"cross",minimal:!0,onClick:function(){return e.removeProjection(r)}}),a.a.createElement(_e.a,{icon:"chevron-right",minimal:!0,onClick:function(){return e.nextAtom(r)}})))}))),e.unprojected.size>0&&a.a.createElement(_e.u,{className:"centered",hasBackdrop:!0,modifiers:de,position:gr.a.BOTTOM,usePortal:!0,wrapperTagName:"div"},a.a.createElement(_e.a,{icon:"add",minimal:!0,text:"Add Projection"}),a.a.createElement(_e.f,{vertical:!0},e.unprojected.map((function(t){return a.a.createElement(_e.a,{key:t,minimal:!0,onClick:function(){return e.addProjection(t)},text:t})})))))})),Gr=function(e){return a.a.createElement("a",{href:e.href,target:"_blank",rel:"noreferrer noopener"},e.children)};function $r(e){return Reflect.get(e,"__var__")}function Yr(e,t){var n=e.id().toUpperCase(),r=t.id().toUpperCase();return n<r?-1:n>r?1:0}var Xr=Object(c.b)((function(e){return{instance:e.scriptSlice.instance}}))((function(e){return a.a.createElement(_e.j,{className:"fill",condensed:!0,striped:!0},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"Variable"),a.a.createElement("th",{scope:"col"},"Type"))),a.a.createElement("tbody",null,e.instance&&a.a.createElement(a.a.Fragment,null,a.a.createElement("tr",null,a.a.createElement("td",null,"instance"),a.a.createElement("td",null,a.a.createElement(Gr,{href:"https://alloy-js.github.io/alloy-ts/classes/alloyinstance.html"},"AlloyInstance"))),e.instance.signatures().sort(Yr).map((function(e){return a.a.createElement("tr",{key:$r(e)},a.a.createElement("td",null,$r(e)),a.a.createElement("td",null,a.a.createElement(Gr,{href:"https://alloy-js.github.io/alloy-ts/classes/alloysignature.html"},"AlloySignature")))})),e.instance.atoms().sort(Yr).filter((function(e){return isNaN(+e.id())})).map((function(e){return a.a.createElement("tr",{key:$r(e)},a.a.createElement("td",null,$r(e)),a.a.createElement("td",null,a.a.createElement(Gr,{href:"https://alloy-js.github.io/alloy-ts/classes/alloyatom.html"},"AlloyAtom")))})),e.instance.fields().sort(Yr).map((function(e){return a.a.createElement("tr",{key:$r(e)},a.a.createElement("td",null,$r(e)),a.a.createElement("td",null,a.a.createElement(Gr,{href:"https://alloy-js.github.io/alloy-ts/classes/alloyfield.html"},"AlloyField")))})),e.instance.skolems().sort(Yr).map((function(e){return a.a.createElement("tr",{key:$r(e)},a.a.createElement("td",null,$r(e)),a.a.createElement("td",null,a.a.createElement(Gr,{href:"https://alloy-js.github.io/alloy-ts/classes/alloyskolem.html"},"AlloySkolem")))})))))})),Zr=n(76),Kr=n(105),Qr=n(54),Jr=n.n(Qr),ei=function(){function e(){Object(l.a)(this,e),this._args=void 0,this._libs=void 0,this._libraries=void 0,this._script=void 0,this._args=[],this._libs=[],this._libraries=new Map,this._script=""}return Object(p.a)(e,[{key:"args",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._args=t,this}},{key:"libraries",value:function(e){return this._libs=e,this}},{key:"run",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Object(Zr.a)(Function,Object(P.a)(this._args).concat(Object(P.a)(this._libs.map(ti)),["require",this._script]));return Jr.a.setItem("script",this._script).then((function(){return Promise.all(e._libs.map(e._fetchLibrary.bind(e))).then((function(e){i.apply(void 0,n.concat(Object(P.a)(e),[Kr.a]))}))}))}},{key:"script",value:function(e){return this._script=e,this}},{key:"_fetchLibrary",value:function(e){var t=this,n=e;return this._libraries.has(n)?Promise.resolve(this._libraries.get(n)):Object(Kr.a)(e).then((function(e){return t._libraries.set(n,e),e})).catch((function(t){Br("".concat(e,": ").concat(t.message))}))}}]),e}();function ti(e){return e.split("@")[0].replace("-","")}var ni={addLibrary:rn,removeLibrary:an},ri=Object(c.b)((function(e){return{libraries:e.scriptSlice.libraries}}),ni)(function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e)))._onChange=function(e){n.setState({input:e.target.value})},n._onType=function(e){"Enter"===e.key&&n.state.input.length&&(n.props.addLibrary(n.state.input),n.setState({input:""}))},n.state={input:""},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(_e.j,{className:"fill",condensed:!0,striped:!0},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"Variable"),a.a.createElement("th",{scope:"col"},"Library"))),a.a.createElement("tbody",null,this.props.libraries.toList().map((function(t){return a.a.createElement("tr",{key:t},a.a.createElement("td",null,ti(t)),a.a.createElement("td",null,a.a.createElement(Gr,{href:"https://www.jsdelivr.com/package/npm/".concat(ti(t))},t),a.a.createElement(_e.a,{style:{marginLeft:"5px"},icon:a.a.createElement(_e.k,{icon:"cross",iconSize:12}),minimal:!0,small:!0,onClick:function(){e.props.removeLibrary(t)}})))})),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:3},a.a.createElement(_e.l,{fill:!0,placeholder:"Add library",onChange:this._onChange,onKeyDown:this._onType,value:this.state.input})))))}}]),t}(a.a.Component)),ii=Object(c.b)((function(e){return{stage:e.scriptSlice.stage,width:e.scriptSlice.width,height:e.scriptSlice.height}}))(function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement(_e.j,{className:"fill",condensed:!0,striped:!0},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"Variable"),a.a.createElement("th",{scope:"col"},"Value"))),a.a.createElement("tbody",null,this._stageRow(),a.a.createElement("tr",null,a.a.createElement("td",null,"width"),a.a.createElement("td",null,this.props.width)),a.a.createElement("tr",null,a.a.createElement("td",null,"height"),a.a.createElement("td",null,this.props.height))))}},{key:"_canvasRow",value:function(){return a.a.createElement("tr",null,a.a.createElement("td",null,"canvas"),a.a.createElement("td",null,a.a.createElement(Gr,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API"},"<canvas>")))}},{key:"_divRow",value:function(){return a.a.createElement("tr",null,a.a.createElement("td",null,"div"),a.a.createElement("td",null,a.a.createElement(Gr,{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div"},"<div>")))}},{key:"_svgRow",value:function(){return a.a.createElement("tr",null,a.a.createElement("td",null,"svg"),a.a.createElement("td",null,a.a.createElement(Gr,{href:"https://developer.mozilla.org/en-US/docs/Web/SVG"},"<svg>")))}},{key:"_stageRow",value:function(){return"canvas"===this.props.stage?this._canvasRow():"div"===this.props.stage?this._divRow():"svg"===this.props.stage?this._svgRow():null}}]),t}(a.a.Component)),oi={toggleCollapseInstanceVariables:gn,toggleCollapseLibraries:mn,toggleCollapseStageVariables:yn},ai=Object(c.b)((function(e){return{collapseInstanceVariables:e.scriptSlice.collapseInstanceVariables,collapseLibraries:e.scriptSlice.collapseLibraries,collapseStageVariables:e.scriptSlice.collapseStageVariables}}),oi)((function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Jn.Section,{collapsed:e.collapseLibraries,onToggle:e.toggleCollapseLibraries,title:"Libraries"},a.a.createElement(ri,null)),a.a.createElement(Jn.Section,{collapsed:e.collapseStageVariables,onToggle:e.toggleCollapseStageVariables,title:"Stage Variables"},a.a.createElement(ii,null)),a.a.createElement(Jn.Section,{collapsed:e.collapseInstanceVariables,onToggle:e.toggleCollapseInstanceVariables,title:"Instance Variables"},a.a.createElement(Xr,null)))})),ui=Object(c.b)((function(e){return{view:e.sterlingSlice.scriptView}}))((function(e){return"projections"===e.view?a.a.createElement(Hr,null):"variables"===e.view?a.a.createElement(ai,null):null})),si={setSelected:wn},ci=Object(c.b)((function(e){return{instance:e.sterlingSlice.instance,selected:e.sourceSlice.selected}}),si),li=function(e){return a.a.createElement(_e.s,{title:"No Files",icon:"document"})},fi=ci((function(e){var t=e.instance;return a.a.createElement(Jn.Section,{title:"Model Sources"},t?a.a.createElement(_e.b,{alignText:_r.a.LEFT,minimal:!0,vertical:!0}," ",t.sources().map((function(t){return a.a.createElement(_e.a,{active:e.selected===t,icon:"document",key:t.filename(),onClick:function(){return e.setSelected(t)},text:t.filename().split(/(\\|\/)/g).pop()})}))):a.a.createElement(li,e))})),hi=n(432).a.ofType();function di(e,t){var n=0,r=t.split(/\s+/).filter((function(e){return e.length>0})).map(pi);if(0===r.length)return[e];for(var i=new RegExp(r.join("|"),"gi"),a=[];;){var u=i.exec(e);if(!u)break;var s=u[0].length,c=e.slice(n,i.lastIndex-s);c.length>0&&a.push(c),n=i.lastIndex,a.push(o.createElement("strong",{key:n},u[0]))}var l=e.slice(n);return l.length>0&&a.push(l),a}function pi(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}var vi=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i))))._filterItem=function(e,t){return("field"===t.expressionType()?n.props.nameFunction(t).split("<:")[1]:n.props.nameFunction(t)).toLowerCase().indexOf(e.toLowerCase())>=0},n._isItemSelected=function(e){return n.props.itemsSelected.includes(e)},n._onRemoveTag=function(e,t){n.props.onDeselectItem(n.props.itemsSelected[t])},n._onSelectItem=function(e){n._isItemSelected(e)?n.props.onDeselectItem(e):n.props.onSelectItem(e)},n._renderItem=function(e,t){if(!t.modifiers.matchesPredicate)return null;switch(e.expressionType()){case"signature":return n._renderSignature(e,t);case"field":return n._renderField(e,t);case"skolem":return n._renderSkolem(e,t);default:return null}},n._renderList=function(e){var t=e.items.filter((function(e){return"signature"===e.expressionType()})),r=e.items.filter((function(e){return"field"===e.expressionType()})),i=e.items.filter((function(e){return"skolem"===e.expressionType()})),a=k.alphabeticalSort(n.props.nameFunction);t.sort(a).sort(k.builtinSort()),r.sort(a),i.sort(a);var u=t.map(e.renderItem).filter((function(e){return null!=e})),s=r.map(e.renderItem).filter((function(e){return null!=e})),c=i.map(e.renderItem).filter((function(e){return null!=e}));return o.createElement(_e.m,{ulRef:e.itemsParentRef},o.createElement(_e.n,{title:"Signatures"}),u.length?u:o.createElement(_e.o,{disabled:!0,text:"None"}),o.createElement(_e.n,{title:"Fields"}),s.length?s:o.createElement(_e.o,{disabled:!0,text:"None"}),o.createElement(_e.n,{title:"Skolems"}),c.length?c:o.createElement(_e.o,{disabled:!0,text:"None"}))},n._renderSignature=function(e,t){var r=n._isItemSelected(e);return o.createElement(_e.o,{active:t.modifiers.active,disabled:t.modifiers.disabled,key:e.id(),labelElement:di(n.props.nameFunction(e),t.query),icon:r?"tick":"blank",onClick:t.handleClick})},n._renderField=function(e,t){var r=n.props.nameFunction(e).split("<:"),i=n._isItemSelected(e);return o.createElement(_e.o,{active:t.modifiers.active,disabled:t.modifiers.disabled,key:e.id(),icon:o.createElement(o.Fragment,null,i&&o.createElement(_e.k,{icon:"tick"}),o.createElement(be,{signature:r[0]})),labelElement:di(r[1],t.query),onClick:t.handleClick})},n._renderSkolem=function(e,t){var r=n._isItemSelected(e);return o.createElement(_e.o,{active:t.modifiers.active,disabled:t.modifiers.disabled,icon:r?"tick":"blank",key:e.id(),labelElement:di(e.name(),t.query),onClick:t.handleClick})},n._renderTag=function(e){var t=n.props.nameFunction(e);return"field"===e.expressionType()?we.FieldTagEls(t.split("<:")):t},n._tagProps=function(e,t){var r=n.props.itemsSelected[t].expressionType();return{className:"signature"===r?"sig-tag":"field"===r?"field-tag":"skolem"===r?"skolem-tag":""}},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=this.props.itemsSelected.length?o.createElement(_e.a,{icon:"cross",minimal:!0,onClick:this.props.onClearSelectedItems}):void 0;return o.createElement(hi,{fill:!0,items:function(t){var n=t.filter((function(e){return"signature"===e.expressionType()})),r=t.filter((function(e){return"field"===e.expressionType()})),i=t.filter((function(e){return"skolem"===e.expressionType()})),o=k.alphabeticalSort(e.props.nameFunction);return n.sort(o).sort(k.builtinSort()),r.sort(o),i.sort(o),[].concat(Object(P.a)(n),Object(P.a)(r),Object(P.a)(i))}(t.items),itemPredicate:this._filterItem,itemRenderer:this._renderItem,itemListRenderer:this._renderList,onItemSelect:this._onSelectItem,popoverProps:{usePortal:!1},placeholder:"Choose Tables...",resetOnSelect:!0,scrollToActiveItem:!0,selectedItems:this.props.itemsSelected,tagInputProps:{onRemove:this._onRemoveTag,rightElement:n,tagProps:this._tagProps},tagRenderer:this._renderTag})}}]),t}(o.Component),gi={clearSelectedData:An,deselectData:Cn,selectData:Tn,setAlignment:Ln,setLayoutDirection:Nn,setSort:In,setTableTypes:Rn,toggleCollapseData:Dn,toggleCollapseLayout:Fn,toggleCollapseTables:Pn,toggleHighlightSkolems:zn,toggleRemoveBuiltin:Vn,toggleRemoveEmpty:Un,toggleRemoveThis:qn},mi=Object(c.b)((function(e){return Object(Hn.a)({},e.tableSlice)}),gi)((function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Jn.Section,{collapsed:e.collapseTables,onToggle:e.toggleCollapseTables,style:{position:"relative",zIndex:1},title:"Tables"},a.a.createElement(_e.x,{onChange:function(t){return e.setTableTypes(parseInt(t.currentTarget.value))},selectedValue:e.tablesType},a.a.createElement(_e.w,{label:"All Tables",value:tn.All}),a.a.createElement(_e.w,{label:"Signatures",value:tn.Signatures}),a.a.createElement(_e.w,{label:"Fields",value:tn.Fields}),a.a.createElement(_e.w,{label:"Skolems",disabled:e.highlightSkolems,value:tn.Skolems}),a.a.createElement(_e.w,{label:"Choose Tables",value:tn.Select}),a.a.createElement(vi,{items:e.data,itemsSelected:e.dataSelected,onClearSelectedItems:e.clearSelectedData,onDeselectItem:e.deselectData,onSelectItem:e.selectData,nameFunction:En(e.removeThis)}))),a.a.createElement(Jn.Section,{collapsed:e.collapseData,onToggle:e.toggleCollapseData,style:{position:"relative",zIndex:0},title:"Data Options"},a.a.createElement(_e.z,{alignIndicator:_r.a.LEFT,checked:e.removeBuiltin,disabled:e.tablesType===tn.Select,label:"Hide Built-in Signatures",onChange:e.toggleRemoveBuiltin}),a.a.createElement(_e.z,{alignIndicator:_r.a.LEFT,checked:e.removeEmpty,disabled:e.tablesType===tn.Select,label:"Hide Empty Tables",onChange:e.toggleRemoveEmpty}),a.a.createElement(_e.z,{alignIndicator:_r.a.LEFT,checked:e.removeThis,label:'Remove "this" from Signature names',onChange:e.toggleRemoveThis}),a.a.createElement(_e.z,{alignIndicator:_r.a.LEFT,checked:e.highlightSkolems,label:"Display Skolems as highlighted rows",onChange:e.toggleHighlightSkolems})),a.a.createElement(Jn.Section,{collapsed:e.collapseLayout,onToggle:e.toggleCollapseLayout,style:{position:"relative",zIndex:0},title:"Layout Options"},a.a.createElement(_e.h,{inline:!0,label:"Layout Direction"},a.a.createElement(_e.b,null,a.a.createElement(_e.a,{active:e.layoutDirection===Qt.Row,icon:"vertical-distribution",onClick:function(){return e.setLayoutDirection(Qt.Row)}}),a.a.createElement(_e.a,{active:e.layoutDirection===Qt.Column,icon:"horizontal-distribution",onClick:function(){return e.setLayoutDirection(Qt.Column)}}))),a.a.createElement(_e.h,{inline:!0,label:"Align"},a.a.createElement(_e.b,null,a.a.createElement(_e.a,{active:e.alignment===Kt.Left,icon:"align-left",onClick:function(){return e.setAlignment(Kt.Left)}}),a.a.createElement(_e.a,{active:e.alignment===Kt.Center,icon:"align-center",onClick:function(){return e.setAlignment(Kt.Center)}}),a.a.createElement(_e.a,{active:e.alignment===Kt.Right,icon:"align-right",onClick:function(){return e.setAlignment(Kt.Right)}}))),a.a.createElement(_e.h,{inline:!0,label:"Sort"},a.a.createElement(_e.b,null,a.a.createElement(_e.a,{icon:"group-objects",onClick:function(){e.setSort({method:en.Group,direction:Jt.Ascending})}}),a.a.createElement(_e.a,{icon:"sort-alphabetical",onClick:function(){e.setSort({method:en.Alphabetical,direction:Jt.Ascending})}}),a.a.createElement(_e.a,{icon:"sort-alphabetical-desc",onClick:function(){e.setSort({method:en.Alphabetical,direction:Jt.Descending})}}),a.a.createElement(_e.a,{icon:"sort-numerical",onClick:function(){e.setSort({method:en.Size,direction:Jt.Ascending})}}),a.a.createElement(_e.a,{icon:"sort-numerical-desc",onClick:function(){e.setSort({method:en.Size,direction:Jt.Descending})}})))))})),yi=n(160),_i={TOGGLE_AXES:"shift+a",TOGGLE_GRID:"shift+g",VIEW_GRAPH:"g",VIEW_SOURCE:"s",VIEW_TABLE:"t",ZOOM_TO_FIT:"f",ZOOM_TO_HOME:"h"},bi={setMainView:W,toggleAxesVisible:He,toggleGridVisible:Ye},wi=Object(c.b)((function(e){return Object(Hn.a)({},e)}),bi)(function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i))))._handlers=function(){return{TOGGLE_AXES:function(){"graph"===n.props.sterlingSlice.mainView&&n.props.toggleAxesVisible()},TOGGLE_GRID:function(){"graph"===n.props.sterlingSlice.mainView&&n.props.toggleGridVisible()},VIEW_GRAPH:function(){n.props.setMainView("graph")},VIEW_SOURCE:function(){n.props.setMainView("source")},VIEW_TABLE:function(){n.props.setMainView("table")},ZOOM_TO_FIT:function(){"graph"===n.props.sterlingSlice.mainView&&n.props.graphSlice.graphSlice.graph.zoomToFit()},ZOOM_TO_HOME:function(){"graph"===n.props.sterlingSlice.mainView&&n.props.graphSlice.graphSlice.graph.zoomToHome()}}},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement(yi.HotKeys,{className:"sterling",keyMap:_i,handlers:this._handlers()},this.props.children)}}]),t}(a.a.Component)),xi={setGraphView:q,setMainView:W,setScriptView:H,setSourceView:G,setTableView:$},ki=Object(c.b)((function(e){return Object(Hn.a)({},e.sterlingSlice)}),xi),Ei=function(e){return a.a.createElement(_e.E,{content:a.a.createElement("span",null,e.text),hoverOpenDelay:500,intent:Xn.a.PRIMARY,position:gr.a.RIGHT},a.a.createElement(_e.a,{icon:e.icon,minimal:!0,large:!0,active:e.active,onClick:e.click}))},Si=function(e){var t=e.graphView;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ei,{active:"node"===t,click:function(){return e.setGraphView("node")},icon:"group-objects",text:"Projections and Node Styling"}),a.a.createElement(Ei,{active:"edge"===t,click:function(){return e.setGraphView("edge")},icon:"flows",text:"Edge Styling"}),a.a.createElement(Ei,{active:"layout"===t,click:function(){return e.setGraphView("layout")},icon:"layout-auto",text:"Layout"}),a.a.createElement(Ei,{active:"settings"===t,click:function(){return e.setGraphView("settings")},icon:"settings",text:"Graph Settings"}))},ji=function(e){return a.a.createElement(Ei,{active:"settings"===e.tableView,click:function(){return e.setTableView("settings")},icon:"settings",text:"Table Settings"})},Mi=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ei,{active:"projections"===e.scriptView,click:function(){return e.setScriptView("projections")},icon:"group-objects",text:"Projections"}),a.a.createElement(Ei,{active:"variables"===e.scriptView,click:function(){return e.setScriptView("variables")},icon:"variable",text:"Script Variables"}))},Oi=function(e){return a.a.createElement(Ei,{active:"files"===e.sourceView,click:function(){return e.setSourceView("files")},icon:"document",text:"Model Sources"})},Ai=ki((function(e){var t=e.mainView,n="graph"===t&&"evaluator"===e.graphView||"table"===t&&"evaluator"===e.tableView||"script"===t&&"evaluator"===e.scriptView||"source"===t&&"evaluator"===e.sourceView;return a.a.createElement("div",{className:"sidebar nav bp3-dark"},"graph"===t?a.a.createElement(Si,e):"table"===t?a.a.createElement(ji,e):"script"===t?a.a.createElement(Mi,e):"source"===t?a.a.createElement(Oi,e):null,a.a.createElement("div",{className:"divider"}),a.a.createElement(Ei,{active:n,click:function(){"graph"===t&&e.setGraphView("evaluator"),"table"===t&&e.setTableView("evaluator"),"script"===t&&e.setScriptView("evaluator"),"source"===t&&e.setSourceView("evaluator")},icon:"console",text:"Evaluator"}))}));var Ci=[],Ti=[{nodes:[],shape:{type:"circle"}}],Li=Object(c.b)((function(e){return{asAttribute:e.graphSlice.dataSlice.asAttribute,bundleFactor:e.graphSlice.graphSettingsSlice.bundleFactor,description:e.sterlingSlice.welcomeDescription,edgeLabelPlacement:e.graphSlice.graphSettingsSlice.edgeLabelPlacement,edgeLabels:e.graphSlice.edgeStylingSlice.labelStyles,graph:e.graphSlice.graphSlice.graph,hideDisconnected:e.graphSlice.nodeStylingSlice.hideDisconnected,instance:e.sterlingSlice.instance,links:e.graphSlice.edgeStylingSlice.linkStyles,nodeLabels:e.graphSlice.nodeStylingSlice.labels,projections:e.graphSlice.dataSlice.projections,shapes:e.graphSlice.nodeStylingSlice.shapes,settings:e.graphSlice.graphSettingsSlice,title:e.sterlingSlice.welcomeTitle}})),Ni=new Map;var Ii=Li(function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e)))._ref=void 0,n._ref=a.a.createRef(),n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this._ref.current,t=this.props,n=t.graph,r=t.instance;r&&this._update(n,r),e&&this.props.graph.canvas(e),n.update()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.graph,r=t.instance,i=!(!e.instance||!r)&&function(e,t){var n=new Set;e.atoms().forEach((function(e){e.type().isBuiltin()||n.add(e.id())}));for(var r=t.atoms(),i=0;i<r.length;++i){var o=r[i];if(!o.type().isBuiltin()&&n.has(o.id()))return!0}return!1}(e.instance,r);(r&&this._update(n,r),i||Ni.clear(),!e.instance||r&&!i)&&(new D.DagreLayout).apply(n,{nodesep:100,rankdir:"BT",ranksep:150});n.update()}},{key:"render",value:function(){var e=this.props;return this.props.instance?a.a.createElement("canvas",{className:"graph",ref:this._ref}):a.a.createElement(_e.s,{title:e.title,description:e.description,icon:"graph"})}},{key:"_buildEdgeStyles",value:function(){var e=this.props.instance,t=this.props.links,n=this.props.edgeLabels;if(!e)return Ci;var r=e.fields(),i=e.skolems().filter((function(e){return e.arity()>1})),o=function(e){var r=e.id();return{groups:[r],link:t.get(r),label:n.get(r)}};return[{groups:[],link:t.get("Fields"),label:n.get("Fields"),children:r.map(o)},{groups:[],link:t.get("Skolems"),label:n.get("Skolems"),children:i.map(o)}]}},{key:"_buildNodeStyles",value:function(){var e=this.props.instance,t=this.props.shapes,n=this.props.nodeLabels;if(!e)return Ti;var r=e.signatures().find((function(e){return"univ"===e.id()}));if(!r)return Ti;var i=function e(r){var i=r.subTypes().map(e),o=t.get(r.id()),a=n.get(r.id());return{nodes:r.atoms().map((function(e){return e.name()})),shape:o?Object(D.cloneShapeStyle)(o):void 0,label:a?Object(D.cloneLabelStyle)(a):void 0,children:i}}(r);return i.shape||(i.shape={}),i.shape.type||(i.shape.type="rectangle"),[i]}},{key:"_update",value:function(e,t){var n=this.props,r=n.settings;if(t){var i=function(e,t,n,r,i,o){var a=Object(z.b)(e.signatures().map((function(t){var n,i=t.id();return r.has(i)?[t,(n=r.get(i),e.atoms().find((function(e){return e.name()===n})))]:[t,void 0]}))),u=Object(z.b)(e.fields().map((function(e){return[e,e.tuples().map(_).filter(Rt.isDefined).filter(g)]}))).filter((function(e){return e.length>0})),s=Object(z.b)(e.skolems().map((function(e){return[e,e.tuples().map(_).filter(Rt.isDefined).filter(g)]}))).filter((function(e){return e.length>0})),c=u.filter((function(e,t){return!m(t)&&e[0].arity()>1})),l=u.filter((function(e,t){return m(t)||1===e[0].arity()})),f=s.filter((function(e){return e[0].arity()>1})),h=s.filter((function(e){return 1===e[0].arity()})),d=[],p=Object(z.c)().withMutations((function(e){function t(t,n){var r=n.atoms(),i=r[0],o=r[r.length-1],a=r.slice(1,r.length-1),u=t.name()+(a.length?" [".concat(a.join(", "),"]"):"");e.add(i),e.add(o),d.push({source:i.name(),target:o.name(),group:t.id(),label:u})}c.forEach((function(e,n){e.forEach((function(e){return t(n,e)}))})),f.forEach((function(e,n){e.forEach((function(e){return t(n,e)}))}))})),v=Object(z.b)().withMutations((function(e){function t(t,n){Object(z.b)().withMutations((function(e){t.forEach((function(t){var n=t.atoms(),r=n[0],i=n.slice(1).map((function(e){return e.name()})).join("->");e.has(r)||e.set(r,[]),i.length&&e.get(r).push(i)}))})).forEach((function(t,r){var i="field"===n.expressionType()&&!m(n),o=t.length?": ".concat(t.join(", ")):"",a="".concat(n.name()).concat(o);e.has(r)||e.set(r,[]),e.get(r).push(i?"(".concat(a,")"):a)}))}l.forEach(t),h.forEach(t)}));return[e.atoms().map((function(e){var r=e.type();if(p.has(e)||!o.get(r.id())){var i=t.find((function(t){return t.id===e.name()}))||n.get(e.name())||{id:e.name(),x:0,y:0};return i.labels=v.get(e),i}})).filter(Rt.isDefined),d];function g(e){return e.arity()>0}function m(e){return!!i.get(e.id())}function _(e){var t=e.types().map(b).map((function(e){return a.get(e)}));if(!t.some(Rt.isDefined))return e;var n=e.atoms();return n.every((function(e,n){return void 0===t[n]||t[n]===e}))?new y(e.id(),n.filter((function(e,n){return void 0===t[n]}))):void 0}function b(e){return e.typeHierarchy()[1]}}(t,e.nodes(),Ni,n.projections,n.asAttribute,n.hideDisconnected),o=Object(er.a)(i,2),a=o[0],u=o[1];a.forEach((function(e){return Ni.set(e.id,e)})),e.nodes(a),e.edges(u),e.bundleFactor(n.bundleFactor),e.edgeLabelPlacement(n.edgeLabelPlacement),e.nodeStyles(this._buildNodeStyles()),e.edgeStyles(this._buildEdgeStyles())}else e.nodes([]),e.edges([]);e.axesVisible(r.axesVisible),e.gridVisible(r.gridVisible);var s=this._ref.current;s&&this.props.graph.canvas(s)}}]),t}(a.a.Component)),Ri=(n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(154),n(414),n(415),n(416),n(77)),Di={setValue:vn},Fi=Object(c.b)((function(e){return{script:e.scriptSlice.script}}),Di)(function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e)))._editor=void 0,n._onResize=function(e){n._editor&&n._editor.setSize(e[0].contentRect.width,"100%"),n.props.onResize&&n.props.onResize()},n._editor=null,n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"cm-container"},a.a.createElement(_e.y,{onResize:this._onResize},a.a.createElement(Ri.Controlled,{onBeforeChange:function(t,n,r){e.props.setValue(r)},onChange:this.props.onChange,editorDidMount:function(t){e._editor=t},value:this.props.script,options:{readOnly:this.props.readOnly,mode:"javascript",theme:"material",lineNumbers:!0,tabSize:2,autoCloseBrackets:!0,matchBrackets:!0,extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-Enter":this.props.onRequestExecute,"Ctrl-/":"toggleComment",Tab:function(e){var t=e.getOption("indentUnit")||0,n=Array(t+1).join(" ");e.replaceSelection(n)}},gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],placeholder:"Type code here...",scrollbarStyle:"overlay",foldGutter:!0}})))}}]),t}(a.a.Component)),Pi={nextAtom:un,previousAtom:sn},zi=Object(c.b)((function(e){return{projections:e.scriptSlice.projections}}),Pi)((function(e){return e.projections.size?a.a.createElement("div",{className:"overlay"},e.projections.toArray().map((function(t){var n=Object(er.a)(t,2),r=n[0],i=n[1];return a.a.createElement(a.a.Fragment,{key:r},a.a.createElement(_e.C,{ellipsize:!0},i),a.a.createElement("div",{className:"buttons"},a.a.createElement(_e.a,{icon:"chevron-left",minimal:!0,onClick:function(){return e.previousAtom(r)}}),a.a.createElement(_e.a,{icon:"chevron-right",minimal:!0,onClick:function(){return e.nextAtom(r)}})))}))):null})),Vi=function(e){return a.a.createElement("div",{className:"status-bar ".concat(e.status)})},Ui=n(161),qi={setScript:fn,setStage:dn},Bi=Object(c.b)((function(e){return{script:e.scriptSlice.script,stage:e.scriptSlice.stage}}),qi)(function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e)))._fileinput=void 0,n._onClickOpen=function(){n._fileinput.current&&n._fileinput.current.click()},n._onClickSave=function(){var e=new File([n.props.script],"script.js",{type:"text/plain;charset=utf-8"});Object(Ui.saveAs)(e)},n._onFileChange=function(){if(n._fileinput.current){var e=n._fileinput.current.files;if(null!==e&&e.length){var t=e[0],r=new FileReader;r.onerror=function(){Br("Unable to read ".concat(t.name))},r.onload=function(e){e.target&&n.props.setScript("".concat(e.target.result))},r.readAsText(t)}}},n._fileinput=a.a.createRef(),n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"script-nav bp3-dark"},a.a.createElement("input",{type:"file",style:{display:"none"},onChange:this._onFileChange,ref:this._fileinput}),a.a.createElement(_e.b,{className:"file-menu",minimal:!0},a.a.createElement(_e.u,{position:gr.a.BOTTOM_LEFT},a.a.createElement(_e.a,{icon:"document",rightIcon:"caret-down"},"File"),a.a.createElement(_e.m,null,a.a.createElement(_e.o,{text:"Open...",icon:"document-open",onClick:this._onClickOpen}),a.a.createElement(_e.o,{text:"Save As...",icon:"floppy-disk",onClick:this._onClickSave}))),a.a.createElement(_e.a,{icon:"social-media",onClick:this.props.onRequestExecute},"Execute")),a.a.createElement("div",{className:"script-nav-right"},a.a.createElement(_e.b,{minimal:!0},a.a.createElement(_e.a,{active:"div"===this.props.stage,onClick:function(){return e.props.setStage("div")},text:"<div>"}),a.a.createElement(_e.a,{active:"canvas"===this.props.stage,onClick:function(){return e.props.setStage("canvas")},text:"<canvas>"}),a.a.createElement(_e.a,{active:"svg"===this.props.stage,onClick:function(){return e.props.setStage("svg")},text:"<svg>"}))))}}]),t}(a.a.Component)),Wi={setSize:hn,setStatus:pn};function Hi(e){return Reflect.get(e,"__var__")}var Gi=Object(c.b)((function(e){return Object(Hn.a)({instance:e.sterlingSlice.instance},e.scriptSlice)}),Wi)(function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e)))._canvas=void 0,n._div=void 0,n._svg=void 0,n._runner=void 0,n._disableEditor=function(){n.setState({isReadOnly:!0})},n._enableEditor=function(){n.setState({isReadOnly:!1})},n._onRequestExecute=function(){n._disableEditor();var e=n.props.stage,t=n.props.script,r=n.props.instance,i=new Map(n.props.projections.toKeyedSeq()),o="canvas"===e?n._canvas.current:"svg"===e?n._svg.current:n._div.current,a=n.props.libraries,u=n.props.width,s=n.props.height;if(r)try{new Promise((function(e,t){n.props.status===Gt.SUCCESS&&e(),Jr.a.setItem("script",n.props.script).then(e).catch(t)})).then((function(){var c,l,f=r?function(e,t){var n=e.atoms(),r=[];t.forEach((function(e){var t=n.find((function(t){return t.id()===e}));if(!t)throw Error("Atom ".concat(e," not in instance"));r.push(t)}));var i=e.project(r),o=i.signatures(),a=i.atoms().filter((function(e){return isNaN(+e.id())})),u=i.fields(),s=i.skolems();return[[].concat(Object(P.a)(o.map(Hi)),Object(P.a)(a.map(Hi)),Object(P.a)(u.map(Hi)),Object(P.a)(s.map(Hi))),[].concat(Object(P.a)(o),Object(P.a)(a),Object(P.a)(u),Object(P.a)(s))]}(r,i):[[],[]],h=Object(er.a)(f,2),d=h[0],p=h[1];return(c=(l=n._runner.script(t).libraries(a.toArray())).args.apply(l,["instance",e,"width","height"].concat(Object(P.a)(d)))).run.apply(c,[r,o,u,s].concat(Object(P.a)(p)))})).then((function(){n.props.setStatus(Gt.SUCCESS)})).catch((function(e){n.props.setStatus(Gt.ERROR),Br(e.message)})).finally(n._enableEditor)}catch(c){Br(c.message),n._enableEditor()}},n._onResize=function(){var e="canvas"===n.props.stage?n._canvas.current:n._svg.current;if(e){var t=getComputedStyle(e),r=parseInt(t.getPropertyValue("width")),i=parseInt(t.getPropertyValue("height"));n.props.setSize([r,i])}else n.props.setSize([null,null])},n._canvas=a.a.createRef(),n._div=a.a.createRef(),n._svg=a.a.createRef(),n._runner=new ei,n.state={isReadOnly:!1},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.status===Gt.SUCCESS&&this._onRequestExecute()}},{key:"componentDidUpdate",value:function(e,t){var n=e.instance!==this.props.instance,r=e.projections!==this.props.projections;(n||r)&&this.props.status===Gt.SUCCESS&&this.props.autorun&&this._onRequestExecute()}},{key:"render",value:function(){var e=this;return a.a.createElement(_e.y,{onResize:this._onResize},a.a.createElement($n.a,{split:"vertical",defaultSize:"35%"},a.a.createElement("div",{className:"script-editor"},a.a.createElement(Bi,{onRequestExecute:this._onRequestExecute}),a.a.createElement(Vi,{status:this.props.status}),a.a.createElement(Fi,{onChange:function(){e.props.setStatus(Gt.PENDING)},onRequestExecute:this._onRequestExecute,onResize:this._onResize,readOnly:this.state.isReadOnly})),a.a.createElement("div",{className:"script-stage"},"canvas"===this.props.stage?a.a.createElement("canvas",{className:"script-stage",ref:this._canvas}):"svg"===this.props.stage?a.a.createElement("svg",{className:"script-stage",ref:this._svg}):a.a.createElement("div",{className:"script-stage",ref:this._div}),this.props.overlay&&a.a.createElement(zi,null))))}}]),t}(a.a.Component)),$i=n(28);n(417);$i.defineSimpleMode("alloy",{start:[{regex:/--.*/,token:"comment"},{regex:/\/\*/,token:"comment",next:"comment"},{regex:/\/\/.*/,token:"comment"},{regex:/\s+-?\b\d+\b/,token:"number"},{regex:/(?:abstract|all|and|as|assert|but|check|disj|else|exactly|expect|extends|fact|for|fun|iden|iff|implies|in|Int|int|let|lone|module|no|none|not|one|open|or|pred|run|set|sig|some|sum|univ)\b/,token:"keyword"}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"},{regex:/\/\/.*/,token:"comment"}],meta:{lineComment:"--"}});var Yi=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e)))._editor=void 0,n._onResize=function(e){n._editor&&n._editor.setSize(e[0].contentRect.width,"100%")},n._editor=null,n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(_e.y,{onResize:this._onResize},a.a.createElement(Ri.UnControlled,{editorDidMount:function(t){e._editor=t},value:this.props.source,options:{lineNumbers:!0,mode:"alloy",readOnly:!0,theme:"neo"}}))}}]),t}(a.a.Component),Xi=Object(c.b)((function(e){return{instance:e.sterlingSlice.instance,selected:e.sourceSlice.selected,welcome:e.sterlingSlice.welcomeTitle,welcomeDescription:e.sterlingSlice.welcomeDescription}}))((function(e){return e.instance?e.selected?a.a.createElement(Yi,{source:e.selected.source()}):a.a.createElement(_e.s,{description:"Choose a File",icon:"document",title:e.welcome}):a.a.createElement(_e.s,{description:e.welcomeDescription,icon:"document",title:e.welcome})})),Zi=n(74),Ki=n(429),Qi=n(430),Ji=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={enabled:!1},n._buildShadowStyle=function(e,t){return e.map((function(e,n){return"0 0 0 ".concat((n+1)*t,"px ").concat(e)})).join(",")},n._onMouseEnter=function(){n.setState({enabled:!0})},n._onMouseLeave=function(){n.setState({enabled:!1})},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.colors,n=this.state.enabled?4:2;return a.a.createElement(Zi.c,null,a.a.createElement(Ki.a,null,(function(r){var i=r.ref;return a.a.createElement("tr",{onMouseEnter:e._onMouseEnter,onMouseLeave:e._onMouseLeave,ref:i,style:{boxShadow:e._buildShadowStyle(t,n)}},e.props.children)})),a.a.createElement(_e.v,null,a.a.createElement(Qi.a,{modifiers:{},placement:"right"},(function(r){var i=r.ref,o=r.style,u=r.placement;return e.state.enabled&&a.a.createElement("div",{ref:i,style:Object(Hn.a)({},o,{padding:n*(t.length-1)+"px"}),"data-placement":u},a.a.createElement("div",{className:"table-rowpop"},e.props.content))}))))}}]),t}(a.a.Component);function eo(e,t){return a.a.createElement(a.a.Fragment,null,e.map((function(e,n){return a.a.createElement("div",{key:e.id(),style:{backgroundColor:t[n]}},e.name())})))}var to=Object(c.b)((function(e){return Object(Hn.a)({},e.tableSlice,{description:e.sterlingSlice.welcomeDescription,instance:e.sterlingSlice.instance,title:e.sterlingSlice.welcomeTitle})}))((function(e){if(!e.instance)return a.a.createElement(_e.s,{title:e.title,description:e.description,icon:"th"});var t=function(e){return e===Kt.Left?"left":e===Kt.Center?"center":e===Kt.Right?"right":""}(e.alignment),n=function(e){return e===Qt.Row?"row":e===Qt.Column?"column":""}(e.layoutDirection),r=En(e.removeThis),i=Sn(e.primarySort,r),o=Sn(e.secondarySort,r),u=e.tablesType,s=u===tn.All?e.data:u===tn.Signatures?e.data.filter(w.keepSignatures):u===tn.Fields?e.data.filter(w.keepFields):u===tn.Skolems?e.data.filter(w.keepSkolems):u===tn.Select?e.dataSelected.slice():[],c=function(){return!0};return s=(s=u===tn.Select?s:s.filter(e.removeBuiltin?w.removeBuiltins:c).filter(e.removeEmpty?w.removeEmptys:c).filter(e.highlightSkolems?w.removeSkolems:c)).sort(o).sort(i),a.a.createElement("div",{className:"tables ".concat(t," ").concat(n)},s.map((function(t){return a.a.createElement(_e.d,{key:t.id(),elevation:1},function(e,t){if("signature"===e.expressionType())return a.a.createElement(be,{fill:!0,signature:e,nameFunction:t});if("field"===e.expressionType())return a.a.createElement(we,{fill:!0,field:e,nameFunction:t});if("skolem"===e.expressionType())return a.a.createElement(xe,{fill:!0,skolem:e,nameFunction:t});return null}(t,r),"signature"===t.expressionType()?function(e){var t=e.signature.atoms();return a.a.createElement(_e.j,{bordered:!0,condensed:!0,striped:!0},a.a.createElement("tbody",null,t.map((function(t){var n=t.skolems();if(e.highlightSkolems&&n.length){var r=n.map((function(t){return e.skolemColors.get(t)||""}));return a.a.createElement(Ji,{key:t.id(),content:eo(n,r),colors:r},a.a.createElement("td",null,t.name()))}return a.a.createElement("tr",{key:t.id()},a.a.createElement("td",null,t.name()))}))))}({highlightSkolems:e.highlightSkolems,signature:t,skolemColors:e.skolemColors}):"field"===t.expressionType()?function(e){var t=e.field.types(),n=e.field.tuples();return a.a.createElement(_e.j,{bordered:!0,condensed:!0,striped:!0},a.a.createElement("thead",null,a.a.createElement("tr",null,t.map((function(t,n){return a.a.createElement("th",{key:t.id()+n},e.nameFunction(t))})))),a.a.createElement("tbody",null,n.map((function(t){var n=t.skolems();if(e.highlightSkolems&&n.length){var r=n.map((function(t){return e.skolemColors.get(t)||""}));return a.a.createElement(Ji,{key:t.id(),content:eo(n,r),colors:r},t.atoms().map((function(e,n){return a.a.createElement("td",{key:t.id()+"["+n+"]"},e.name())})))}return a.a.createElement("tr",{key:t.id()},t.atoms().map((function(e,n){return a.a.createElement("td",{key:t.id()+"["+n+"]"},e.name())})))}))))}({field:t,highlightSkolems:e.highlightSkolems,nameFunction:r,skolemColors:e.skolemColors}):"skolem"===t.expressionType()?function(e){var t=e.skolem.types(),n=e.skolem.tuples();return a.a.createElement(_e.j,{bordered:!0,condensed:!0,striped:!0},a.a.createElement("thead",null,a.a.createElement("tr",null,t.map((function(t,n){return a.a.createElement("th",{key:t.id()+n},e.nameFunction(t))})))),a.a.createElement("tbody",null,n.map((function(e){return a.a.createElement("tr",{key:e.id()},e.atoms().map((function(t,n){return a.a.createElement("td",{key:e.id()+"["+n+"]"},t.name())})))}))))}({nameFunction:r,skolem:t}):null)})))})),no=Object(c.b)((function(e){return{view:e.sterlingSlice.mainView}}))(function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.view;return a.a.createElement("div",{className:"stage"},"table"===e?a.a.createElement(to,null):"graph"===e?a.a.createElement(Ii,null):"script"===e?a.a.createElement(Gi,null):"source"===e?a.a.createElement(Xi,null):null)}}]),t}(a.a.Component));Gn.a.onlyShowFocusOnTabs();var ro={setInstance:B,setScript:fn},io=Object(c.b)((function(e){return Object(Hn.a)({graph:e.graphSlice.graphSlice.graph},e.sterlingSlice)}),ro)(function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e)))._evaluator=void 0,n._evaluatorView=void 0,n._getDrawer=function(){var e=n.props,t=n._evaluatorView,r="graph"===e.mainView&&"evaluator"===e.graphView||"table"===e.mainView&&"evaluator"===e.tableView||"script"===e.mainView&&"evaluator"===e.scriptView||"source"===e.mainView&&"evaluator"===e.sourceView;return a.a.createElement(Jn,null,r?a.a.createElement(t,{evaluator:n._evaluator}):"graph"===e.mainView?a.a.createElement(Dr,null):"table"===e.mainView?a.a.createElement(mi,null):"script"===e.mainView?a.a.createElement(ui,null):"source"===e.mainView?a.a.createElement(fi,null):null)},n._getNavbar=function(){return a.a.createElement(Ur,{connection:n.props.connection})},n._initializeConnection=function(){var e=n.props.connection;e.addEventListener("connect",(function(){e.requestCurrentInstance()})),e.addEventListener("instance",(function(e){n.props.setInstance(e.instance)})),e.connect()},n._resize=function(){"graph"===n.props.mainView&&n.props.graph.resize()},n._evaluator=new Yn(e.connection),n._evaluatorView=Kn,n.state={instance:null},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._initializeConnection(),Jr.a.getItem("script").then((function(t){e.props.setScript("".concat(t))})).catch((function(e){Br("".concat(e.name,": ").concat(e.message))}))}},{key:"render",value:function(){var e=this.props,t="graph"===e.mainView&&null!==e.graphView||"table"===e.mainView&&null!==e.tableView||"script"===e.mainView&&null!==e.scriptView||"source"===e.mainView&&null!==e.sourceView;return a.a.createElement(_e.y,{onResize:this._resize},a.a.createElement(wi,null,this._getNavbar(),a.a.createElement(Ai,null),t?a.a.createElement($n.a,{split:"vertical",defaultSize:350,minSize:150,maxSize:-150,onChange:this._resize},this._getDrawer(),a.a.createElement(no,null)):a.a.createElement(no,null)))}}]),t}(a.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(418);var oo=new R,ao=Object(i.createStore)(Wn);s.a.render(a.a.createElement(c.a,{store:ao},a.a.createElement(io,{connection:oo})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[188,1,2]]]);
//# sourceMappingURL=main.62c5962e.chunk.js.map